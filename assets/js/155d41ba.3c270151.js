"use strict";(self.webpackChunk_anocca_sequence_viewer_website=self.webpackChunk_anocca_sequence_viewer_website||[]).push([[3648],{4721:function(e,t,n){n.d(t,{k:function(){return b}});var r=n(8927),i=n(8851),a=n(6179),o=n(7019),l=n(3048),c=n(442),s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},u=function(e){var t=e.isProtein,n=e.chromatogramData,r=e.ref,a=e.width,u=e.height,d=e.sequence,f=e.allAnnotations,C=e.codons,T=e.Search,h=e.FilterChromatogram,A=e.openAnnotationDialog,v=d.length,G=v-1,m=(0,o.QO)(a,d,t),p=t?l.ci:l.Jn,g=s(i.useState([{state:"selected",start:0,end:0,antiClockwise:void 0}]),2),y=g[0],b=g[1],x=s(i.useState(void 0),2),S=x[0],k=x[1];return(0,o.bc)({circularSelection:y,setCircularSelection:function(e,t){k(e),b(t)},clickedAnnotation:S,renderData:m,getCaretPosition:function(){if(!m.current)return 0;var e=m.current,t=e.mouseX,n=e.mouseY,r=e.matrix,i=(0,c.H)(r),a=(0,c.DC)(t,n,i);return Math.min(Math.max(Math.floor(a.x/p),0),G)},updateScroll:function(e,t,n,r,i){if(m.current){var o=i?1:Math.pow(1.1,-t/50),s=i?-1*t*.1:0,u=i?0:-e/Math.pow(m.current.matrix.a,1/1.2),d={a:1,b:0,c:0,d:1,e:0,f:0},f={a:1,b:0,c:0,d:1,e:0,f:0},C=function(){var e,t,i,a=(e=n,t=r,i=m.current.matrix,(0,c.DC)(e,t,(0,c.H)(i)));d=(0,l.h9)((0,l.ee)(a.x,a.y),(0,l.Wi)(o),(0,l.ee)(-a.x,-a.y),(0,l.ee)(u,s)),f=(0,l.h9)(m.current.matrix,d)};C();var T=v*p*f.a,h=a-96;if(T<h&&o<1)o=1/(h/(v*p)),C();f.a>=1&&o>1&&(o=1,C()),T=v*p*f.a,f.e>a/2&&(u>0&&(u=0),n=o<1?Math.min(n,a/2):Math.max(n,a/2),C()),f.e<a/2-T&&(u<0&&(u=0),n=o>1?Math.min(n,a/2):Math.max(n,a/2),C()),f.f>0&&(s>0&&(s=0),C()),m.current.matrix=f}},draw:c.Ih,zoomToSearchResult:function(e,n){if(m.current){var r=e.start,i=e.end;n?function(e,t,n,r){var i=r?l.ci:l.Jn,a=n.start-1,o=(n.end-a)*i,c=t/o,s=Math.max((o*c-o)/2,0),u=Math.min(c,1),d=(0,l.h9)((0,l.ee)(-a*i*u+s,0),(0,l.Wi)(u));e.e=d.e,e.a=d.a}(m.current.matrix,a,{start:r,end:i+1},t):function(e,t,n,r){var i=r?l.ci:l.Jn,a=n.start-1,o=(t-(n.end-a)*i*e.a)/2;e.e=-a*i*e.a+o}(m.current.matrix,a,{start:r,end:i+1},t)}},ref:r,width:a,height:u,sequence:d,allAnnotations:f,codons:C,Search:T,FilterChromatogram:h,openAnnotationDialog:A,isProtein:t,chromatogramData:n,isCircularView:!1})},d=i.forwardRef((function(e,t){var n=e.width,i=e.height,a=e.sequence,o=e.annotations,l=e.codons,c=e.Search,s=e.FilterChromatogram,d=e.children,f=e.openAnnotationDialog,C=e.isProtein,T=e.chromatogramData,h=u({ref:t,width:n,height:i,sequence:a,allAnnotations:o,codons:l,Search:c,FilterChromatogram:s,openAnnotationDialog:f,isProtein:C,chromatogramData:T}),A=h.canvas,v=h.selectedAnnotations,G=h.circularSelection,m=h.clickedAnnotation,p=h.search,g=h.filterChromatogram,y=h.canvasRef,b=h.zoomToSearchResult,x=h.setCircularSelection,S=h.setSearchResults;return(0,r.jsx)(r.Fragment,{children:d?d({canvas:A,selectedAnnotations:v,circularSelections:G,setCircularSelection:x,clickedAnnotation:m,search:p,filterChromatogram:g,canvasRef:y,zoomToSearchResult:b,setSearchResults:S}):p?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:p},void 0),(0,r.jsx)("div",{children:A},void 0)]},void 0):A},void 0)})),f=n(2443),C=n(2439),T=n(7334),h=n(3480),A=n(4306),v=n(9907),G=n(9684),m=n(3273),p=n(7653),g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},g.apply(this,arguments)},y=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},b=function(e){var t=y(i.useState(void 0),2),n=t[0],c=t[1],s=y(i.useState(void 0),2),u=s[0],b=s[1],x=function(t){var n=e.getAnnotationById(t);b(n)},S=y(i.useState(""),2),k=S[0],w=S[1],R=function(e){w("")},M=y(i.useState(!e.renderLinearByDefault&&!e.isProtein),2),P=M[0],E=M[1],j=P?a.z:d,L=e.AnnotationForm;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!k,autoHideDuration:1500,onClose:R,message:k,action:(0,r.jsx)(i.Fragment,{children:(0,r.jsx)(T.Z,g({size:"small","aria-label":"close",color:"inherit",onClick:R},{children:(0,r.jsx)(p.FU5,{fontSize:"small"},void 0)}),void 0)},void 0)},void 0),(0,r.jsx)(h.Z,g({onClose:function(){c(void 0)},open:!!n},{children:n&&(0,r.jsx)(L,{onSubmit:function(t){c(void 0),e.addAnnotation(t)},initialValues:n,title:"Create annotation"},void 0)}),void 0),(0,r.jsx)(h.Z,g({onClose:function(){b(void 0)},open:!!u},{children:u&&(0,r.jsx)(L,{onSubmit:function(t){b(void 0),e.updateAnnotation(t)},initialValues:u,title:"Edit annotation"},void 0)}),void 0),(0,r.jsx)(j,g({width:e.width,height:e.height,isProtein:!!e.isProtein,chromatogramData:e.chromatogramData,annotations:e.annotations,codons:l.Mu,sequence:e.sequence,Search:f.ol,FilterChromatogram:f.Mh,openAnnotationDialog:function(t){var n=e.getAnnotationById(t);b(n)}},{children:function(t){var n=t.canvas,i=t.search,a=t.filterChromatogram,l=t.selectedAnnotations,s=t.circularSelections,u=t.setCircularSelection,d=t.clickedAnnotation;return(0,r.jsxs)("div",g({style:{margin:"auto",maxWidth:e.width+"px"}},{children:[(0,r.jsxs)(o.kC,g({justifyContent:"space-between",alignItems:"center",style:{maxWidth:e.width+"px",height:"56px",padding:"0 10px"}},{children:[(0,r.jsx)(o.kC,g({style:{position:"relative",zIndex:1}},{children:(0,r.jsx)(f.o8,{selectedAnnotations:l,isCircularViewer:P,circularSelections:s,setCircularSelection:u,sequence:e.sequence,createAnnotation:function(e,t){c({locations:e,direction:t})},onHide:e.hideAnnotations,onShow:e.showAnnotations,onDelete:e.deleteAnnotations,onCopySuccess:function(){w("Successfully copied selected region to clipboard")},onCopyError:function(){w("Something went wrong when trying to copy the region")}},void 0)}),void 0),(0,r.jsxs)(o.kC,g({style:{gap:"20px",alignItems:"center"}},{children:[a,i]}),void 0)]}),void 0),(0,r.jsxs)("div",g({style:{position:"relative"}},{children:[n,!e.isProtein&&(0,r.jsx)("div",g({style:{position:"absolute",right:"80px",bottom:"160px"}},{children:(0,r.jsx)(A.Z,g({component:"div"},{children:(0,r.jsxs)(v.ZP,g({component:"label",container:!0,alignItems:"center",spacing:1},{children:[(0,r.jsx)(v.ZP,g({item:!0},{children:"Linear"}),void 0),(0,r.jsx)(v.ZP,g({item:!0},{children:(0,r.jsx)(G.Z,{checked:P,onChange:function(e){E(e.target.checked)},name:"circularswitch"},void 0)}),void 0),(0,r.jsx)(v.ZP,g({item:!0},{children:"Circular"}),void 0)]}),void 0)}),void 0)}),void 0)]}),void 0),(0,r.jsx)(o.kC,g({style:{height:"60px"}},{children:l.length>0&&(0,r.jsxs)(o.kC,g({alignItems:"center",justifyContent:"flex-start",style:{maxWidth:e.width+"px",overflowX:"scroll"}},{children:[d&&(0,r.jsx)(m.Z,{label:e.getAnnotationLabelById(d),color:"primary",onClick:function(){x(d)},style:{marginRight:"8px"}},void 0),l.filter((function(e){return e!==d})).map((function(t){return(0,r.jsx)(m.Z,{label:e.getAnnotationLabelById(t),color:"default",onClick:function(){x(t)},style:{marginRight:"8px"}},t)}))]}),void 0)}),void 0)]}),void 0)}}),void 0)]},void 0)}},5571:function(e,t,n){n.d(t,{n:function(){return l}});var r=n(8851),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},l=function(e){void 0===e&&(e=[]);var t=a(r.useState(e),2),n=t[0],l=t[1],c=Object.fromEntries(n.map((function(e){return[e.id,e]})));return{annotations:n,getAnnotationLabelById:function(e){var t,n=null===(t=c[e])||void 0===t?void 0:t.label;if(!n)throw new Error("could not fetch label for "+e);return n},getAnnotationById:function(e){var t=c[e];if(!t)throw new Error("could not fetch annot for "+e);return t},addAnnotation:function(e){l(o(o([],a(n)),[e]))},deleteAnnotations:function(e){l(n.filter((function(t){return!e.includes(t.id)})))},showAnnotations:function(e){l(n.map((function(t){return e.includes(t.id)?i(i({},t),{hidden:!1}):t})))},hideAnnotations:function(e){l(n.map((function(t){return e.includes(t.id)?i(i({},t),{hidden:!0}):t})))},updateAnnotation:function(e){l(n.map((function(t){return e.id===t.id?e:t})))}}}},6179:function(e,t,n){n.d(t,{z:function(){return s}});var r=n(8927),i=n(8851),a=n(7019),o=n(8064),l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},c=function(e){var t=e.isProtein,n=e.ref,r=e.width,c=e.height,s=e.sequence,u=e.allAnnotations,d=e.codons,f=e.Search,C=e.openAnnotationDialog,T=s.length,h=(0,a.QO)(r,s,t),A=l(i.useState([{state:"selected",start:0,end:0,antiClockwise:void 0}]),2),v=A[0],G=A[1],m=l(i.useState(void 0),2),p=m[0],g=m[1],y=function(){if(h.current){var e=(0,o.Ej)({data:h.current,sequence:s,w:r,h:c,circularSelection:v}).angleOffset;h.current.circluarCamera.value.angle=0,h.current.circluarCamera.angleOffset=e,e>Math.PI&&(h.current.circluarCamera.angleOffset=-(2*Math.PI-e)),h.current.circluarCamera.scrollOffsetZooming=0,h.current.circluarCamera.scrollOffsetZoomed=0}};return(0,a.bc)({resetAngularScroll:y,circularSelection:v,setCircularSelection:function(e,t){g(e),G(t)},clickedAnnotation:p,renderData:h,getCaretPosition:function(){return h.current?(0,o.Ej)({data:h.current,sequence:s,w:r,h:c,circularSelection:v}).hoveringCaretPosition:0},updateScroll:function(e,t){!function(e,t){if(h.current){var n=Math.abs(e)>Math.abs(t)?0:-t/7500,i=Math.abs(e)>Math.abs(t)?-e/1e3:0;(0,o.QJ)(n,h.current.circluarCamera.value,h.current.circluarCamera.target);var a=i*(300/(0,o.Ej)({data:h.current,sequence:s,w:r,h:c,circularSelection:v}).radius);1===h.current.circluarCamera.value.angle?h.current.circluarCamera.scrollOffsetZoomed+=a:h.current.circluarCamera.scrollOffsetZooming+=a,h.current.circluarCamera.angleOffset=(2*Math.PI+h.current.circluarCamera.angleOffset)%(2*Math.PI)}}(e,t)},draw:o.Es,zoomToSearchResult:function(e,t){h.current&&(y(),h.current.circluarCamera.value={zoom:t?1:h.current.circluarCamera.value.zoom,angle:1,radius:t?(0,o.TC)(r,c,T,1,e):h.current.circluarCamera.value.radius},(0,o.Gk)(h.current.circluarCamera.value,h.current.circluarCamera.target))},ref:n,width:r,height:c,sequence:s,allAnnotations:u,codons:d,Search:f,openAnnotationDialog:C,isProtein:t,isCircularView:!0})},s=i.forwardRef((function(e,t){var n=e.width,i=e.height,a=e.sequence,o=e.annotations,l=e.codons,s=e.Search,u=e.children,d=e.openAnnotationDialog,f=e.isProtein,C=c({ref:t,width:n,height:i,sequence:a,allAnnotations:o,codons:l,Search:s,openAnnotationDialog:d,isProtein:f}),T=C.canvas,h=C.selectedAnnotations,A=C.circularSelection,v=C.clickedAnnotation,G=C.search,m=C.canvasRef,p=C.zoomToSearchResult,g=C.setSearchResults,y=C.setCircularSelection;return(0,r.jsx)(r.Fragment,{children:u?u({canvas:T,selectedAnnotations:h,circularSelections:A,setCircularSelection:y,clickedAnnotation:v,search:G,canvasRef:m,zoomToSearchResult:p,setSearchResults:g}):G?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:G},void 0),(0,r.jsx)("div",{children:T},void 0)]},void 0):T},void 0)}))},8390:function(e,t,n){n.d(t,{N:function(){return p}});var r=n(8927),i=n(3048),a=n(5728),o=n(354),l=n(8305),c=n(5562),s=n(3467),u=n(2067),d=n(9116),f=n(7334),C=n(4978),T=n(4677),h=n(7653),A=function(){return A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},A.apply(this,arguments)},v=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},G=function e(t){return void 0===t&&(t=""),t?((Number(t)^16*Math.random())>>Number(t)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e)},m={marginBottom:16},p=function(e){var t=e.onSubmit,n=e.initialValues,p=e.title;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Z,{children:p},void 0),(0,r.jsx)(o.Z,A({style:{paddingTop:8}},{children:(0,r.jsx)(T.J9,A({initialValues:A({id:G(),type:"OTHER",label:"",color:"#000000",locations:[],hidden:!1,displayAsSequence:!1,rightTag:"",displayLabel:"",direction:i.fn.FORWARD,cleavageSites:[],fivePExtension:""},n),onSubmit:function(e,n){n.setSubmitting;t(e)},validate:function(e){var t={};return e.label||(t.label="Required"),"DNA_RE_NUC"===e.type&&0===e.cleavageSites.length&&(t.cleavageSites="Required"),0===e.locations.length&&(t.locations="Required"),t}},{children:function(e){return(0,r.jsxs)("form",A({onSubmit:e.handleSubmit},{children:[(0,r.jsx)(l.Z,{fullWidth:!0,id:"label",name:"label",label:"Label",value:e.values.label,onChange:e.handleChange,error:e.touched.label&&Boolean(e.errors.label),helperText:e.touched.label&&e.errors.label,style:m},void 0),(0,r.jsx)(l.Z,{id:"color",name:"color",label:"Color",type:"color",style:A({width:"100px"},m),inputProps:{style:{height:32,margin:0,padding:4}},value:e.values.color,onChange:e.handleChange,error:e.touched.color&&Boolean(e.errors.color),helperText:e.touched.color&&e.errors.color},void 0),(0,r.jsxs)("div",A({style:m},{children:[(0,r.jsx)(T.Bc,{name:"displayAsSequence"},void 0),(0,r.jsx)(c.Z,{control:(0,r.jsx)(s.Z,{checked:e.values.displayAsSequence,onChange:e.handleChange,name:"displayAsSequence",color:"primary"},void 0),label:"Display as sequence"},void 0)]}),void 0),(0,r.jsxs)("div",A({style:m},{children:[(0,r.jsx)(T.Bc,{name:"hidden"},void 0),(0,r.jsx)(c.Z,{control:(0,r.jsx)(s.Z,{checked:e.values.hidden,onChange:e.handleChange,name:"hidden",color:"primary"},void 0),label:"Hidden"},void 0)]}),void 0),(0,r.jsx)(l.Z,{fullWidth:!0,id:"rightTag",name:"rightTag",label:"Right tag",value:e.values.rightTag,onChange:e.handleChange,error:e.touched.rightTag&&Boolean(e.errors.rightTag),helperText:e.touched.rightTag&&e.errors.rightTag,style:m},void 0),(0,r.jsx)(l.Z,{fullWidth:!0,id:"displayLabel",name:"displayLabel",label:"Display label",value:e.values.displayLabel,onChange:e.handleChange,error:e.touched.displayLabel&&Boolean(e.errors.displayLabel),helperText:e.touched.displayLabel&&e.errors.displayLabel,style:m},void 0),(0,r.jsx)(l.Z,A({value:e.values.type,onChange:e.handleChange,style:m,error:e.touched.type&&Boolean(e.errors.type),select:!0,name:"type",label:"Type"},{children:[(0,i.bc)("DNA oligo","DNA_OLIGO"),(0,i.bc)("DNA restriction nuclease","DNA_RE_NUC"),(0,i.bc)("Other","OTHER")].map((function(e){var t=v(e,2),n=t[0],i=t[1];return(0,r.jsx)(u.Z,A({value:i,id:i},{children:n}),i)}))}),void 0),(0,r.jsx)(l.Z,A({value:e.values.direction,onChange:e.handleChange,error:e.touched.direction&&Boolean(e.errors.direction),name:"direction",label:"Direction",style:m},{children:[(0,i.bc)("Forward",i.fn.FORWARD),(0,i.bc)("Reverse",i.fn.REVERSE)].map((function(e){var t=v(e,2),n=t[0],i=t[1];return(0,r.jsx)(u.Z,A({value:i,id:i},{children:n}),i)}))}),void 0),"DNA_OLIGO"===e.values.type&&(0,r.jsx)(l.Z,{style:m,fullWidth:!0,id:"fivePExtension",name:"fivePExtension",label:"5PExtension",value:e.values.fivePExtension,onChange:e.handleChange,error:e.touched.fivePExtension&&Boolean(e.errors.fivePExtension),helperText:e.touched.fivePExtension&&e.errors.fivePExtension},void 0),"DNA_RE_NUC"===e.values.type&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,A({id:"select-cleavageSites",shrink:!0,style:m},{children:"Cleavage sites"}),void 0),(0,r.jsx)(T.F2,A({name:"cleavageSites"},{children:function(t){t.insert;var n=t.remove,a=t.push;return(0,r.jsxs)("div",A({style:m},{children:[e.values.cleavageSites.length>0&&e.values.cleavageSites.map((function(t,i){return(0,r.jsxs)("div",A({className:"row",style:m},{children:[(0,r.jsx)("div",A({className:"col"},{children:(0,r.jsx)(l.Z,{id:"cleavageSites."+i+".0",name:"cleavageSites."+i+".0",type:"number",label:"Left",value:(0,T.u9)(e.values,"cleavageSites."+i+".0"),onChange:e.handleChange,error:(0,T.u9)(e.touched,"cleavageSites."+i+".0")&&Boolean((0,T.u9)(e.errors,"cleavageSites."+i+".0")),helperText:(0,T.u9)(e.touched,"cleavageSites."+i+".0")&&(0,T.u9)(e.errors,"cleavageSites."+i+".0")},void 0)}),void 0),(0,r.jsx)("div",A({className:"col"},{children:(0,r.jsx)(l.Z,{id:"cleavageSites."+i+".1",name:"cleavageSites."+i+".1",type:"number",label:"Right",value:(0,T.u9)(e.values,"cleavageSites."+i+".1"),onChange:e.handleChange,error:(0,T.u9)(e.touched,"cleavageSites."+i+".1")&&Boolean((0,T.u9)(e.errors,"cleavageSites."+i+".1")),helperText:(0,T.u9)(e.touched,"cleavageSites."+i+".1")&&(0,T.u9)(e.errors,"cleavageSites."+i+".1")},void 0)}),void 0),(0,r.jsx)("div",A({className:"col"},{children:(0,r.jsx)(f.Z,A({onClick:function(){return n(i)}},{children:(0,r.jsx)(h.FU5,{},void 0)}),void 0)}),void 0)]}),i)})),(0,r.jsx)(C.Z,A({onClick:function(){return a((0,i.bc)(0,0))},variant:"outlined",style:{marginTop:"8px"}},{children:"Add cleavage site"}),void 0)]}),void 0)}}),void 0),(0,r.jsx)(T.Bc,{name:"cleavageSites"},void 0)]},void 0),(0,r.jsx)(d.Z,A({id:"select-locations",shrink:!0},{children:"Locations"}),void 0),(0,r.jsx)(T.F2,A({name:"locations"},{children:function(t){t.insert;var n=t.remove,a=t.push;return(0,r.jsxs)("div",A({style:m},{children:[e.values.locations.length>0&&e.values.locations.map((function(t,i){return(0,r.jsxs)("div",A({className:"row",style:m},{children:[(0,r.jsx)("div",A({className:"col"},{children:(0,r.jsx)(l.Z,{id:"locations."+i+".0",name:"locations."+i+".0",type:"number",label:"Left",value:(0,T.u9)(e.values,"locations."+i+".0"),onChange:e.handleChange,error:(0,T.u9)(e.touched,"locations."+i+".0")&&Boolean((0,T.u9)(e.errors,"locations."+i+".0")),helperText:(0,T.u9)(e.touched,"locations."+i+".0")&&(0,T.u9)(e.errors,"locations."+i+".0")},void 0)}),void 0),(0,r.jsx)("div",A({className:"col"},{children:(0,r.jsx)(l.Z,{id:"locations."+i+".1",name:"locations."+i+".1",type:"number",label:"Right",value:(0,T.u9)(e.values,"locations."+i+".1"),onChange:e.handleChange,error:(0,T.u9)(e.touched,"locations."+i+".1")&&Boolean((0,T.u9)(e.errors,"locations."+i+".1")),helperText:(0,T.u9)(e.touched,"locations."+i+".1")&&(0,T.u9)(e.errors,"locations."+i+".1")},void 0)}),void 0),(0,r.jsx)("div",A({className:"col",style:{display:"flex",alignItems:"center"}},{children:(0,r.jsx)(f.Z,A({onClick:function(){return n(i)}},{children:(0,r.jsx)(h.FU5,{},void 0)}),void 0)}),void 0)]}),i)})),(0,r.jsx)(C.Z,A({onClick:function(){return a((0,i.bc)(0,0))},variant:"outlined",style:{marginTop:"8px"}},{children:"Add location"}),void 0)]}),void 0)}}),void 0),(0,r.jsx)("div",{children:(0,r.jsx)(T.Bc,{name:"locations"},void 0)},void 0),(0,r.jsx)(C.Z,A({color:"primary",variant:"contained",type:"submit",disabled:e.isSubmitting},{children:"Submit"}),void 0)]}),void 0)}}),void 0)}),void 0)]},void 0)}},2443:function(e,t,n){n.d(t,{Mh:function(){return P},ol:function(){return v},o8:function(){return g}});var r=n(8927),i=n(8851),a=n(3048),o=n(324),l=n(8445),c=n(7334),s=n(5460),u=n(3344),d=n(6873),f=n(8650),C=n(7653),T=n(7019),h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},h.apply(this,arguments)},A=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},v=function(e){var t=e.sequence,n=e.zoomOnResult,v=e.onSearchResults,G=e.spinOnResult,m=e.isProtein,p=A(i.useState(-1),2),g=p[0],y=p[1],b=A(i.useState(!1),2),x=b[0],S=b[1],k=A(i.useState(""),2),w=k[0],R=k[1],M=i.useCallback((function(e,t){if(t)try{return(0,a.zO)(!1,e)}catch(n){return""}return e}),[]),P=function(e,n,r){var i=M(e,n),o=t.toUpperCase();if(!i.length)return[];for(var l=[],c=0;c<o.length-i.length;c+=1)(0,a.$X)(m,o.substr(c,i.length),i)&&l.push({start:c,end:c+i.length,active:l.length===r,complement:n});return l},E=function(e,t,n,r){var i=n,a=r,o=P(e,t,i);o.length>0&&-1===i&&(i=0,o[0].active=!0,a=!0),R(e),S(t),y(i),v(o),a&&G({start:o[i].start,end:o[i].end,active:o[i].active,complement:t})},j=P(w,x,g),L=A(i.useState(!1),2),D=L[0],I=L[1],O=function(){I(!1)};return(0,r.jsxs)("div",h({style:{display:"flex",alignItems:"center",userSelect:"none"}},{children:[(0,r.jsx)("div",h({style:{paddingRight:"0px"}},{children:(0,r.jsx)(o.Z,{placeholder:"AHNRKYCDGT",endAdornment:(0,r.jsxs)(T.kC,h({alignItems:"center"},{children:[!m&&(0,r.jsx)(l.Z,h({title:"Search by reverse complement"},{children:(0,r.jsx)(c.Z,h({size:"small",onClick:function(){E(w,!x,-1,!1)}},{children:x?(0,r.jsx)(C.y5A,{},void 0):(0,r.jsx)(C.hrt,{},void 0)}),void 0)}),void 0),(0,r.jsx)(l.Z,h({title:"Zoom on result"},{children:(0,r.jsx)(c.Z,h({onClick:function(){j.length>0&&-1!==g&&n({start:j[g].start,end:j[g].end,active:j[g].active,complement:x})},size:"small"},{children:(0,r.jsx)(f.FKI,{},void 0)}),void 0)}),void 0),(0,r.jsx)(s.Z,h({onClickAway:O},{children:(0,r.jsx)("div",{children:(0,r.jsx)(l.Z,h({title:"Search by IUPAC nucleotide codes: https://www.bioinformatics.org/sms/iupac.html",disableHoverListener:!0,disableFocusListener:!0,disableTouchListener:!0,open:D,PopperProps:{disablePortal:!0},onClose:O},{children:(0,r.jsx)(c.Z,h({size:"small",onClick:function(){I(!0)}},{children:(0,r.jsx)(u.KpA,{},void 0)}),void 0)}),void 0)},void 0)}),void 0)]}),void 0),value:w,onChange:function(e){E(e.currentTarget.value.toUpperCase(),x,-1,!1)}},void 0)}),void 0),(0,r.jsxs)("div",h({style:{paddingLeft:"8px"}},{children:[g+1,"/",j.length]}),void 0),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Z,h({size:"small",onClick:function(){if(0!==j.length){var e=g+1;e>=j.length&&(e=0),E(w,x,e,!0)}}},{children:(0,r.jsx)(d.IkZ,{},void 0)}),void 0),(0,r.jsx)(c.Z,h({size:"small",onClick:function(){if(0!==j.length){var e=g-1;e<0&&(e=j.length-1),E(w,x,e,!0)}}},{children:(0,r.jsx)(d.qL$,{},void 0)}),void 0)]},void 0)]}),void 0)},G=n(5686),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)},p=function(e){var t=e.children;return(0,r.jsx)("div",m({style:{paddingRight:"8px"}},{children:t}),void 0)},g=function(e){var t,n=e.selectedAnnotations,o=e.circularSelections,l=e.setCircularSelection,c=e.isCircularViewer,s=e.sequence,u=e.createAnnotation,f=e.onHide,T=e.onShow,h=e.onDelete,A=e.onCopySuccess,v=e.onCopyError,g=function(){v&&v()},y=function(){var e;if("Range"!==(null===(e=window.getSelection())||void 0===e?void 0:e.type)){var t=o.map((function(e){if(!1===e.antiClockwise)return e.start>e.end?s.slice(e.start)+s.slice(0,e.end+1):s.slice(e.start,e.end+1);if(!0===e.antiClockwise){var t=function(e){return e.split("").reverse().map((function(e){return(0,a.Rj)(e)})).join("")};return e.start<e.end?t(s.slice(e.end)+s.slice(0,e.start+1)):t(s.slice(e.end,e.start+1))}return""})).join("\n");""!==t&&navigator.permissions.query({name:"clipboard-write"}).then((function(e){"granted"==e.state||"prompt"==e.state?navigator.clipboard.writeText(t).then((function(){A&&A()}),(function(){g()})):g()})).catch((function(){g()}))}},b=i.useRef(!1),x=function(e){!b.current&&e.metaKey&&67===e.keyCode?(b.current=!0,y()):b.current=!1},S=function(e){return o.find((function(t){return t.antiClockwise!==e}))},k=i.useRef(x);k.current=x,i.useEffect((function(){var e=function(e){k.current(e)};return window.addEventListener("keydown",e,{passive:!0}),function(){window.removeEventListener("keydown",e)}}),[]),i.useEffect((function(){var e=function(){b.current=!1};return window.addEventListener("up",e),function(){window.removeEventListener("up",e)}}),[]);var w=void 0!==(null===(t=o[0])||void 0===t?void 0:t.antiClockwise);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p,{children:(0,r.jsx)(G.Z,m({disabled:!w,onClick:function(){var e=o[0].antiClockwise;if(S(e))alert("All selections must have the same direction when creating a new annotation");else{var t=o.map((function(e){return!0===e.antiClockwise?[e.end+1,e.start+1]:[e.start+1,e.end+1]}));u(t,e?a.fn.REVERSE:a.fn.FORWARD)}},color:"primary",size:"small"},{children:(0,r.jsx)(C.x06,{},void 0)}),void 0)},void 0),w&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p,{children:(0,r.jsx)(G.Z,m({onClick:function(){y()},size:"small"},{children:(0,r.jsx)(d.Dup,{},void 0)}),void 0)},void 0),(0,r.jsx)(p,{children:(0,r.jsx)(G.Z,m({size:"small",onClick:function(){f(n)}},{children:(0,r.jsx)(d.tgn,{},void 0)}),void 0)},void 0),(0,r.jsx)(p,{children:(0,r.jsx)(G.Z,m({size:"small",onClick:function(){T(n)}},{children:(0,r.jsx)(d.dSq,{},void 0)}),void 0)},void 0),c&&(0,r.jsx)(p,{children:(0,r.jsx)(G.Z,m({size:"small",onClick:function(){var e=o[0].antiClockwise;if(S(e))alert("All selections must have the same direction when using this feature");else{var t=o.length;0!==t&&l(void 0,o.sort((function(e,t){return e.start-t.start})).map((function(e,n,r){var i=e.antiClockwise?(n+1)%t:(n+t-1)%t,a=e.antiClockwise?-1:1,o=r[i].end+a;return m(m({},e),{start:e.start-a,end:o,antiClockwise:!e.antiClockwise})})))}}},{children:(0,r.jsx)(d.FxE,{},void 0)}),void 0)},void 0),(0,r.jsx)(p,{children:(0,r.jsx)(G.Z,m({size:"small",style:{backgroundColor:a.uF.accent4Light,color:a.uF.secondaryBackground},onClick:function(){h(n)}},{children:(0,r.jsx)(d.Xm5,{},void 0)}),void 0)},void 0)]},void 0)]},void 0)},y=n(9805),b=n(3467),x=function(){return x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},x.apply(this,arguments)},S=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},k=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},w=["A","C","G","T","phred"],R=function(e){return"phred"===e?"#1976d2":a.SD[e]},M=function(e){var t=e.base,n=e.checked;return(0,r.jsx)(y.Z,x({sx:{px:1.5,minWidth:"30px",border:"1px solid "+R(t),color:n?"white":R(t),backgroundColor:n?R(t):"rgba(0,0,0,0.01)",borderRadius:"40px",boxShadow:n?3:0,opacity:n?1:.75}},{children:t}),void 0)},P=function(e){var t=e.optionsToRender,n=e.setOptionsToRender,i=function(e,r){if(r)n(k(k([],S(t)),[e.target.value]));else{var i=t.filter((function(t){return t!==e.target.value}));n(i)}};return(0,r.jsx)(y.Z,x({sx:{display:"flex"}},{children:w.map((function(e){return(0,r.jsx)(b.Z,{sx:{px:.5},size:"small",icon:(0,r.jsx)(M,{base:e,checked:!1},void 0),checkedIcon:(0,r.jsx)(M,{base:e,checked:!0},void 0),onChange:i,value:e,checked:t.includes(e),name:e,disableRipple:!0},e)}))}),void 0)}},7019:function(e,t,n){n.d(t,{kC:function(){return a},$P:function(){return s},bc:function(){return T},QO:function(){return A}});var r=n(8927),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},a=function(e){var t=e.children,n=e.style,a=e.alignItems,o=e.justifyContent;return(0,r.jsx)("div",i({style:i({display:"flex",alignItems:a,justifyContent:o},n)},{children:t}),void 0)},o=n(8851),l=n(3048),c=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},s=function(){var e=c(o.useState(null),2),t=e[0],n=e[1],r=o.useCallback((function(e){e&&n(e)}),[]);return(0,l.bc)(t,r)},u=function(e,t,n,r,i,a,l){var c=o.useRef({onClick:t,onEndDrag:r,onMouseMove:a,onScroll:i,onStartDrag:n,onDblClick:l});c.current={onClick:t,onEndDrag:r,onMouseMove:a,onScroll:i,onStartDrag:n,onDblClick:l},o.useEffect((function(){var t=function(e){c.current.onEndDrag(e)};if(e){var n=function(e){c.current.onClick(e)},r=function(e){e.stopPropagation(),function(e){c.current.onStartDrag(e)}(e)},i=function(e){e.stopPropagation(),t(e)},a=function(e){t(e)},o=function(e){c.current.onScroll(e),e.preventDefault(),e.stopPropagation()},l=function(e){c.current.onMouseMove(e)},s=function(e){c.current.onDblClick(e)},u={passive:!0};return e.addEventListener("click",n,u),e.addEventListener("mousedown",r),window.addEventListener("mouseup",i),e.addEventListener("mouseup",i),window.addEventListener("mouseleave",a,u),e.addEventListener("mouseleave",a,u),e.addEventListener("wheel",o),e.addEventListener("mousemove",l,u),e.addEventListener("dblclick",s,u),function(){e.removeEventListener("click",n),e.removeEventListener("mousedown",r),window.removeEventListener("mouseup",i),e.removeEventListener("mouseup",i),window.removeEventListener("mouseleave",a),e.removeEventListener("mouseleave",a),e.removeEventListener("wheel",o),e.removeEventListener("mousemove",l),e.removeEventListener("dblclick",s)}}}),[e])},d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)},f=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},C=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},T=function(e){var t=e.isProtein,n=e.chromatogramData,i=e.clickedAnnotation,a=e.renderData,c=e.circularSelection,T=e.setCircularSelection,h=e.getCaretPosition,A=e.updateScroll,v=e.resetAngularScroll,G=e.zoomToSearchResult,m=e.draw,p=e.ref,g=e.width,y=e.height,b=e.sequence,x=e.allAnnotations,S=e.codons,k=e.Search,w=e.FilterChromatogram,R=e.openAnnotationDialog,M=e.isCircularView,P=b.length,E=f(o.useState([]),2),j=E[0],L=E[1],D=f((0,o.useState)(null),2),I=D[0],O=D[1],q=f(s(),2),F=q[0],N=q[1],Z=o.useMemo((function(){var e=new Set;return x.forEach((function(t){t.locations.forEach((function(n){c.forEach((function(r){(0,l.a$)([n[0]-1,n[1]-1],r)&&e.add(t.id)}))}))})),C([],f(e))}),[x,c]),W=o.useMemo((function(){return x.filter((function(e){return!e.hidden}))}),[x]),B=o.useMemo((function(){return(0,l.Oq)(W,P)}),[W,P]),z=f(o.useState(),2),V=z[0],H=z[1],U=f(o.useState(void 0),2),_=U[0],Y=U[1],X=f(o.useState(["A","C","G","T","phred"]),2),K=X[0],J=X[1];o.useEffect((function(){I&&Y((0,l.Dc)(I).ratio)}),[I]);var Q=void 0!==_&&I&&a.current?{context:I,ratio:_,data:a.current}:void 0,$=o.useRef(!1),ee=function(){if(Q){$.current=!0;var e=m({codons:S,annotationLevels:B,c:Q.context,w:g,h:y,ratio:Q.ratio,data:Q.data,sequence:b,circularSelection:c,searchResults:j,renderStateRef:{hoveringFeature:V,clickedFeatures:Z},isProtein:t,filterChromOptions:K,chromatogramData:n}).hoveringFeature;H(e)}},te=function(e,t){if(e){var n=W.filter((function(t){return t.id===e})).flatMap((function(e){var t=e.direction===l.fn.REVERSE;return e.locations.map((function(e){var n={start:e[t?1:0]-1,end:e[t?0:1]-1};return d({state:"selected",antiClockwise:t},n)}))}));a.current&&v&&v(),T(e,t?C(C([],f(c)),f(n)):n)}};p&&("current"in p?p.current={onClickAnnotation:te}:p({onClickAnnotation:te}));var ne=o.useRef(void 0),re=(0,l.Ds)((function(e){e.preventDefault(),A(e.deltaX,e.deltaY,e.offsetX,e.offsetY,e.shiftKey),ee()})),ie=!!c.find((function(e){return"selecting"===e.state})),ae=function(e){if(!ie)if(V)ne.current=V;else if(ne.current=void 0,a.current){var t=h(),n=C([],f(c));e.metaKey||e.shiftKey||n.splice(0,n.length);var r=(0,l.IW)(t,n);r?(r.state="selecting",r.start===r.end&&n.splice(n.indexOf(r),1)):n.push({state:"selecting",start:t,end:t,antiClockwise:void 0}),T(void 0,n),v&&v(),ee()}},oe=function(e){if(V&&V===ne.current)return te(V,e.metaKey),void(ne.current=void 0);ne.current=void 0,ie&&T(void 0,c.map((function(e){return d(d({},e),{state:"selected"})}))),ee()},le=o.useRef(!1);le.current=!1;var ce=(0,l.Ds)((function(e){if(!V&&ne.current&&(ne.current=void 0),1===e.buttons&&!ie&&void 0===ne.current&&!1===le.current)return le.current=!0,void ae(e);if(0===e.buttons&&ie&&void 0===ne.current&&!1===le.current)return le.current=!0,void oe(e);var t=a.current;if(t){t.mouseX=e.offsetX,t.mouseY=e.offsetY;var n=h();if(1===e.buttons){var r=C([],f(c)),i=r.find((function(e){return"selecting"===e.state}));if(i){void 0===i.antiClockwise?i.start!==n&&(i.antiClockwise=n<i.start):i.start===n&&(i.antiClockwise=void 0),void 0!==i.antiClockwise&&(0,l.Ax)(P,i.antiClockwise,i.start,n)-(0,l.Ax)(P,i.antiClockwise,i.start,i.end)>.5&&(i.antiClockwise=!i.antiClockwise),i.end=n;var o=r.filter((function(e){return e!==i&&((0,l.cd)(e.start,i)||(0,l.cd)(e.end,i))}));o.length>0&&o.forEach((function(e){r.splice(r.indexOf(e),1)})),T(void 0,r)}}ee()}}));u(F,(function(e){var t;if(e.shiftKey){var n=null===(t=c[0])||void 0===t?void 0:t.start,r=h();void 0!==n&&T(void 0,[{start:n,end:r,antiClockwise:function(){if(n!==r)return M?n>r?n-r<P/2:r-n>P/2:n>r}(),state:"selecting"}])}}),ae,oe,re,ce,(function(e){i&&R&&R(i)}));var se=o.useRef(ee);se.current=ee,(0,o.useEffect)((function(){F&&((0,l.IS)(F,g,y),O(F.getContext("2d")))}),[F,y,O,g]),(0,o.useEffect)((function(){Q&&!$.current&&se.current()}),[Q]),o.useEffect((function(){se.current()}),[c,x,g,y,t,i,b,S,j,K]),o.useLayoutEffect((function(){se.current()}),[c,x,g,y,t,i,b,S,j]);var ue=(0,r.jsx)("canvas",{ref:N},void 0),de=function(e,t){G(e,t),T(void 0,[{state:"selected",start:e.complement?e.end-1:e.start,end:e.complement?e.start:e.end-1,antiClockwise:e.complement}]),se.current()},fe=k&&(0,r.jsx)(k,{isProtein:t,sequence:b,zoomOnResult:function(e){de(e,!0)},onSearchResults:function(e){L(e)},spinOnResult:function(e){de(e,!1)}},void 0),Ce=n&&w&&(0,r.jsx)(w,{optionsToRender:K,setOptionsToRender:function(e){return J(e)}},void 0);return{canvas:ue,selectedAnnotations:Z,circularSelection:c,setCircularSelection:T,clickedAnnotation:i,search:fe,filterChromatogram:Ce,canvasRef:N,zoomToSearchResult:G,setSearchResults:L,render:ee}},h=function(e,t,n){var r=(e-96)/(t*(n?l.ci:l.Jn));return(0,l.h9)((0,l.ee)(48,0),(0,l.Wi)(r))},A=function(e,t,n){var r=o.useRef(null);return!r.current&&e&&(r.current={mouseX:0,mouseY:0,matrix:h(e,t.length,n),circluarCamera:{angleOffset:0,scrollOffsetZoomed:0,scrollOffsetZooming:0,value:{zoom:0,angle:0,radius:0},target:{zoom:1,angle:1,radius:1}}}),r}},8064:function(e,t,n){n.d(t,{Gk:function(){return a},Es:function(){return C},Ej:function(){return u},TC:function(){return s},QJ:function(){return o}});var r=n(3048),i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.reduce((function(e,t){return e+t}),0),r=n%(2*Math.PI);return r<0?2*Math.PI+r:r},a=function(e,t){e.zoom=Math.min(Math.max(e.zoom,0),t.zoom),e.angle=Math.min(Math.max(e.angle,0),t.angle),e.radius=Math.min(Math.max(e.radius,0),t.radius)},o=function(e,t,n){0!==e&&(e>0?t.angle<n.angle||t.zoom<n.zoom?(t.angle+=25*e,t.zoom+=7*e):t.radius+=7*e:t.radius>0?t.radius+=7*e:t.zoom+=7*e,a(t,n))},l=function(e){return 32*e/(2*Math.PI)},c=function(e,t,n){var r=Math.min(e,t)/2*.5,i=Math.min(e,t)/12;return i+(r-i)*n},s=function(e,t,n,r,i){var a=l(n),o=function(e,t,n){var r=n.end,i=n.start,a=l(e);return Math.min(t/(2*Math.sin(Math.PI*Math.min(r-i+2,e/2)/e)),a)}(n,e,i),s=c(e,t,r);return(o-s)/(a-s)},u=function(e){var t=e.w,n=e.h,a=e.data,o=e.sequence,s=e.circularSelection,u=n/2,d=t/2,f=o.length,C=f-1,T=l(f),h=function(e,t){return Math.min(e,t)/8}(t,n),A=c(t,n,a.circluarCamera.value.zoom),v=a.circluarCamera.value.radius*(T-A)+A,G=Math.max(v,h),m=function(e,t){return Math.max(Math.min(e*t,t),0)}(a.circluarCamera.value.radius,T),p=u+m,g=2*Math.PI/f,y=s[s.length-1]||{state:"selected",start:0,end:0,antiClockwise:void 0},b=y.start,x=y.end,S=y.antiClockwise,k=(0,r.R7)(b,x,f,S),w=i(a.circluarCamera.angleOffset,a.circluarCamera.scrollOffsetZooming),R=k*g,M=a.circluarCamera.value.angle,P=i(w,R),E=i(2*Math.PI,-P),j=0;j=P<=Math.PI?i(w,-P*M):i(w,E*M),j=i(j,a.circluarCamera.scrollOffsetZoomed);var L=a.mouseY-p,D=a.mouseX-d,I=Math.sqrt(Math.pow(D,2)+Math.pow(L,2)),O=Math.atan2(L,D),q=function(e,t,n,r){var i=t-r,a=e-n,o=Math.abs(Math.atan(i/a));return i<=0&&a>=0?Math.PI/2-o:i>0&&a>=0?o+Math.PI/2:i>0&&a<0?Math.PI-o+Math.PI/2:o+Math.PI/2+Math.PI}(d+G*Math.cos(O),p+G*Math.sin(O),d,p),F=Math.floor((q+g/2-j)/g);return F>=f?F%=f:F<0&&(F=(Math.ceil(Math.abs(F)/f)*f+F)%f),{circleY:p,angleDelta:g,angleOffset:j,radius:G,len:o.length,iLen:C,mouseAngle:q,hoveringCaretPosition:F,mouseRadius:I}},d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)},f=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},C=function(e){var t=e.c,n=e.w,i=e.h,a=e.ratio,o=e.data,l=e.sequence,c=e.circularSelection,s=e.searchResults,C=e.annotationLevels,T=e.renderStateRef,h=e.codons;t.save(),t.resetTransform(),t.scale(a,a),t.clearRect(0,0,n,i);var A=n/2,v=o.circluarCamera.value,G=v.zoom,m=v.radius,p=-Math.PI/2,g=u({data:o,sequence:l,w:n,h:i,circularSelection:c}),y=g.circleY,b=g.angleDelta,x=g.angleOffset,S=g.radius,k=g.len,w=g.iLen,R=g.mouseAngle,M=g.hoveringCaretPosition,P=g.mouseRadius,E=function(e,t){var n=A+e*Math.cos(t+p),i=y+e*Math.sin(t+p);return(0,r.bc)(n,i)},j=function(e,n,r,i){void 0===i&&(i="center");var a=t.measureText(e).width;if(e.length<3||e.length>100){var o=t.getTransform(),l=f(E(n,r),2),c=l[0],s=l[1],u=-a/2;"left"===i?u=0:"right"===i&&(u=a),t.translate(c,s),t.rotate(r),t.fillText(e,u,0),t.setTransform(o)}else{var d=a/n,C=r-d/2;"left"===i?C=r-d:"right"===i&&(C=r);for(var T=0;T<e.length;T+=1){var h=C+(0===T?0:t.measureText(e.slice(0,T)).width/a)*d,A=f(E(n,h),2);c=A[0],s=A[1],o=t.getTransform();t.translate(c,s),t.rotate(h),t.fillText(e[T],0,0),t.setTransform(o)}}},L=Math.max(Math.min(2*S*Math.PI/k,16),0),D=L>4?L:4,I=function(e){return{a0:e*b+x-b/2,a1:e*b+x+b/2,aMid:e*b+x}},O=function(e){var n=e.i,i=e.radius,a=e.complement,o=e.base||l[n],c=I(n).aMid,s=a?(0,r.Rj)(o):o;t.font=(0,r.qT)(L,"bold");var u=(0,r.B6)(s);t.fillStyle=u,t.textBaseline="top",j(s,i,c)},q=function(e,n){var i=I(e),a=i.a0,o=i.a1,s=i.aMid,u=(0,r.IW)(e,c);u&&function(r){var i=1.4*D;if(n&&(i=2.5*D),t.lineWidth=3,t.strokeStyle="black",t.beginPath(),t.arc(A,y,S-i,a+p,o+p,!1),t.stroke(),t.closePath(),e===r.end&&void 0!==r.antiClockwise){if(t.beginPath(),!0===r.antiClockwise){var l=f(E(S-i-D/2,a),2),c=l[0],s=l[1],u=f(E(S-i,a-D/(2*S)),2),d=u[0],C=u[1],T=f(E(S-i+D/2,a),2),h=T[0],v=T[1];t.moveTo(c,s),t.lineTo(d,C),t.lineTo(h,v)}if(!1===r.antiClockwise){var G=f(E(S-i-D/2,o),2),m=(c=G[0],s=G[1],f(E(S-i,o+D/(2*S)),2)),g=(d=m[0],C=m[1],f(E(S-i+D/2,o),2));h=g[0],v=g[1],t.moveTo(c,s),t.lineTo(d,C),t.lineTo(h,v)}t.closePath(),t.fillStyle="black",t.fill()}}(u);var d,C=Math.floor(k/4);G>.25&&(C=Math.floor(k/8)),m>0&&(C=Math.floor(k/16)),0===e%C&&(e+C/2)%k>=C/2&&(d=function(e,t,n){var i=f(E(e,n),2),a=i[0],o=i[1],l=f(E(t,n),2),c=l[0],s=l[1];return(0,r.bc)(a,o,c,s)}(S+2,S+8,s),t.lineWidth=1,t.beginPath(),t.moveTo(d[0],d[1]),t.lineTo(d[2],d[3]),t.closePath(),t.strokeStyle="black",t.stroke(),t.font=(0,r.qT)(16,"normal"),t.fillStyle="black",t.textBaseline="bottom",j(String(e+1),S+8,s));var T=function(n){var i=0;if(n&&(i=1.25*D),L>4)O({i:e,radius:S-2-i,complement:n});else{var c=f(E(S-i,a),2),s=c[0],u=c[1],d=f(E(S-i,o),2),C=d[0],T=d[1],h=f(E(S-i-4,o),2),A=h[0],v=h[1],G=f(E(S-i-4,a),2),m=G[0],p=G[1];t.strokeStyle="black",t.lineWidth=1,t.beginPath(),t.moveTo(s,u),t.lineTo(C,T),t.lineTo(A,v),t.lineTo(m,p),t.closePath();var g=(0,r.B6)(n?(0,r.Rj)(l[e]):l[e]);t.fillStyle=g,t.fill()}};T(!1),n&&T(!0)};L>4&&c.forEach((function(e){var n=e.end,i=e.start,a=e.antiClockwise,o=(0,r.R7)(i,n,k,a)*b+x,c=(0,r.GQ)(e,!1,l.length);t.font=(0,r.qT)(L,"bold"),t.fillStyle="black",t.textBaseline="top";var s=2*D;a&&(s=3*D),j(c,S-s-16,o)}));var F,N=[],Z=function(e){return L>5&&e.displayAsSequence},W=S+36;C.forEach((function(e,i){var a=0;e.forEach((function(e){var t=Z(e)?L:14;a=Math.max(a,t)}));var o=W;W+=a+4,e.forEach((function(e){var i=e.locations;if(i.length>1){var l=i[0][0]-1,c=i[i.length-1][1],s=l*b+x+p-b/2,u=c*b+x+p-b/2;t.beginPath(),t.arc(A,y,o+a/2,s,u,e.direction===r.fn.REVERSE),t.lineWidth=1,t.strokeStyle="black",t.stroke(),t.closePath()}i.forEach((function(i){var l=String(e.displayLabel||e.label),c=i[0],s=i[1],u=c-1,C=s,h=u*b+x,v=C*b+x,G="normal",m=o+a;P<=m&&P>=o&&function(e,t,n,r){return n>t&&!1===r?e>=t&&e<=n:n<t&&!1===r?e>=t||e<=n:n<t&&!0===r?e>=n&&e<=t:n>t&&!0===r?e>=n||e<=t:e>=t&&e<=n}(M,Math.min(u,C),Math.max(u,C),C<u)&&(G="hovering",F=e.id),T.clickedFeatures.includes(e.id)&&(G="clicked");var g=e.color,w="rgb(0, 0, 0, 0.25)";"hovering"!==G&&"clicked"!==G||(w="rgb(0, 0, 0)"),t.save(),t.fillStyle=g,t.strokeStyle=w,t.lineWidth=1,t.beginPath();var R=p-b/2,L=(0,r.Ax)(k,!1,u,C)*m*Math.PI*2;if(e.direction===r.fn.FORWARD||e.direction===r.fn.REVERSE){var W=.2*Math.abs(C-u)*b,B=Math.min(Math.min(8/m,W),.1*L),z=Math.min(Math.min(8/o,W),.1*L);if(L<16&&(B=0,z=0),e.direction===r.fn.FORWARD){if(t.arc(A,y,m,h+R,v+R-B,!1),L>=16){var V=f(E(o+a/2,v-b/2),2),H=V[0],U=V[1];t.lineTo(H,U)}t.arc(A,y,o,v+R-z,h+R,!0)}else{var _=f(E(o+a/2,h-b/2),2);H=_[0],U=_[1];t.moveTo(H,U),t.arc(A,y,m,h+R+B,v+R,!1),t.arc(A,y,o,v+R,h+R+z,!0)}}else t.arc(A,y,m,h+R,v+R,!1),t.arc(A,y,o,v+R,h+R,!0);t.closePath(),Z(e)?(t.fillStyle="white",t.fill(),t.fillStyle=g):t.fill(),t.stroke(),t.clip();var Y=(0,r.uu)(g);t.fillStyle=Y;var X=(0,r.R7)(Math.min(u,C),Math.max(u,C),k,C<u)*b,K=2*m<n?2*Math.PI:2*Math.PI*Math.asin(Math.min(n/(2*m),1))/Math.PI,J=(2*Math.PI-x)%(2*Math.PI)/(2*Math.PI)*Math.PI*2,Q=2*Math.PI,$=(J-K/2+Q+b)%Q,ee=(J+K/2+Q)%Q;!Z(e)&&L>=16&&function(e){void 0===e&&(e=!1);var n=t.measureText(l).width/(m-a/2),i=X;if(e){var o=X,c=$,s=ee;$>Math.PI&&ee>Math.PI&&X<Math.PI?o=X+2*Math.PI:$<Math.PI&&ee<Math.PI&&X<Math.PI||($<Math.PI&&ee<Math.PI&&X>Math.PI?o=X-2*Math.PI:$>Math.PI&&ee>Math.PI&&X>Math.PI||($>Math.PI&&ee<Math.PI&&X<Math.PI?c=$-2*Math.PI:$>Math.PI&&ee<Math.PI&&X>Math.PI&&(s=ee+2*Math.PI))),o-n/2<c?i=$+n/2:o+n/2>s&&(i=ee-n/2)}t.font=(0,r.qT)(12,"bold"),t.textBaseline="middle",j(l,m-a/2,i+x-b/2)}(S>n/2),t.restore();var te=(m+o)/2+D/2;Z(e)&&function(e){var t=e.startIndex,n=e.endIndex,i=e.sequence,a=i?{sequence:i,onRenderBase:function(e,t){O({i:e,radius:te,base:t})}}:{onRenderBase:function(e){O({i:e,radius:te})}};(0,r.XA)(d({len:k,startIndex:t,endIndex:n},a))}({startIndex:i[0]-1,endIndex:i[1]-1});var ne=e.rightTag;if(ne&&(t.fillStyle="black",t.font=(0,r.qT)(12,"bold"),t.textBaseline="middle",j(String(ne),m-a/2,v+R+Math.PI/2,"right")),(0,r.UG)(e,i,k,(function(e,t){O({i:e,radius:te,base:t})})),"DNA_RE_NUC"===e.type){var re=e.direction===r.fn.REVERSE,ie=e.cleavageSites,ae=ie[0],oe=ie[ie.length-1],le=ae[1],ce=oe[1];1===ie.length&&(le=ae[0],ce=ae[1]);var se=[re?C-le:u+le,re?C-ce:u+ce].sort((function(e,t){return e-t}));N.push(se);for(var ue=se[0];ue<se[1];ue+=1){var de=ue;de<0&&(de=k+ue),q(de,!0)}ie.forEach((function(e){var n=f(e,2),r=n[0],i=n[1],a=I(re?C-i:u+r),o=a.a0;a.a1;if(t.strokeStyle="hovering"===G||"clicked"===G?"red":"black",t.lineWidth=3,t.beginPath(),r>i){var l=f(E(S,o),2),c=l[0],s=l[1];t.lineTo(c,s);var d=f(E(S-D,o),2),T=d[0],h=d[1];t.lineTo(T,h)}else{var v=f(E(S,o),2);c=v[0],s=v[1];t.lineTo(c,s);var m=f(E(S-D,o),2);T=m[0],h=m[1];t.lineTo(T,h)}var g=I(re?C-r:u+i).a0;if(t.arc(A,y,S-1.125*D-1.5,o+p,g+p,r>i),r>i){var b=f(E(S-2.5*D,g),2),x=b[0],k=b[1];t.lineTo(x,k)}else{var w=f(E(S-2.5*D,g),2);x=w[0],k=w[1];t.lineTo(x,k)}t.strokeStyle="hovering"===G||"clicked"===G?"red":"black",t.stroke(),t.closePath()}))}}))}))})),T.hoveringFeature=F,s.length>0&&s.forEach((function(e){var n=e.start,i=e.end,a=n*b+x+p-b/2,o=i*b+x+p-b/2,l=0,c=S*(0,r.Ax)(k,!1,n,i)*Math.PI*2;if(c<8){var s=(8-c)/2/S;a-=s,o+=s}if(e.complement){for(var u=n;u<i;u+=1)q(u,!0);l=1.2*-D}t.beginPath(),t.arc(A,y,S+l,a,o,!1),t.arc(A,y,S-Math.max(8,1.2*D)+l,o,a,!0),t.closePath();var d=Math.min(Math.max(1-G,.4),.8);t.fillStyle="rgba(255,151,0, "+d+")",e.active&&(t.fillStyle="rgba(0, 0, 255, "+d+")"),t.fill()}));var B=Math.floor(n/4),z=Math.ceil(B/k),V="",H=function(e,n){if(3===(V+=n.antiClockwise?(0,r.Rj)(l[e]):l[e]).length){var i=e+(n.antiClockwise?1:-1);-1===i&&(i=w),function(e,n,i){if(!(L<=4)){t.lineWidth=1;var a=h[n]||"X",o=(0,r.su)(a),l=I(e-1).a0,c=I(e+1).a1,s=S-(i?2.6:-1.5)*D;t.beginPath();var u=p;t.arc(A,y,s,l+u,c+u,!1),t.arc(A,y,s-D,c+u,l+u,!0),t.closePath(),t.fillStyle=o,t.strokeStyle="black",t.fill(),t.stroke(),t.font=(0,r.qT)(L,"bold"),t.fillStyle=(0,r.nU)(a)?"#c8d9fa":"#282c34",t.textBaseline="top";var d=I(e).aMid;L>4&&j(a,s,d)}}(i,V,!!n.antiClockwise),V=""}};if(2*S*Math.PI/k>4)for(var U=M+B,_=M-B;_<U;_+=1){var Y=(_+k*z)%k,X=(0,r.IW)(Y,c);q(Y,!0===(null==X?void 0:X.antiClockwise))}else for(_=0;_<k;_+=1){X=(0,r.IW)(_,c);q(_,!0===(null==X?void 0:X.antiClockwise))}c.forEach((function(e){if(V="",(0,r.Wk)(e))if(e.antiClockwise){for(var t=e.start;t>=0;t-=1)H(t,e);for(t=w;t>=e.end;t-=1)H(t,e)}else{for(t=e.start;t<k;t+=1)H(t,e);for(t=0;t<=e.end;t+=1)H(t,e)}else if(e.antiClockwise)for(t=e.start;t>=e.end;t-=1)H(t,e);else for(t=e.start;t<=e.end;t+=1)H(t,e)}));var K=0,J=!1,Q=!1,$=!1,ee=c.find((function(e){return"selecting"===e.state})),te=(0,r.IW)(M,c);"selecting"===(null==ee?void 0:ee.state)&&(ee.antiClockwise&&(J=!0,$=!0),Math.abs(ee.start-ee.end)>=2&&(Q=!0)),te&&(Math.abs(te.start-te.end)>=2&&(Q=!0),te.antiClockwise&&(J=!0,$=!0)),N.some((function(e){var t=f(e,2),n=t[0],i=t[1];return(0,r.cd)(M,{start:n,end:i,antiClockwise:!1})}));var ne=1.2;return Q&&$&&(ne=2.7),J&&(K+=1.4*D),function(e,n,i){var a=f(E(e,R),2),o=a[0],l=a[1],c=f(E(n,R),2),s=c[0],u=c[1];t.strokeStyle="rgba(0, 0, 0, 0.5)",t.lineWidth=3,t.beginPath(),t.moveTo(o-1.5,l),t.lineTo(s-1.5,u),t.stroke(),t.closePath(),t.font=(0,r.qT)(16,"bold"),t.fillStyle="black",t.textBaseline="top",j(String(M+1),i,R-1.5/i,"center")}(S-K,S-K-1.125*D,S-K-D*ne),t.restore(),T}},442:function(e,t,n){n.d(t,{Ih:function(){return C},H:function(){return a},DC:function(){return o}});var r=n(3048),i=function(e,t){return e?r.J$[t].color:r.SD[t]},a=function(e){var t=e.a,n=e.b,r=e.c,i=e.d,a=e.e,o=e.f;return{a:-i/(r*n-t*i),b:n/(r*n-t*i),c:r/(r*n-t*i),d:-t/(r*n-t*i),e:(a*i-r*o)/(r*n-t*i),f:-(a*n-t*o)/(r*n-t*i)}},o=function(e,t,n){return{x:n.a*e+n.c*t+n.e,y:n.b*e+n.d*t+n.f}},l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},c=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},s=64,u=function(e){var t,n=[];return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return r.every((function(e,t){return e===n[t]}))||(t=e.apply(void 0,c([],l(r))),n=r),t}},d=u((function(e){for(var t=[],n=0;n<=e.length;n++){for(var i=n>0?e[n]-e[n-1]:e[n],a=0;a<i;a++){var o=n+a/i;t.push((0,r.bc)(o,n))}n===e.length&&t.push((0,r.bc)(n,n))}return t})),f=u((function(e){var t=Math.max.apply(Math,c([],l(e.phred))),n=t-Math.sqrt(t),r=function(t){return e.peakLocations.map((function(e){return t[e]})).filter((function(t,r){var i=e.phred;if(r>4||r<i.length-4){for(var a=0,o=r-4;o<r+4;o++)a+=i[o];return a/8>n}return!1}))},i=function(t){return e.peakLocations.map((function(e){return t[e]})).filter((function(t,n){var r=e.phred;return n>r.length/3&&n<2*r.length/3}))},a=c(c(c(c([],l(r(e.aTrace))),l(r(e.cTrace))),l(r(e.gTrace))),l(r(e.tTrace))),o=c(c(c(c([],l(i(e.aTrace))),l(i(e.cTrace))),l(i(e.gTrace))),l(i(e.tTrace)));return a.length>0?Math.max.apply(Math,c([],l(a))):Math.max.apply(Math,c([],l(o)))})),C=function(e){var t=e.c,n=e.w,u=e.h,C=e.ratio,T=e.sequence,h=e.annotationLevels,A=e.data,v=e.renderStateRef,G=e.searchResults,m=e.filterChromOptions,p=e.isProtein,g=e.chromatogramData,y=e.circularSelection,b=e.codons,x=T.length,S=x-1,k=p?r.ci:r.Jn;t.save(),t.resetTransform(),t.scale(C,C),t.clearRect(0,0,n,u),t.fillStyle="white",t.fillRect(0,0,n,u);var w=A.matrix,R=a(A.matrix),M=Math.max(Math.min(Math.floor(o(0,0,R).x/k),S),0),P=Math.max(Math.min(Math.floor(o(n,0,R).x/k),x),1),E=(o(n/2,0,R).x,o(0,0,R).x),j=o(n,0,R).x,L=o(A.mouseX,A.mouseY,R),D=L.x,I=L.y;t.save();var O=function(e){return e*w.a+w.e},q=function(e){return e+w.f},F=function(e,n,r,i,a){var o=t.measureText(e).width,l=n;"center"===a?l-=o/2/w.a:"end"===a&&(l-=o/w.a);var c=r;t.textBaseline="center"===i?"middle":"start"===i?"hanging":"bottom",t.fillText(e,O(l),q(c))},N=function(e){return e*k+0},Z=0,W=24;if(p){for(var B=(0,r.bc)(4,48,200),z=(0,r.bc)(24,80,200),V=0;V<2;V+=1)z[Z]*w.a<=z[Z]-B[Z]&&(Z+=1);W=z[Z]*w.a,2===Z&&W<20&&(Z+=1),3===Z&&(W=Math.max(6,W))}else(W=24*w.a)<=6&&(Z=3),3===Z&&(W=6);var H=function(e){var n=e.i,r=e.phred,i=e.yMax,a=N(n);if(m.includes("phred")){var o=s+W-w.f,l=54*(1-r/i)-54;t.lineWidth=1,t.strokeStyle="rgba(0, 0, 0, 0.075)",t.strokeRect(O(a),q(o),k*w.a,l)}},U=function(e){var n=e.base,r=e.iInterpol,a=e.iNext,o=e.value,l=e.nextValue,c=e.top,s=e.yMax,u=W+5,d=function(e){return N(e)-k/2},f=function(e){return(c-u)*(1-e/s)-w.f},C=i(p,n);t.lineWidth=1,t.strokeStyle=C,t.beginPath(),t.moveTo(O(d(r)),q(f(o))),t.lineTo(O(d(a)),q(f(l))),t.stroke()},_=function(e){var n=e.base,a=e.i,o=e.top,l=e.align,c=void 0===l?"start":l,s=N(a),u=i(p,n);if(t.fillStyle=u,t.textBaseline="bottom",3===Z)t.lineWidth=1,t.strokeStyle="rgba(0, 0, 0, "+Math.min(1,Math.max(k*w.a-2,0))+")",t.fillRect(O(s),q(o),k*w.a,W),t.strokeRect(O(s),q(o),k*w.a,W);else{var d=function(e,t,n){return t?0===e?r.J$[n].name:1===e?r.J$[n].threeLettersName:n:n}(Z,p,n);t.font=(0,r.qT)(W,"bold"),F(d,s+k/2,o,c,"center")}},Y=[],X=s+4*W+16;h.forEach((function(e,n){var i=X+24*n+3+3;p&&(i=s+W+3+3+24*n+16+16),e.forEach((function(e,n){var a="normal",o=e.displayAsSequence&&Z<3,u=o?W:20;if(e.locations.length>1){var d=Math.min.apply(Math,c([],l(e.locations.map((function(e){return e[0]}))))),f=Math.max.apply(Math,c([],l(e.locations.map((function(e){return e[1]})))));if((0,r.Wk)({start:e.locations[0][0],end:e.locations[e.locations.length-1][1],antiClockwise:e.direction===r.fn.REVERSE,state:"selected"})){t.lineWidth=1,t.strokeStyle="black";var C=function(e,n){t.lineTo(O(e+-15/w.a+2*n/w.a),q(i+u/2+2*(n%2==0?-1:1)))},h=function(e,n){var r="forward"===n?0:7;if(t.moveTo(O(e+-15/w.a+2*r/w.a),q(i+u/2+2*(r%2==0?-1:1))),"forward"===n)for(var a=1;a<=7;a+=1)C(e,a);else for(var o=6;o>=0;o-=1)C(e,o)};t.beginPath(),h(0,"forward"),t.lineTo(O(0),q(i+u/2)),t.lineTo(O(d*k),q(i+u/2)),t.stroke(),t.closePath(),t.beginPath(),h(x*k+17,"reverse"),t.lineTo(O(x*k),q(i+u/2)),t.lineTo(O(f*k),q(i+u/2)),t.stroke(),t.closePath()}else t.beginPath(),t.moveTo(O(d*k),q(i+u/2)),t.lineTo(O(f*k),q(i+u/2)),t.lineWidth=1,t.strokeStyle="black",t.stroke(),t.closePath()}e.locations.forEach((function(n){var c=[{loc:n}];(0,r.d1)(n,e.direction)&&(c=[{loc:(0,r.bc)(n[0],x),type:e.direction===r.fn.FORWARD?"tail":"head"},{loc:(0,r.bc)(1,n[1]),type:e.direction===r.fn.REVERSE?"tail":"head"}]),c.forEach((function(n){var c=n.loc,d=n.type,f=(c[0]-1)*k+0,C=(Math.abs(c[1]-c[0])+1)*k,h=f,A=f+C,G=i,m=i+u;D>=f&&D<=f+C&&I>=i&&I<=i+u?(v.hoveringFeature=e.id,a="hovering"):v.hoveringFeature===e.id&&(v.hoveringFeature=void 0),v.clickedFeatures.includes(e.id)&&(a="clicked");var p=8/w.a>=C?0:8/w.a,g=function(e){for(var n=1;n<=6;n+=1)t.lineTo(O(("right"===e?A:h)+("right"===e?-1:1)*(n%2==1?4/w.a:0)),q(m-n*u/6))},y=function(e,n){t.strokeStyle="rgba(100, 100, 100, 1)";var r="left"===e?h:A,i="left"===n?-1:1;e+n==="leftright"?r-=36/w.a:e+n==="rightleft"&&(r+=36/w.a),t.lineWidth=1,t.beginPath(),t.moveTo(O(r+i*(8/w.a)),q(G+1*u/4)),t.lineTo(O(r+i*(8/w.a)),q(m-1*u/4)),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(O(r+i*(8/w.a)),q(m-1*u/4)),t.lineTo(O(r+i*(24/w.a)),q(m-1*u/4)),t.lineWidth=1,t.stroke(),t.closePath(),t.beginPath(),t.moveTo(O(r+i*(24/w.a)),q(m-1*u/4)),t.lineTo(O(r+i*(24/w.a)),q(m-1*u/4+1*u/6)),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(O(r+i*(24/w.a)),q(m-1*u/4+1*u/6)),t.lineTo(O(r+i*(32/w.a)),q(m-u/2)),t.lineTo(O(r+i*(24/w.a)),q(G+1*u/4-1*u/6)),t.lineWidth=1,t.stroke(),t.closePath(),t.beginPath(),t.moveTo(O(r+i*(24/w.a)),q(G+1*u/4-1*u/6)),t.lineTo(O(r+i*(24/w.a)),q(G+1*u/4)),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(O(r+i*(24/w.a)),q(G+1*u/4)),t.lineTo(O(r+i*(8/w.a)),q(G+1*u/4)),t.lineWidth=1,t.stroke(),t.closePath()};if("tail"===d?e.direction===r.fn.REVERSE?(y("left","left"),t.beginPath(),t.moveTo(O(A),q(G)),t.lineTo(O(A),q(m)),t.lineTo(O(h),q(m)),g("left"),t.closePath()):(y("right","right"),t.beginPath(),t.moveTo(O(h),q(G)),t.lineTo(O(h),q(m)),t.lineTo(O(A),q(m)),g("right"),t.lineTo(O(A),q(G)),t.closePath()):"head"===d?e.direction===r.fn.FORWARD?(y("left","right"),t.beginPath(),t.moveTo(O(h),q(G)),t.lineTo(O(A-p),q(G)),t.lineTo(O(A),q(G+u/2)),t.lineTo(O(A-p),q(m)),t.lineTo(O(h),q(m)),g("left"),t.closePath()):e.direction===r.fn.REVERSE&&(y("right","left"),t.beginPath(),t.moveTo(O(h+p),q(G)),t.lineTo(O(h),q(G+u/2)),t.lineTo(O(h+p),q(m)),t.lineTo(O(A),q(m)),g("right"),t.closePath()):void 0===e.direction||e.direction===r.fn.NOT_DEFINED?(t.beginPath(),t.moveTo(O(h),q(G)),t.lineTo(O(h),q(m)),t.lineTo(O(A),q(m)),t.lineTo(O(A),q(G)),t.closePath()):e.direction===r.fn.FORWARD?(t.beginPath(),t.moveTo(O(h),q(G)),t.lineTo(O(A-p),q(G)),t.lineTo(O(A),q(G+u/2)),t.lineTo(O(A-p),q(m)),t.lineTo(O(h),q(m)),t.closePath()):e.direction===r.fn.REVERSE&&(t.beginPath(),t.moveTo(O(h+p),q(G)),t.lineTo(O(h),q(G+u/2)),t.lineTo(O(h+p),q(m)),t.lineTo(O(A),q(m)),t.lineTo(O(A),q(G)),t.closePath()),o?(t.fillStyle="white",t.fill()):(t.fillStyle=e.color,t.fill()),t.lineWidth=1,t.strokeStyle="rgba(100, 100, 100, 1)",t.stroke(),t.save(),t.clip(),"hovering"!==a&&"clicked"!==a||(t.strokeStyle="black",t.stroke()),o)for(var b=c[0]-1;b<c[1];b+=1)_({base:T[b],i:b,top:i});else{var S=String(e.displayLabel||e.label);t.font=(0,r.qT)(12,"bold");var R=function(e){return t.measureText(e).width}(S),M=(0,r.uu)(e.color);t.fillStyle=M,R/w.a>C-4/w.a?F(S,f+2,i+u/2,"center","start"):F(S,Math.min(Math.max(f+C/2,E+8/w.a+R/w.a/2),j-8/w.a-R/w.a/2),i+u/2,"center","center")}t.restore();var P=e.rightTag;if(P&&(t.fillStyle="black",F(String(P),f+C+4/w.a,i+u/2,"center","start")),(0,r.UG)(e,c,x,(function(e,t){_({base:t,i:e,top:i+(u-W)/2,align:"start"})})),"DNA_RE_NUC"===e.type){var L=e.direction===r.fn.REVERSE,N=c[0],Z=c[1],B=N-1,z=Z,V=e.cleavageSites,H=V[0],U=V[V.length-1],X=H[1],K=U[1];1===V.length&&(X=H[0],K=H[1]);var J=L?z-X:B+X,Q=L?z-K:B+K,$=L?[Q,J]:[J,Q];Y.push($);for(var ee=$[0];ee<$[1];ee+=1){var te=ee;te<0&&(te=x+ee),_({base:(0,r.Rj)(T[te]),i:te,top:s+2*W+3})}V.forEach((function(e){var n=l(e,2),r=n[0],i=n[1],o=L?z-i:B+r,c=l([o*k,s+1*W],2),u=c[0],d=c[1],f=l([o*k,s+2*W],2),C=f[0],T=f[1];t.strokeStyle="hovering"===a||"clicked"===a?"red":"black",t.lineWidth=3,t.beginPath(),t.lineTo(O(u),q(d)),t.lineTo(O(C),q(T));var h=L?z-r:B+i;t.lineTo(O(h*k),q(s+2*W));var A=l([h*k,s+3*W],2),v=A[0],G=A[1];t.strokeStyle="hovering"===a||"clicked"===a?"red":"black",t.lineTo(O(v),q(G)),t.stroke(),t.closePath()}))}}))}))}))}));for(var K=function(e){var n=N(e);if(n+k<E||n>j)return"continue";_({base:T[e],i:e,top:s-w.f+(p?0:W)});var i=48/(k*w.a),a=Math.floor(S/i),o=Math.max(Math.floor(S/a),1),l=function(){t.fillStyle="black",t.font=(0,r.qT)(12,"normal"),F(String(e+1),n+k/2,s-w.f,"end","center")};(0===e||e===S||e%o==0&&e>.7*o&&e<x-.7*o)&&l()},J=M;J<Math.min(P+1,T.length);J+=1)K(J);t.restore(),G.length>0&&G.forEach((function(e){var n=e.start,i=e.end,a=n*k,o=i*k,l=s;if(p||(l+=W),e.complement&&!p){l+=W+3;for(var c=n;c<i;c+=1)_({base:(0,r.Rj)(T[c]),i:c,top:l})}var u=Math.min(Math.max(1-w.a,.4),.8);t.fillStyle="rgba(255,151,0, "+u+")",e.active&&(t.fillStyle="rgba(0, 0, 255, "+u+")"),t.beginPath(),t.moveTo(O(a),q(l)),t.lineTo(O(o),q(l)),t.lineTo(O(o),q(l+W)),t.lineTo(O(a),q(l+W)),t.closePath(),t.fill()}));var Q=Math.max(Math.min(W/3,8),4),$=s+W*(p?1:2)+3;y.forEach((function(e){var n=e.start,i=e.end+1;!0===e.antiClockwise&&(n=e.end,i=e.start+1);var a=n*k,o=i*k;!1===e.antiClockwise&&(o-=Q/w.a),!0===e.antiClockwise&&(a+=Q/w.a);var l=$-w.f;!0!==e.antiClockwise||p||(l+=W),t.beginPath(),t.moveTo(O(a),q(l)),t.lineTo(O(o),q(l)),t.lineWidth=3,t.strokeStyle="black",t.fillStyle="black",t.stroke(),t.closePath(),t.beginPath(),!0===e.antiClockwise&&(t.moveTo(O(a),q(l-Q)),t.lineTo(O(a-Q/w.a),q(l)),t.lineTo(O(a),q(l+Q))),!1===e.antiClockwise&&(t.moveTo(O(o),q(l-Q)),t.lineTo(O(o+Q/w.a),q(l)),t.lineTo(O(o),q(l+Q))),t.closePath(),t.fill();var c=function(e,n,i){var a=b[e]||"X",o=(0,r.su)(a);t.fillStyle=o,t.strokeStyle="rgba(0, 0, 0, "+Math.min(1,Math.max(k*w.a-2,0))+")",t.beginPath(),t.lineWidth=1,t.rect(O(n*k),q($+i),3*k*w.a,W),t.fill(),t.stroke(),t.closePath(),t.font=(0,r.qT)(W,"bold"),t.fillStyle=(0,r.nU)(a)?"#c8d9fa":"#282c34",t.textBaseline="top",Z<=2&&F(a,(n+1.5)*k,$+i,"start","center")},u="";if(!p)if(!0===e.antiClockwise)for(var d=e.start;d>=e.end;d-=1){var f=(0,r.Rj)(T[d]);_({base:f,i:d,top:$-w.f}),3===(u+=f).length&&(c(u,d,W-w.f),u="")}else if(!1===e.antiClockwise)for(var C=e.start;C<=e.end;C+=1)3===(u+=T[C]).length&&(c(u,C-2,W-w.f),u="");var h=e.end,A=e.start,v=e.antiClockwise,G=(0,r.GQ)(e,p,T.length);t.font=(0,r.qT)(16,"bold"),t.fillStyle="black",t.textBaseline="top";var m=(0,r.R7)(A,h,x,v),g=4*W;p&&(g=W),F(G,m*k+k/2,s+g+3+3-w.f,"start","center")}));var ee=Math.min(Math.max(D,0),x*k),te=Math.max(Math.min(Math.floor(ee/k),S),0),ne=(0,r.IW)(te,y),re=!1;ne&&!0===ne.antiClockwise&&(re=!0);var ie=70,ae=ie+W+(re?W:0),oe=ie+2*W+(re?W:0),le=ie+2*W+(re?((0,r.Lc)(x,!0,ne.start,ne.end)>=3?2:1)*W:0);if(p&&(ae=ie+W,oe=ie+W+16,le=ie+W+16),t.beginPath(),t.moveTo(O(ee),q(ae)-w.f),t.lineTo(O(ee),q(oe)-w.f),t.lineWidth=3,t.strokeStyle="rgba(0, 0, 0, 0.5)",t.stroke(),t.closePath(),t.font=(0,r.qT)(16,"bold"),t.fillStyle="black",F(String(te+1),ee,le-w.f,"start","center"),g){for(var ce=g.peakLocations,se=g.phred,ue=0;ue<se.length;ue++){var de=Math.max.apply(Math,c([],l(se)));H({i:ue,phred:se[ue],yMax:de})}Object.entries(g).filter((function(e){var t=l(e,2),n=t[0];t[1];return n.includes("Trace")&&m.includes(n.charAt(0).toUpperCase())})).forEach((function(e){var t=l(e,2),n=t[0],r=t[1];if("string"!=typeof r&&n.includes("Trace"))for(var i=r,a=n.charAt(0).toUpperCase(),o=d(ce),c=f(g),s=0;s<o.length-1;s++)o[s][1]<M||o[s][1]>P||U({base:a,iInterpol:o[s][0],iNext:o[s+1][0],value:i[s],nextValue:i[s+1],top:$,yMax:c})}))}return t.restore(),v}},3048:function(e,t,n){var r;n.d(t,{fn:function(){return r},J$:function(){return o},d1:function(){return q},uF:function(){return I},Wi:function(){return X},ee:function(){return Y},Ds:function(){return x},Jn:function(){return l},SD:function(){return i},su:function(){return G},qT:function(){return M},R7:function(){return H},B6:function(){return v},Rj:function(){return S},Dc:function(){return P},zO:function(){return k},Lc:function(){return z},Ax:function(){return V},GQ:function(){return U},IW:function(){return B},uu:function(){return D},Mu:function(){return s},cd:function(){return W},a$:function(){return Z},Wk:function(){return N},h9:function(){return J},UG:function(){return $},Oq:function(){return b},ci:function(){return c},XA:function(){return Q},IS:function(){return E},$X:function(){return w},nU:function(){return h},bc:function(){return T}}),function(e){e.FORWARD="FORWARD",e.NOT_DEFINED="NOT_DEFINED",e.REVERSE="REVERSE"}(r||(r={}));var i={A:"#C20000",T:"#00B700",C:"#1000BA",G:"#F5BF02",R:"black",Y:"black",W:"black",S:"black",M:"black",K:"black",H:"black",B:"black",V:"black",D:"black",N:"black"},a={R:"Y",Y:"R",W:"W",S:"S",M:"K",K:"M",H:"D",B:"V",V:"B",D:"H",N:"N",A:"T",T:"A",G:"C",C:"G"},o={A:{value:"A",name:"Alanine",threeLettersName:"Ala",hydrophobicity:1.8,color:"#A7A7A7"},R:{value:"R",name:"Arginine",threeLettersName:"Arg",hydrophobicity:-4.5,color:"#145AFF"},N:{value:"N",name:"Asparagine",threeLettersName:"Asn",hydrophobicity:-3.5,color:"#00DCDC"},D:{value:"D",name:"Aspartic acid",threeLettersName:"Asp",hydrophobicity:-3.5,color:"#E60A0A"},C:{value:"C",name:"Cysteine",threeLettersName:"Cys",hydrophobicity:2.5,color:"#E6E600"},E:{value:"E",name:"Glutamic acid",threeLettersName:"Glu",hydrophobicity:-3.5,color:"#E60A0A"},Q:{value:"Q",name:"Glutamine",threeLettersName:"Gln",hydrophobicity:-3.5,color:"#00DCDC"},G:{value:"G",name:"Glycine",threeLettersName:"Gly",hydrophobicity:-.4,color:"#A7A7A7"},H:{value:"H",name:"Histidine",threeLettersName:"His",hydrophobicity:-3.2,color:"#8282D2"},I:{value:"I",name:"Isoleucine ",threeLettersName:"Ile",hydrophobicity:4.5,color:"#0F820F"},L:{value:"L",name:"Leucine",threeLettersName:"Leu",hydrophobicity:3.8,color:"#0F820F"},K:{value:"K",name:"Lysine",threeLettersName:"Lys",hydrophobicity:-3.9,color:"#145AFF"},M:{value:"M",name:"Methionine",threeLettersName:"Met",hydrophobicity:1.9,color:"#E6E600"},F:{value:"F",name:"Phenylalanine",threeLettersName:"Phe",hydrophobicity:2.8,color:"#3232AA",doInvert:!0},P:{value:"P",name:"Proline",threeLettersName:"Pro",hydrophobicity:-1.6,color:"#DC9682"},S:{value:"S",name:"Serine",threeLettersName:"Ser",hydrophobicity:-.8,color:"#FA9600"},T:{value:"T",name:"Threonine",threeLettersName:"Thr",hydrophobicity:-.7,color:"#FA9600"},U:{value:"U",name:"Selenocysteine",threeLettersName:"Sec",color:"#FF0000"},W:{value:"W",name:"Tryptophan",threeLettersName:"Trp",hydrophobicity:-.9,color:"#B45AB4"},Y:{value:"Y",name:"Tyrosine",threeLettersName:"Tyr",hydrophobicity:-1.3,color:"#3232AA",doInvert:!0},V:{value:"V",name:"Valine",threeLettersName:"Val",hydrophobicity:4.2,color:"#0F820F"},"*":{value:"*",name:"Stop",threeLettersName:"Stop",color:"#000000"},".":{value:".",name:"Stop",threeLettersName:"Stop",color:"#000000"},"-":{value:"-",name:"Gap",threeLettersName:"Gap",color:"#ffffff"},B:{value:"B",threeLettersName:"ND",color:"lightpurple",isAmbiguous:!0,name:"B",aliases:"ND"},J:{value:"J",threeLettersName:"IL",color:"lightpurple",isAmbiguous:!0,name:"J",aliases:"IL"},X:{value:"X",threeLettersName:"ACDEFGHIKLMNPQRSTVWY",color:"lightpurple",isAmbiguous:!0,name:"X",aliases:"ACDEFGHIKLMNPQRSTVWY"},Z:{value:"Z",threeLettersName:"QE",color:"lightpurple",isAmbiguous:!0,name:"Z",aliases:"QE"}},l=24,c=150,s={TAG:"*",TAA:"*",TGA:"*",GCG:"A",GCA:"A",GCT:"A",GCC:"A",TGT:"C",TGC:"C",GAT:"D",GAC:"D",GAA:"E",GAG:"E",TTT:"F",TTC:"F",GGT:"G",GGA:"G",GGG:"G",GGC:"G",CAT:"H",CAC:"H",ATA:"I",ATT:"I",ATC:"I",AAA:"K",AAG:"K",CTA:"L",TTA:"L",CTT:"L",TTG:"L",CTC:"L",CTG:"L",ATG:"M",AAT:"N",AAC:"N",CCG:"P",CCA:"P",CCT:"P",CCC:"P",CAA:"Q",CAG:"Q",CGT:"R",CGA:"R",CGC:"R",AGA:"R",AGG:"R",CGG:"R",TCG:"S",AGT:"S",TCA:"S",TCT:"S",TCC:"S",AGC:"S",ACG:"T",ACT:"T",ACA:"T",ACC:"T",GTA:"V",GTT:"V",GTC:"V",GTG:"V",TGG:"W",TAT:"Y",TAC:"Y"},u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)},d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},f=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},C=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function T(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function h(e){return"FYKRDELIV*.".includes(e)}var A,v=function(e){return i[e]},G=function(e){var t;return null===(t=o[e])||void 0===t?void 0:t.color},m=function(e){var t=0;return e.forEach((function(e){t+=e})),t},p=function(e){var t=e.rightTag;return t?2*String(t).length:0},g=function(e){var t=Math.min.apply(Math,f([],d(e.locations.flat()))),n=Math.max.apply(Math,f([],d(e.locations.flat())));return Math.abs(n-t)+p(e)},y=function e(t,n,r,i){var a=Math.min.apply(Math,f([],d(t.locations.map((function(e){return d(e,1)[0]})).flat()))),o=Math.max.apply(Math,f([],d(t.locations.map((function(e){return d(e,2)[1]})).flat()))),l=Math.min.apply(Math,f([],d(n.locations.map((function(e){return d(e,1)[0]})).flat()))),c=Math.max.apply(Math,f([],d(n.locations.map((function(e){return d(e,2)[1]})).flat()))),s=a>o,C=l>c;if(i.value+=1,i.value>20)return!0;if(!s&&!C)return Math.max(a,l)<=Math.min(o+p(t),c+p(n));var h=function(e){return u(u({},e),{locations:[T(Math.min.apply(Math,f([],d(e.locations.map((function(e){return d(e,1)[0]})).flat()))),r)]})},A=function(e){return u(u({},e),{locations:[T(0,Math.max.apply(Math,f([],d(e.locations.map((function(e){return d(e,2)[1]})).flat()))))]})};return s&&!C?e(h(t),n,r,i)||e(A(t),n,r,i):!s&&C?e(h(n),t,r,i)||e(A(n),t,r,i):!(!s||!C)&&(e(h(n),h(t),r,i)||e(A(n),A(t),r,i))},b=function(e,t){for(var n,r=[],i=f([],d(e)).sort((function(e,t){return g(e)-g(t)})),a=function(){var e,n,a=i.pop();if(!a)return"continue-stackLoop";try{for(var o=(e=void 0,C(r)),l=o.next();!l.done;l=o.next()){var c=l.value;if(c.every((function(e){return!y(a,e,t,{value:0})})))return c.push(a),"continue-stackLoop"}}catch(s){e={error:s}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}r.push([a])};i.length;)a();return r.sort((n=!0,function(e,t){var r=n?1:-1,i=r*(e.length-t.length),a=r*m(e.map(g))-m(t.map(g));return 0===a?0:a<0?-1:a>0?1:0===i?0:i<0?-1:i>0?1:0})).reverse()},x=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];A&&window.cancelAnimationFrame(A),A=window.requestAnimationFrame((function(){e.apply(void 0,f([],d(t)))}))}},S=function(e){if(e.match(/-|\.| /))return e;var t=a[e];if(!t)throw new Error("invalid nucleotide "+e);return t},k=function(e,t){var n=t.split("");return n.reverse(),e?n.join(""):n.map(S).join("")};var w=function(e,t,n){return e?function(e,t){for(var n=0;n<t.length;n+=1)if(e[n]!==t[n])return!1;return!0}(t,n):function(e,t){if(t.length!==e.length)throw new Error("sequence and site must be the same length");for(var n=0;n<t.length;n+=1)if(r=e[n],i=t[n],!(r.match(/-|\.| /)&&i.match(/-|\.| /)||"A"===i&&"A"===r||"C"===i&&"C"===r||"G"===i&&"G"===r)&&("T"!==i&&"U"!==i||"T"!==r&&"U"!==r)&&("R"!==i||"A"!==r&&"G"!==r)&&("Y"!==i||"C"!==r&&"T"!==r&&"U"!==r)&&("S"!==i||"G"!==r&&"C"!==r)&&("W"!==i||"A"!==r&&"T"!==r&&"U"!==r)&&("K"!==i||"G"!==r&&"T"!==r&&"U"!==r)&&("M"!==i||"A"!==r&&"C"!==r)&&("B"!==i||"C"!==r&&"G"!==r&&"T"!==r&&"U"!==r)&&("D"!==i||"A"!==r&&"G"!==r&&"T"!==r&&"U"!==r)&&("H"!==i||"A"!==r&&"C"!==r&&"T"!==r&&"U"!==r)&&("V"!==i||"A"!==r&&"C"!==r&&"G"!==r)&&"N"!==i)return!1;var r,i;return!0}(t,n)},R=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};function M(e,t){return void 0===t&&(t="normal"),"normal normal "+t+" "+e+"px sans-serif"}function P(e){var t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return{ratio:t/n,shouldScale:t!==n}}function E(e,t,n){var r=e.getContext("2d");if(r){var i=P(r),a=i.ratio,o=i.shouldScale;return o?(e.width=t*a,e.height=n*a,e.style.width=t+"px",e.style.height=n+"px"):(e.width=t,e.height=n,e.style.width="",e.style.height=""),{ratio:a,shouldScale:o}}}var j=null,L=null,D=function(e){if(!j){var t=document.getElementById("seq-view-offscreen-canvas");t?j=t:((j=document.createElement("canvas")).id="seq-view-offscreen-canvas",j.style.position="absolute",j.style.left="-10px",j.style.width="1px",j.style.height="1px",j.width=2,j.height=2,j.style.visibility="hidden",document.body.appendChild(j))}L||(L=j.getContext("2d",{willReadFrequently:!0}));var n=L;if(n){n.clearRect(0,0,1,1),n.fillStyle=e,n.fillRect(0,0,1,1);var r=R(n.getImageData(0,0,1,1).data,3),i=r[0],a=r[1],o=r[2];return n.clearRect(0,0,1,1),.299*i+.587*a+.114*o>150?"black":"white"}return"black"},I={primaryText:"#000000",primaryBackground:"#ffffff",websiteSecondary:"#00647b",websiteSecondaryLight:"#008dae",websiteSecondaryDark:"#003b48",websiteTertiary:"#0A3D51",websiteTertiaryDark:"#041b24",websiteTertiaryLight:"#105f7e",secondaryText:"#1f497d",secondaryBackground:"#eeece1",accent1:"#139cb2",accent1Light:"#18c4e0",accent1Dark:"#0e7484",accent2:"#eaebe0",accent3:"#fc4711",accent3Light:"#fd6e43",accent3Dark:"#d73403",accent4:"#e20047",accent4Light:"#ff165f",accent4Dark:"#af0037",accent5:"#28a745",accent5Light:"#98d26c",accent5Dark:"#64a533",accent6:"#8af74d",accent6Light:"#aaf97e",accent6Dark:"#6af51c",link:"#0000ff"},O=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},q=function(e,t){return t==r.REVERSE?F({start:e[1],end:e[0]},!0):F({start:e[0],end:e[1]},!1)},F=function(e,t){var n=e.start,r=e.end;if(n!==r){if(!0===t)return!(n>r);if(!1===t)return!(r>n)}return!1},N=function(e){return F(e,!!e.antiClockwise)},Z=function(e,t){var n=O(e,2),r=n[0],i=n[1],a=t.start,o=t.end,l=t.antiClockwise;if(a===o&&o===r&&o===i)return!0;if(a!==o)if(!0===l){if(a>o){if(r>=o&&r<=a&&i>=o&&i<=a)return!0}else if(r>=o||i<=a)return!0}else if(!1===l)if(o>a){if(r>=a&&r<=o&&i>=a&&i<=o)return!0}else if(r>=a||i<=o)return!0;return!1},W=function(e,t){var n=t.start,r=t.end,i=t.antiClockwise;if(n===r&&r===e)return!0;if(n!==r)if(!0===i){if(n>r){if(e>=r&&e<=n)return!0}else if(e>=r||e<=n)return!0}else if(!1===i)if(r>n){if(e>=n&&e<=r)return!0}else if(e>=n||e<=r)return!0;return!1},B=function(e,t){return t.find((function(t){return W(e,t)}))},z=function(e,t,n,r){var i=n,a=r;return!0===t&&(i=r,a=n),i>a?e-i+a:a-i+1},V=function(e,t,n,r){return z(e,t,n,r)/e},H=function(e,t,n,r){var i=(e+t)/2;return t>e&&!1===r?i=(e+t)/2:t<e&&!1===r?i=(e+(n-e+t)/2)%n:t<e&&!0===r?i=(e+t)/2:t>e&&!0===r&&(i=(t+(n-t+e)/2)%n),i},U=function(e,t,n){var r=e.end,i=e.start,a=e.antiClockwise,o=i+1+" - "+(r+1);o=i===r?String(i+1):a?r+1+" - "+(i+1):i+1+" - "+(r+1);var l=0;if((l=a&&i<r?i+n-r:!a&&r<i?r+n-i:r-i>0?r-i:i-r)>0){var c=Math.floor((l+1)/3);o+=" ("+(l+1)+" "+(t?"aa":"bp"),c>0&&!t&&(o+=", "+c+" aa"),o+=")"}return o},_=function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_.apply(this,arguments)},Y=function(e,t){return{a:1,b:0,c:0,d:1,e:e,f:t}},X=function(e){return{a:e,b:0,c:0,d:1,e:0,f:0}},K=function(e,t){var n,r=e.a,i=e.b,a=e.c,o=e.d,l=e.e,c=e.f,s={g:(n=t).a,h:n.b,i:n.c,j:n.d,k:n.e,l:n.f},u=s.g,d=s.h,f=s.i,C=s.j,T=s.k,h=s.l;return{a:r*u+a*d,b:i*u+o*d,c:r*f+a*C,d:i*f+o*C,e:r*T+a*h+l,f:i*T+o*h+c}},J=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={a:1,b:0,c:0,d:1,e:0,f:0};return e.forEach((function(e){n=K(n,e)})),_({},n)},Q=function(e){var t=e.len,n=e.startIndex,r=e.endIndex,i=0,a="sequence"in e?function(t){return e.onRenderBase(t,e.sequence[i++])}:function(t){return e.onRenderBase(t)};if(n>r){for(var o=n;o<t;o+=1)a(o);for(o=0;o<r+1;o+=1)a(o)}else for(o=n;o<r+1;o+=1)a(o)},$=function(e,t,n,i){if("DNA_OLIGO"===e.type){var a=e.fivePExtension;a&&(e.direction===r.REVERSE?Q({startIndex:t[1],endIndex:(t[1]+a.length-1)%n,sequence:a.split("").reverse().join(""),len:n,onRenderBase:i}):Q({startIndex:(t[0]-1-a.length+n)%n,endIndex:(t[0]-2+n)%n,sequence:a,len:n,onRenderBase:i}))}}},3167:function(e,t,n){n.d(t,{j:function(){return i}});var r=n(8851),i=function(e){var t=e.children;return r.createElement("div",{style:{textAlign:"center"}},r.createElement("div",{style:{boxShadow:"0 0 60px rgba(0, 0, 0, 0.04)",borderRadius:"16px",overflow:"hidden",margin:"0 auto",display:"flex",justifyContent:"center"}},t))}},9959:function(e,t,n){n.d(t,{k:function(){return s}});var r=n(8851),i=n(3167),a=n(8064),o=n(3048),l=n(7019),c=n(256),s=function(e){var t=e.searchResults,n=void 0===t?[]:t,s=e.startZoom,u=void 0===s?55:s,d=e.w,f=e.h,C=e.len,T=e.circularSelection,h=e.annotationLevels,A=e.mouseX,v=void 0===A?0:A,G=e.mouseY,m=void 0===G?f:G,p=(0,l.$P)(),g=p[0],y=p[1],b=r.useState(u),x=b[0],S=b[1],k=r.useRef(void 0);g&&!k.current&&((0,o.IS)(g,d,f),k.current=g.getContext("2d"));var w=r.useRef(!1),R=function(e){var t=k.current;if(t){w.current=!0;var r=(0,o.Dc)(t).ratio;(0,a.Es)({c:t,w:d,h:f,ratio:r,data:{mouseX:v,mouseY:m,circluarCamera:{angleOffset:0,scrollOffsetZoomed:0,scrollOffsetZooming:0,value:e,target:{zoom:1,angle:1,radius:1}},matrix:{a:1,b:0,c:0,d:1,e:0,f:0}},isProtein:!1,sequence:"TCCTCGCATAGGGCGGATCGGTATTCATGGGACGCCACACAACTCTTAGATTGATTGTCGCTTTCAGGCGTGTCATCCTGCGCCCCGGCACGAGCTCGTCCGGCGGTATAGTCGTATGTGCTTATACACATCAAAGCTAACAAATCTTTCTGCGGGCGGTCGTCACGACACACGTTCTTACG".slice(0,C),circularSelection:T,searchResults:n,annotationLevels:h,renderStateRef:{hoveringFeature:void 0,clickedFeatures:[]},codons:o.Mu})}},M=(0,o.Ds)(R),P=function(e){return{zoom:1,angle:Math.min(e,50)/50,radius:Math.max(0,e-50)/50}},E=r.useRef(R);return E.current=R,r.useEffect((function(){g&&k.current&&!w.current&&E.current(P(x))}),[g,x]),r.createElement("div",{style:{width:d+"px",height:f+"px"}},r.createElement(i.j,null,r.createElement("canvas",{ref:y})),r.createElement(c.ZP,{value:x,onChange:function(e,t){var n=t;S(n),M(P(n))}}))}},7289:function(e,t,n){n.d(t,{s:function(){return a}});var r=n(5247),i=n(5571),a=function(e){return void 0===e&&(e=r.d),(0,i.n)(e)}},5247:function(e,t,n){n.d(t,{d:function(){return a},v:function(){return i}});var r=n(3048),i="CATGTTCTTTCCTGCGTTATCCCCTGATTCTGTGGATAACCGTATTACCGCCTTTGAGTGAGCTGATACCGCTCGCCGCAGCCGAACGACCGAGCGCAGCGAGTCAGTGAGCGAGGAAGCGGAAGAGCGCCCAATACGCAAACCGCCTCTCCCCGCGCGTTGGCCGATTCATTAATGCAGCTGGCACGACAGGTTTCCCGACTGGAAAGCGGGCAGTGAGCGCAACGCAATTAATGTGAGTTAGCTCACTCATTAGGCACCCCAGGCTTTACACTTTATGCTTCCGGCTCGTATGTTGTGTGGAATTGTGAGCGGATAACAATTTCACACAGGAAACAGCTATGACCATGATTACGCCAAGCTTGCATGCCTGCAGGTCGACTCTAGAGGATCCCCGGGTACCGAGCTCGAATTCACTGGCCGTCGTTTTACAACGTCGTGACTGGGAAAACCCTGGCGTTACCCAACTTAATCGCCTTGCAGCACATCCCCCTTTCGCCAGCTGGCGTAATAGCGAAGAGGCCCGCACCGATCGCCCTTCCCAACAGTTGCGCAGCCTGAATGGCGAATGGCGCCTGATGCGGTATTTTCTCCTTACGCATCTGTGCGGTATTTCACACCGCATATGGTGCACTCTCAGTACAATCTGCTCTGATGCCGCATAGTTAAGCCAGCCCCGACACCCGCCAACACCCGCTGACGCGCCCTGACGGGCTTGTCTGCTCCCGGCATCCGCTTACAGACAAGCTGTGACCGTCTCCGGGAGCTGCATGTGTCAGAGGTTTTCACCGTCATCACCGAAACGCGCGAGACGAAAGGGCCTCGTGATACGCCTATTTTTATAGGTTAATGTCATGATAATAATGGTTTCTTAGACGTCAGGTGGCACTTTTCGGGGAAATGTGCGCGGAACCCCTATTTGTTTATTTTTCTAAATACATTCAAATATGTATCCGCTCATGAGACAATAACCCTGATAAATGCTTCAATAATATTGAAAAAGGAAGAGTATGAGTATTCAACATTTCCGTGTCGCCCTTATTCCCTTTTTTGCGGCATTTTGCCTTCCTGTTTTTGCTCACCCAGAAACGCTGGTGAAAGTAAAAGATGCTGAAGATCAGTTGGGTGCACGAGTGGGTTACATCGAACTGGATCTCAACAGCGGTAAGATCCTTGAGAGTTTTCGCCCCGAAGAACGTTTTCCAATGATGAGCACTTTTAAAGTTCTGCTATGTGGCGCGGTATTATCCCGTATTGACGCCGGGCAAGAGCAACTCGGTCGCCGCATACACTATTCTCAGAATGACTTGGTTGAGTACTCACCAGTCACAGAAAAGCATCTTACGGATGGCATGACAGTAAGAGAATTATGCAGTGCTGCCATAACCATGAGTGATAACACTGCGGCCAACTTACTTCTGACAACGATCGGAGGACCGAAGGAGCTAACCGCTTTTTTGCACAACATGGGGGATCATGTAACTCGCCTTGATCGTTGGGAACCGGAGCTGAATGAAGCCATACCAAACGACGAGCGTGACACCACGATGCCTGTAGCAATGGCAACAACGTTGCGCAAACTATTAACTGGCGAACTACTTACTCTAGCTTCCCGGCAACAATTAATAGACTGGATGGAGGCGGATAAAGTTGCAGGACCACTTCTGCGCTCGGCCCTTCCGGCTGGCTGGTTTATTGCTGATAAATCTGGAGCCGGTGAGCGTGGGTCTCGCGGTATCATTGCAGCACTGGGGCCAGATGGTAAGCCCTCCCGTATCGTAGTTATCTACACGACGGGGAGTCAGGCAACTATGGATGAACGAAATAGACAGATCGCTGAGATAGGTGCCTCACTGATTAAGCATTGGTAACTGTCAGACCAAGTTTACTCATATATACTTTAGATTGATTTAAAACTTCATTTTTAATTTAAAAGGATCTAGGTGAAGATCCTTTTTGATAATCTCATGACCAAAATCCCTTAACGTGAGTTTTCGTTCCACTGAGCGTCAGACCCCGTAGAAAAGATCAAAGGATCTTCTTGAGATCCTTTTTTTCTGCGCGTAATCTGCTGCTTGCAAACAAAAAAACCACCGCTACCAGCGGTGGTTTGTTTGCCGGATCAAGAGCTACCAACTCTTTTTCCGAAGGTAACTGGCTTCAGCAGAGCGCAGATACCAAATACTGTTCTTCTAGTGTAGCCGTAGTTAGGCCACCACTTCAAGAACTCTGTAGCACCGCCTACATACCTCGCTCTGCTAATCCTGTTACCAGTGGCTGCTGCCAGTGGCGATAAGTCGTGTCTTACCGGGTTGGACTCAAGACGATAGTTACCGGATAAGGCGCAGCGGTCGGGCTGAACGGGGGGTTCGTGCACACAGCCCAGCTTGGAGCGAACGACCTACACCGAACTGAGATACCTACAGCGTGAGCTATGAGAAAGCGCCACGCTTCCCGAAGGGAGAAAGGCGGACAGGTATCCGGTAAGCGGCAGGGTCGGAACAGGAGAGCGCACGAGGGAGCTTCCAGGGGGAAACGCCTGGTATCTTTATAGTCCTGTCGGGTTTCGCCACCTCTGACTTGAGCGTCGATTTTTGTGATGCTCGTCAGGGGGGCGGAGCCTATGGAAAAACGCCAGCAACGCGGCCTTTTTACGGTTCCTGGCCTTTTGCTGGCCTTTTGCTCA",a=[{id:"8209a176-13f4-48c2-b397-44abd61b2d3d",type:"OTHER",label:"TetLac_v1",color:"hsl(240, 100%, 30%, 1)",locations:[(0,r.bc)(268,342)],hidden:!1,displayAsSequence:!1,rightTag:"",displayLabel:"",direction:r.fn.FORWARD},{id:"ca28fd0b-551b-4572-a3ad-0fe1eedffabf",type:"OTHER",label:"lacO reg",color:"hsl(0, 100%, 29%, 1)",locations:[(0,r.bc)(301,328)],hidden:!1,displayAsSequence:!1,rightTag:"",displayLabel:"",direction:r.fn.FORWARD},{id:"63466a0c-f11c-4924-9c69-1fafa7d2383f",type:"OTHER",label:"AmpR_v2",color:"hsl(176, 100%, 29%, 1)",locations:[(0,r.bc)(934,1939)],hidden:!1,displayAsSequence:!1,rightTag:"",displayLabel:"",direction:r.fn.FORWARD},{id:"82d8dae1-951c-4e48-92aa-c78d8eb36d7f",type:"OTHER",label:"Bla Core promoter",color:"hsl(240, 100%, 30%, 1)",locations:[(0,r.bc)(941,969)],hidden:!1,displayAsSequence:!1,rightTag:"",displayLabel:"",direction:r.fn.FORWARD},{id:"27e239fe-4785-4706-b24d-f09873135c1b",type:"OTHER",label:"AmpR",color:"hsl(60, 100%, 50%, 1)",locations:[(0,r.bc)(1011,1871)],hidden:!1,displayAsSequence:!1,rightTag:"",displayLabel:"",direction:r.fn.FORWARD},{id:"d1d2153d-af6c-457d-86f7-c481099b86e8",type:"OTHER",label:"Probably Terminator",color:"hsl(0, 100%, 84%, 1)",locations:[(0,r.bc)(1908,1935)],hidden:!1,displayAsSequence:!1,rightTag:"",displayLabel:"",direction:r.fn.FORWARD},{id:"cb1d62c6-5b5f-453c-9bdc-f667635ddac8",type:"OTHER",label:"ColE1_v2",color:"hsl(300, 100%, 50%, 1)",locations:[(0,r.bc)(2019,2686)],hidden:!1,displayAsSequence:!1,rightTag:"",displayLabel:"",direction:r.fn.FORWARD},{id:"8bd05cde-5e50-4e68-84ea-dcd3326f7b3e",type:"OTHER",label:"RNAII gene",color:"hsl(176, 100%, 29%, 1)",locations:[(0,r.bc)(2042,2630)],hidden:!1,displayAsSequence:!1,rightTag:"",displayLabel:"",direction:r.fn.FORWARD},{id:"259c9658-9479-480d-b2c0-766fa1e32689",type:"OTHER",label:"RNAII",color:"hsl(210, 100%, 59%, 1)",locations:[(0,r.bc)(2078,2630)],hidden:!1,displayAsSequence:!1,rightTag:"",displayLabel:"",direction:r.fn.FORWARD},{id:"c3b77c3f-939e-4def-b735-a04d37f8915f",type:"OTHER",label:"RNAI",color:"hsl(210, 100%, 59%, 1)",locations:[(0,r.bc)(2081,2188)],hidden:!1,displayAsSequence:!1,rightTag:"",displayLabel:"",direction:r.fn.REVERSE},{id:"b0d5b2c0-b757-47af-977b-ff034a759911",type:"OTHER",label:"RNAI gene",color:"hsl(176, 100%, 29%, 1)",locations:[(0,r.bc)(2081,2224)],hidden:!1,displayAsSequence:!1,rightTag:"",displayLabel:"",direction:r.fn.REVERSE},{id:"e6671106-7344-4f5a-a103-62b91d0fb6d2",type:"OTHER",label:"Sp1",color:"hsl(210, 100%, 59%, 1)",locations:[(0,r.bc)(2612,2621)],hidden:!1,displayAsSequence:!1,rightTag:"",displayLabel:"",direction:r.fn.REVERSE}]},8379:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return T},default:function(){return G},frontMatter:function(){return C},metadata:function(){return h},toc:function(){return A}});var r=n(801),i=n(3108),a=n(8851),o=n(2669),l=(n(9959),n(3048)),c=n(4721),s=n(8390),u=n(7289),d=function(e){var t=e.annotations,n=void 0===t?[]:t,i=e.sequence,o=e.isProtein,l=void 0!==o&&o,d=(0,u.s)(n);return a.createElement(c.k,(0,r.Z)({},d,{sequence:i,isProtein:l,renderLinearByDefault:!1,AnnotationForm:s.N,width:800,height:640}))},f=["components"],C={sidebar_position:1},T="App",h={unversionedId:"examples/circular/app",id:"examples/circular/app",title:"App",description:"DNA",source:"@site/docs/examples/circular/app.mdx",sourceDirName:"examples/circular",slug:"/examples/circular/app",permalink:"/sequence-viewer/docs/examples/circular/app",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/examples/circular/app.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"exampleSidebar",previous:{title:"Home",permalink:"/sequence-viewer/docs/examples/"},next:{title:"Controller",permalink:"/sequence-viewer/docs/examples/circular/controller"}},A=[{value:"DNA",id:"dna",children:[],level:2},{value:"With Annotation",id:"with-annotation",children:[],level:2}],v={toc:A};function G(e){var t=e.components,n=(0,i.Z)(e,f);return(0,o.kt)("wrapper",(0,r.Z)({},v,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"app"},"App"),(0,o.kt)("h2",{id:"dna"},"DNA"),(0,o.kt)(d,{sequence:"TCCTCGCATAGGGCGGATCGGTATTCATGGGACGCCACACAACTCTTAGATTGATTGTCGCTTTCAGGCGTGTCATCCTGCGCCCCGGCACGAGCTCGTCCGGCGGTATAGTCGTATGTGCTTATACACATCAAAGCTAACAAATCTTTCTGCGGGCGGTCGTCACGACACACGTTCTTACG",isProtein:!1,mdxType:"CircularApp"}),(0,o.kt)("h2",{id:"with-annotation"},"With Annotation"),(0,o.kt)(d,{sequence:"TCCTCGCATAGGGCGGATCGGTATTCATGGGACGCCACACAACTCTTAGATTGATTGTCGCTTTCAGGCGTGTCATCCTGCGCCCCGGCACGAGCTCGTCCGG",annotations:[{id:"eb5e3fd6-f487-4852-8d39-973954c036f8",type:"OTHER",label:"CDS",color:"#dba88a",locations:[(0,l.bc)(1,50)],hidden:!1,displayAsSequence:!1,rightTag:"",displayLabel:"",direction:l.fn.FORWARD}],mdxType:"CircularApp"}))}G.isMDXComponent=!0}}]);