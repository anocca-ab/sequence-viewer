"use strict";(self.webpackChunk_anocca_sequence_viewer_website=self.webpackChunk_anocca_sequence_viewer_website||[]).push([[4720],{2669:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return h}});var r=n(8851);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),f=s(n),h=a,v=f["".concat(c,".").concat(h)]||f[h]||d[h]||i;return n?r.createElement(v,o(o({ref:t},u),{},{components:n})):r.createElement(v,o({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=f;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},4721:function(e,t,n){n.d(t,{k:function(){return S}});var r=n(8927),a=n(8851),i=n(6179),o=n(7019),l=n(3048),c=n(442),s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},u=function(e){var t=e.isProtein,n=e.chromatogramData,r=e.ref,i=e.width,u=e.height,d=e.sequence,f=e.allAnnotations,h=e.codons,v=e.Search,m=e.FilterChromatogram,p=e.openAnnotationDialog,g=d.length,y=g-1,b=(0,o.QO)(i,d,t),x=t?l.ci:l.Jn,k=s(a.useState([{state:"selected",start:0,end:0,antiClockwise:void 0}]),2),C=k[0],S=k[1],w=s(a.useState(void 0),2),T=w[0],A=w[1];return(0,o.bc)({circularSelection:C,setCircularSelection:function(e,t){A(e),S(t)},clickedAnnotation:T,renderData:b,getCaretPosition:function(){if(!b.current)return 0;var e=b.current,t=e.mouseX,n=e.mouseY,r=e.matrix,a=(0,c.H)(r),i=(0,c.DC)(t,n,a);return Math.min(Math.max(Math.floor(i.x/x),0),y)},updateScroll:function(e,t,n,r,a){if(b.current){var o=a?1:Math.pow(1.1,-t/50),s=a?-1*t*.1:0,u=a?0:-e/Math.pow(b.current.matrix.a,1/1.2),d={a:1,b:0,c:0,d:1,e:0,f:0},f={a:1,b:0,c:0,d:1,e:0,f:0},h=function(){var e,t,a,i=(e=n,t=r,a=b.current.matrix,(0,c.DC)(e,t,(0,c.H)(a)));d=(0,l.h9)((0,l.ee)(i.x,i.y),(0,l.Wi)(o),(0,l.ee)(-i.x,-i.y),(0,l.ee)(u,s)),f=(0,l.h9)(b.current.matrix,d)};h();var v=g*x*f.a,m=i-96;if(v<m&&o<1)o=1/(m/(g*x)),h();f.a>=1&&o>1&&(o=1,h()),v=g*x*f.a,f.e>i/2&&(u>0&&(u=0),n=o<1?Math.min(n,i/2):Math.max(n,i/2),h()),f.e<i/2-v&&(u<0&&(u=0),n=o>1?Math.min(n,i/2):Math.max(n,i/2),h()),f.f>0&&(s>0&&(s=0),h()),b.current.matrix=f}},draw:c.Ih,zoomToSearchResult:function(e,n){if(b.current){var r=e.start,a=e.end;n?function(e,t,n,r){var a=r?l.ci:l.Jn,i=n.start-1,o=(n.end-i)*a,c=t/o,s=Math.max((o*c-o)/2,0),u=Math.min(c,1),d=(0,l.h9)((0,l.ee)(-i*a*u+s,0),(0,l.Wi)(u));e.e=d.e,e.a=d.a}(b.current.matrix,i,{start:r,end:a+1},t):function(e,t,n,r){var a=r?l.ci:l.Jn,i=n.start-1,o=(t-(n.end-i)*a*e.a)/2;e.e=-i*a*e.a+o}(b.current.matrix,i,{start:r,end:a+1},t)}},ref:r,width:i,height:u,sequence:d,allAnnotations:f,codons:h,Search:v,FilterChromatogram:m,openAnnotationDialog:p,isProtein:t,chromatogramData:n,isCircularView:!1})},d=a.forwardRef((function(e,t){var n=e.width,a=e.height,i=e.sequence,o=e.annotations,l=e.codons,c=e.Search,s=e.FilterChromatogram,d=e.children,f=e.openAnnotationDialog,h=e.isProtein,v=e.chromatogramData,m=u({ref:t,width:n,height:a,sequence:i,allAnnotations:o,codons:l,Search:c,FilterChromatogram:s,openAnnotationDialog:f,isProtein:h,chromatogramData:v}),p=m.canvas,g=m.selectedAnnotations,y=m.circularSelection,b=m.clickedAnnotation,x=m.search,k=m.filterChromatogram,C=m.canvasRef,S=m.zoomToSearchResult,w=m.setCircularSelection,T=m.setSearchResults;return(0,r.jsx)(r.Fragment,{children:d?d({canvas:p,selectedAnnotations:g,circularSelections:y,setCircularSelection:w,clickedAnnotation:b,search:x,filterChromatogram:k,canvasRef:C,zoomToSearchResult:S,setSearchResults:T}):x?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:x},void 0),(0,r.jsx)("div",{children:p},void 0)]},void 0):p},void 0)})),f=n(2443),h=n(2439),v=n(7334),m=n(3480),p=n(4306),g=n(9907),y=n(9684),b=n(3273),x=n(7653),k=function(){return k=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},k.apply(this,arguments)},C=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},S=function(e){var t=C(a.useState(void 0),2),n=t[0],c=t[1],s=C(a.useState(void 0),2),u=s[0],S=s[1],w=function(t){var n=e.getAnnotationById(t);S(n)},T=C(a.useState(""),2),A=T[0],M=T[1],P=function(e){M("")},j=C(a.useState(!e.renderLinearByDefault&&!e.isProtein),2),E=j[0],R=j[1],I=E?i.z:d,N=e.AnnotationForm;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!A,autoHideDuration:1500,onClose:P,message:A,action:(0,r.jsx)(a.Fragment,{children:(0,r.jsx)(v.Z,k({size:"small","aria-label":"close",color:"inherit",onClick:P},{children:(0,r.jsx)(x.FU5,{fontSize:"small"},void 0)}),void 0)},void 0)},void 0),(0,r.jsx)(m.Z,k({onClose:function(){c(void 0)},open:!!n},{children:n&&(0,r.jsx)(N,{onSubmit:function(t){c(void 0),e.addAnnotation(t)},initialValues:n,title:"Create annotation"},void 0)}),void 0),(0,r.jsx)(m.Z,k({onClose:function(){S(void 0)},open:!!u},{children:u&&(0,r.jsx)(N,{onSubmit:function(t){S(void 0),e.updateAnnotation(t)},initialValues:u,title:"Edit annotation"},void 0)}),void 0),(0,r.jsx)(I,k({width:e.width,height:e.height,isProtein:!!e.isProtein,chromatogramData:e.chromatogramData,annotations:e.annotations,codons:l.Mu,sequence:e.sequence,Search:f.ol,FilterChromatogram:f.Mh,openAnnotationDialog:function(t){var n=e.getAnnotationById(t);S(n)}},{children:function(t){var n=t.canvas,a=t.search,i=t.filterChromatogram,l=t.selectedAnnotations,s=t.circularSelections,u=t.setCircularSelection,d=t.clickedAnnotation;return(0,r.jsxs)("div",k({style:{margin:"auto",maxWidth:e.width+"px"}},{children:[(0,r.jsxs)(o.kC,k({justifyContent:"space-between",alignItems:"center",style:{maxWidth:e.width+"px",height:"56px",padding:"0 10px"}},{children:[(0,r.jsx)(o.kC,k({style:{position:"relative",zIndex:1}},{children:(0,r.jsx)(f.o8,{selectedAnnotations:l,isCircularViewer:E,circularSelections:s,setCircularSelection:u,sequence:e.sequence,createAnnotation:function(e,t){c({locations:e,direction:t})},onHide:e.hideAnnotations,onShow:e.showAnnotations,onDelete:e.deleteAnnotations,onCopySuccess:function(){M("Successfully copied selected region to clipboard")},onCopyError:function(){M("Something went wrong when trying to copy the region")}},void 0)}),void 0),(0,r.jsxs)(o.kC,k({style:{gap:"20px",alignItems:"center"}},{children:[i,a]}),void 0)]}),void 0),(0,r.jsxs)("div",k({style:{position:"relative"}},{children:[n,!e.isProtein&&(0,r.jsx)("div",k({style:{position:"absolute",right:"80px",bottom:"160px"}},{children:(0,r.jsx)(p.Z,k({component:"div"},{children:(0,r.jsxs)(g.ZP,k({component:"label",container:!0,alignItems:"center",spacing:1},{children:[(0,r.jsx)(g.ZP,k({item:!0},{children:"Linear"}),void 0),(0,r.jsx)(g.ZP,k({item:!0},{children:(0,r.jsx)(y.Z,{checked:E,onChange:function(e){R(e.target.checked)},name:"circularswitch"},void 0)}),void 0),(0,r.jsx)(g.ZP,k({item:!0},{children:"Circular"}),void 0)]}),void 0)}),void 0)}),void 0)]}),void 0),(0,r.jsx)(o.kC,k({style:{height:"60px"}},{children:l.length>0&&(0,r.jsxs)(o.kC,k({alignItems:"center",justifyContent:"flex-start",style:{maxWidth:e.width+"px",overflowX:"scroll"}},{children:[d&&(0,r.jsx)(b.Z,{label:e.getAnnotationLabelById(d),color:"primary",onClick:function(){w(d)},style:{marginRight:"8px"}},void 0),l.filter((function(e){return e!==d})).map((function(t){return(0,r.jsx)(b.Z,{label:e.getAnnotationLabelById(t),color:"default",onClick:function(){w(t)},style:{marginRight:"8px"}},t)}))]}),void 0)}),void 0)]}),void 0)}}),void 0)]},void 0)}},5571:function(e,t,n){n.d(t,{n:function(){return l}});var r=n(8851),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a.apply(this,arguments)},i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},o=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},l=function(e){void 0===e&&(e=[]);var t=i(r.useState(e),2),n=t[0],l=t[1],c=Object.fromEntries(n.map((function(e){return[e.id,e]})));return{annotations:n,getAnnotationLabelById:function(e){var t,n=null===(t=c[e])||void 0===t?void 0:t.label;if(!n)throw new Error("could not fetch label for "+e);return n},getAnnotationById:function(e){var t=c[e];if(!t)throw new Error("could not fetch annot for "+e);return t},addAnnotation:function(e){l(o(o([],i(n)),[e]))},deleteAnnotations:function(e){l(n.filter((function(t){return!e.includes(t.id)})))},showAnnotations:function(e){l(n.map((function(t){return e.includes(t.id)?a(a({},t),{hidden:!1}):t})))},hideAnnotations:function(e){l(n.map((function(t){return e.includes(t.id)?a(a({},t),{hidden:!0}):t})))},updateAnnotation:function(e){l(n.map((function(t){return e.id===t.id?e:t})))}}}},1974:function(e,t,n){var r=n(8851);t.Z=function(e){var t=e.children,n=e.hidden,a=e.className;return r.createElement("div",{role:"tabpanel",hidden:n,className:a},t)}},8563:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(801),a=n(8851),i=n(1436),o=n(4539),l=n(6224),c="tabItem_ocwF";function s(e){var t,n,i,s=e.lazy,u=e.block,d=e.defaultValue,f=e.values,h=e.groupId,v=e.className,m=a.Children.map(e.children,(function(e){if((0,a.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),p=null!=f?f:m.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),g=(0,o.lx)(p,(function(e,t){return e.value===t.value}));if(g.length>0)throw new Error('Docusaurus error: Duplicate values "'+g.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var y=null===d?d:null!=(t=null!=d?d:null==(n=m.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(i=m[0])?void 0:i.props.value;if(null!==y&&!p.some((function(e){return e.value===y})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+p.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var b=(0,o.UB)(),x=b.tabGroupChoices,k=b.setTabGroupChoices,C=(0,a.useState)(y),S=C[0],w=C[1],T=[],A=(0,o.o5)().blockElementScrollPositionUntilNextRender;if(null!=h){var M=x[h];null!=M&&M!==S&&p.some((function(e){return e.value===M}))&&w(M)}var P=function(e){var t=e.currentTarget,n=T.indexOf(t),r=p[n].value;r!==S&&(A(t),w(r),null!=h&&k(h,r))},j=function(e){var t,n=null;switch(e.key){case"ArrowRight":var r=T.indexOf(e.currentTarget)+1;n=T[r]||T[0];break;case"ArrowLeft":var a=T.indexOf(e.currentTarget)-1;n=T[a]||T[T.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":u},v)},p.map((function(e){var t=e.value,n=e.label,i=e.attributes;return a.createElement("li",(0,r.Z)({role:"tab",tabIndex:S===t?0:-1,"aria-selected":S===t,key:t,ref:function(e){return T.push(e)},onKeyDown:j,onFocus:P,onClick:P},i,{className:(0,l.Z)("tabs__item",c,null==i?void 0:i.className,{"tabs__item--active":S===t})}),null!=n?n:t)}))),s?(0,a.cloneElement)(m.filter((function(e){return e.props.value===S}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},m.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==S})}))))}function u(e){var t=(0,i.Z)();return a.createElement(s,(0,r.Z)({key:String(t)},e))}},6179:function(e,t,n){n.d(t,{z:function(){return s}});var r=n(8927),a=n(8851),i=n(7019),o=n(8064),l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},c=function(e){var t=e.isProtein,n=e.ref,r=e.width,c=e.height,s=e.sequence,u=e.allAnnotations,d=e.codons,f=e.Search,h=e.openAnnotationDialog,v=s.length,m=(0,i.QO)(r,s,t),p=l(a.useState([{state:"selected",start:0,end:0,antiClockwise:void 0}]),2),g=p[0],y=p[1],b=l(a.useState(void 0),2),x=b[0],k=b[1],C=function(){if(m.current){var e=(0,o.Ej)({data:m.current,sequence:s,w:r,h:c,circularSelection:g}).angleOffset;m.current.circluarCamera.value.angle=0,m.current.circluarCamera.angleOffset=e,e>Math.PI&&(m.current.circluarCamera.angleOffset=-(2*Math.PI-e)),m.current.circluarCamera.scrollOffsetZooming=0,m.current.circluarCamera.scrollOffsetZoomed=0}};return(0,i.bc)({resetAngularScroll:C,circularSelection:g,setCircularSelection:function(e,t){k(e),y(t)},clickedAnnotation:x,renderData:m,getCaretPosition:function(){return m.current?(0,o.Ej)({data:m.current,sequence:s,w:r,h:c,circularSelection:g}).hoveringCaretPosition:0},updateScroll:function(e,t){!function(e,t){if(m.current){var n=Math.abs(e)>Math.abs(t)?0:-t/7500,a=Math.abs(e)>Math.abs(t)?-e/1e3:0;(0,o.QJ)(n,m.current.circluarCamera.value,m.current.circluarCamera.target);var i=a*(300/(0,o.Ej)({data:m.current,sequence:s,w:r,h:c,circularSelection:g}).radius);1===m.current.circluarCamera.value.angle?m.current.circluarCamera.scrollOffsetZoomed+=i:m.current.circluarCamera.scrollOffsetZooming+=i,m.current.circluarCamera.angleOffset=(2*Math.PI+m.current.circluarCamera.angleOffset)%(2*Math.PI)}}(e,t)},draw:o.Es,zoomToSearchResult:function(e,t){m.current&&(C(),m.current.circluarCamera.value={zoom:t?1:m.current.circluarCamera.value.zoom,angle:1,radius:t?(0,o.TC)(r,c,v,1,e):m.current.circluarCamera.value.radius},(0,o.Gk)(m.current.circluarCamera.value,m.current.circluarCamera.target))},ref:n,width:r,height:c,sequence:s,allAnnotations:u,codons:d,Search:f,openAnnotationDialog:h,isProtein:t,isCircularView:!0})},s=a.forwardRef((function(e,t){var n=e.width,a=e.height,i=e.sequence,o=e.annotations,l=e.codons,s=e.Search,u=e.children,d=e.openAnnotationDialog,f=e.isProtein,h=c({ref:t,width:n,height:a,sequence:i,allAnnotations:o,codons:l,Search:s,openAnnotationDialog:d,isProtein:f}),v=h.canvas,m=h.selectedAnnotations,p=h.circularSelection,g=h.clickedAnnotation,y=h.search,b=h.canvasRef,x=h.zoomToSearchResult,k=h.setSearchResults,C=h.setCircularSelection;return(0,r.jsx)(r.Fragment,{children:u?u({canvas:v,selectedAnnotations:m,circularSelections:p,setCircularSelection:C,clickedAnnotation:g,search:y,canvasRef:b,zoomToSearchResult:x,setSearchResults:k}):y?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:y},void 0),(0,r.jsx)("div",{children:v},void 0)]},void 0):v},void 0)}))},8390:function(e,t,n){n.d(t,{N:function(){return x}});var r=n(8927),a=n(3048),i=n(5728),o=n(354),l=n(8305),c=n(5562),s=n(3467),u=n(2067),d=n(9116),f=n(7334),h=n(4978),v=n(4677),m=n(7653),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},p.apply(this,arguments)},g=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},y=function e(t){return void 0===t&&(t=""),t?((Number(t)^16*Math.random())>>Number(t)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e)},b={marginBottom:16},x=function(e){var t=e.onSubmit,n=e.initialValues,x=e.title;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{children:x},void 0),(0,r.jsx)(o.Z,p({style:{paddingTop:8}},{children:(0,r.jsx)(v.J9,p({initialValues:p({id:y(),type:"OTHER",label:"",color:"#000000",locations:[],hidden:!1,displayAsSequence:!1,rightTag:"",displayLabel:"",direction:a.fn.FORWARD,cleavageSites:[],fivePExtension:""},n),onSubmit:function(e,n){n.setSubmitting;t(e)},validate:function(e){var t={};return e.label||(t.label="Required"),"DNA_RE_NUC"===e.type&&0===e.cleavageSites.length&&(t.cleavageSites="Required"),0===e.locations.length&&(t.locations="Required"),t}},{children:function(e){return(0,r.jsxs)("form",p({onSubmit:e.handleSubmit},{children:[(0,r.jsx)(l.Z,{fullWidth:!0,id:"label",name:"label",label:"Label",value:e.values.label,onChange:e.handleChange,error:e.touched.label&&Boolean(e.errors.label),helperText:e.touched.label&&e.errors.label,style:b},void 0),(0,r.jsx)(l.Z,{id:"color",name:"color",label:"Color",type:"color",style:p({width:"100px"},b),inputProps:{style:{height:32,margin:0,padding:4}},value:e.values.color,onChange:e.handleChange,error:e.touched.color&&Boolean(e.errors.color),helperText:e.touched.color&&e.errors.color},void 0),(0,r.jsxs)("div",p({style:b},{children:[(0,r.jsx)(v.Bc,{name:"displayAsSequence"},void 0),(0,r.jsx)(c.Z,{control:(0,r.jsx)(s.Z,{checked:e.values.displayAsSequence,onChange:e.handleChange,name:"displayAsSequence",color:"primary"},void 0),label:"Display as sequence"},void 0)]}),void 0),(0,r.jsxs)("div",p({style:b},{children:[(0,r.jsx)(v.Bc,{name:"hidden"},void 0),(0,r.jsx)(c.Z,{control:(0,r.jsx)(s.Z,{checked:e.values.hidden,onChange:e.handleChange,name:"hidden",color:"primary"},void 0),label:"Hidden"},void 0)]}),void 0),(0,r.jsx)(l.Z,{fullWidth:!0,id:"rightTag",name:"rightTag",label:"Right tag",value:e.values.rightTag,onChange:e.handleChange,error:e.touched.rightTag&&Boolean(e.errors.rightTag),helperText:e.touched.rightTag&&e.errors.rightTag,style:b},void 0),(0,r.jsx)(l.Z,{fullWidth:!0,id:"displayLabel",name:"displayLabel",label:"Display label",value:e.values.displayLabel,onChange:e.handleChange,error:e.touched.displayLabel&&Boolean(e.errors.displayLabel),helperText:e.touched.displayLabel&&e.errors.displayLabel,style:b},void 0),(0,r.jsx)(l.Z,p({value:e.values.type,onChange:e.handleChange,style:b,error:e.touched.type&&Boolean(e.errors.type),select:!0,name:"type",label:"Type"},{children:[(0,a.bc)("DNA oligo","DNA_OLIGO"),(0,a.bc)("DNA restriction nuclease","DNA_RE_NUC"),(0,a.bc)("Other","OTHER")].map((function(e){var t=g(e,2),n=t[0],a=t[1];return(0,r.jsx)(u.Z,p({value:a,id:a},{children:n}),a)}))}),void 0),(0,r.jsx)(l.Z,p({value:e.values.direction,onChange:e.handleChange,error:e.touched.direction&&Boolean(e.errors.direction),name:"direction",label:"Direction",style:b},{children:[(0,a.bc)("Forward",a.fn.FORWARD),(0,a.bc)("Reverse",a.fn.REVERSE)].map((function(e){var t=g(e,2),n=t[0],a=t[1];return(0,r.jsx)(u.Z,p({value:a,id:a},{children:n}),a)}))}),void 0),"DNA_OLIGO"===e.values.type&&(0,r.jsx)(l.Z,{style:b,fullWidth:!0,id:"fivePExtension",name:"fivePExtension",label:"5PExtension",value:e.values.fivePExtension,onChange:e.handleChange,error:e.touched.fivePExtension&&Boolean(e.errors.fivePExtension),helperText:e.touched.fivePExtension&&e.errors.fivePExtension},void 0),"DNA_RE_NUC"===e.values.type&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,p({id:"select-cleavageSites",shrink:!0,style:b},{children:"Cleavage sites"}),void 0),(0,r.jsx)(v.F2,p({name:"cleavageSites"},{children:function(t){t.insert;var n=t.remove,i=t.push;return(0,r.jsxs)("div",p({style:b},{children:[e.values.cleavageSites.length>0&&e.values.cleavageSites.map((function(t,a){return(0,r.jsxs)("div",p({className:"row",style:b},{children:[(0,r.jsx)("div",p({className:"col"},{children:(0,r.jsx)(l.Z,{id:"cleavageSites."+a+".0",name:"cleavageSites."+a+".0",type:"number",label:"Left",value:(0,v.u9)(e.values,"cleavageSites."+a+".0"),onChange:e.handleChange,error:(0,v.u9)(e.touched,"cleavageSites."+a+".0")&&Boolean((0,v.u9)(e.errors,"cleavageSites."+a+".0")),helperText:(0,v.u9)(e.touched,"cleavageSites."+a+".0")&&(0,v.u9)(e.errors,"cleavageSites."+a+".0")},void 0)}),void 0),(0,r.jsx)("div",p({className:"col"},{children:(0,r.jsx)(l.Z,{id:"cleavageSites."+a+".1",name:"cleavageSites."+a+".1",type:"number",label:"Right",value:(0,v.u9)(e.values,"cleavageSites."+a+".1"),onChange:e.handleChange,error:(0,v.u9)(e.touched,"cleavageSites."+a+".1")&&Boolean((0,v.u9)(e.errors,"cleavageSites."+a+".1")),helperText:(0,v.u9)(e.touched,"cleavageSites."+a+".1")&&(0,v.u9)(e.errors,"cleavageSites."+a+".1")},void 0)}),void 0),(0,r.jsx)("div",p({className:"col"},{children:(0,r.jsx)(f.Z,p({onClick:function(){return n(a)}},{children:(0,r.jsx)(m.FU5,{},void 0)}),void 0)}),void 0)]}),a)})),(0,r.jsx)(h.Z,p({onClick:function(){return i((0,a.bc)(0,0))},variant:"outlined",style:{marginTop:"8px"}},{children:"Add cleavage site"}),void 0)]}),void 0)}}),void 0),(0,r.jsx)(v.Bc,{name:"cleavageSites"},void 0)]},void 0),(0,r.jsx)(d.Z,p({id:"select-locations",shrink:!0},{children:"Locations"}),void 0),(0,r.jsx)(v.F2,p({name:"locations"},{children:function(t){t.insert;var n=t.remove,i=t.push;return(0,r.jsxs)("div",p({style:b},{children:[e.values.locations.length>0&&e.values.locations.map((function(t,a){return(0,r.jsxs)("div",p({className:"row",style:b},{children:[(0,r.jsx)("div",p({className:"col"},{children:(0,r.jsx)(l.Z,{id:"locations."+a+".0",name:"locations."+a+".0",type:"number",label:"Left",value:(0,v.u9)(e.values,"locations."+a+".0"),onChange:e.handleChange,error:(0,v.u9)(e.touched,"locations."+a+".0")&&Boolean((0,v.u9)(e.errors,"locations."+a+".0")),helperText:(0,v.u9)(e.touched,"locations."+a+".0")&&(0,v.u9)(e.errors,"locations."+a+".0")},void 0)}),void 0),(0,r.jsx)("div",p({className:"col"},{children:(0,r.jsx)(l.Z,{id:"locations."+a+".1",name:"locations."+a+".1",type:"number",label:"Right",value:(0,v.u9)(e.values,"locations."+a+".1"),onChange:e.handleChange,error:(0,v.u9)(e.touched,"locations."+a+".1")&&Boolean((0,v.u9)(e.errors,"locations."+a+".1")),helperText:(0,v.u9)(e.touched,"locations."+a+".1")&&(0,v.u9)(e.errors,"locations."+a+".1")},void 0)}),void 0),(0,r.jsx)("div",p({className:"col",style:{display:"flex",alignItems:"center"}},{children:(0,r.jsx)(f.Z,p({onClick:function(){return n(a)}},{children:(0,r.jsx)(m.FU5,{},void 0)}),void 0)}),void 0)]}),a)})),(0,r.jsx)(h.Z,p({onClick:function(){return i((0,a.bc)(0,0))},variant:"outlined",style:{marginTop:"8px"}},{children:"Add location"}),void 0)]}),void 0)}}),void 0),(0,r.jsx)("div",{children:(0,r.jsx)(v.Bc,{name:"locations"},void 0)},void 0),(0,r.jsx)(h.Z,p({color:"primary",variant:"contained",type:"submit",disabled:e.isSubmitting},{children:"Submit"}),void 0)]}),void 0)}}),void 0)}),void 0)]},void 0)}},2443:function(e,t,n){n.d(t,{Mh:function(){return E},ol:function(){return g},o8:function(){return k}});var r=n(8927),a=n(8851),i=n(3048),o=n(324),l=n(8445),c=n(7334),s=n(5460),u=n(3344),d=n(6873),f=n(8650),h=n(7653),v=n(7019),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},m.apply(this,arguments)},p=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},g=function(e){var t=e.sequence,n=e.zoomOnResult,g=e.onSearchResults,y=e.spinOnResult,b=e.isProtein,x=p(a.useState(-1),2),k=x[0],C=x[1],S=p(a.useState(!1),2),w=S[0],T=S[1],A=p(a.useState(""),2),M=A[0],P=A[1],j=a.useCallback((function(e,t){if(t)try{return(0,i.zO)(!1,e)}catch(n){return""}return e}),[]),E=function(e,n,r){var a=j(e,n),o=t.toUpperCase();if(!a.length)return[];for(var l=[],c=0;c<o.length-a.length;c+=1)(0,i.$X)(b,o.substr(c,a.length),a)&&l.push({start:c,end:c+a.length,active:l.length===r,complement:n});return l},R=function(e,t,n,r){var a=n,i=r,o=E(e,t,a);o.length>0&&-1===a&&(a=0,o[0].active=!0,i=!0),P(e),T(t),C(a),g(o),i&&y({start:o[a].start,end:o[a].end,active:o[a].active,complement:t})},I=E(M,w,k),N=p(a.useState(!1),2),D=N[0],O=N[1],L=function(){O(!1)};return(0,r.jsxs)("div",m({style:{display:"flex",alignItems:"center",userSelect:"none"}},{children:[(0,r.jsx)("div",m({style:{paddingRight:"0px"}},{children:(0,r.jsx)(o.Z,{placeholder:"AHNRKYCDGT",endAdornment:(0,r.jsxs)(v.kC,m({alignItems:"center"},{children:[!b&&(0,r.jsx)(l.Z,m({title:"Search by reverse complement"},{children:(0,r.jsx)(c.Z,m({size:"small",onClick:function(){R(M,!w,-1,!1)}},{children:w?(0,r.jsx)(h.y5A,{},void 0):(0,r.jsx)(h.hrt,{},void 0)}),void 0)}),void 0),(0,r.jsx)(l.Z,m({title:"Zoom on result"},{children:(0,r.jsx)(c.Z,m({onClick:function(){I.length>0&&-1!==k&&n({start:I[k].start,end:I[k].end,active:I[k].active,complement:w})},size:"small"},{children:(0,r.jsx)(f.FKI,{},void 0)}),void 0)}),void 0),(0,r.jsx)(s.Z,m({onClickAway:L},{children:(0,r.jsx)("div",{children:(0,r.jsx)(l.Z,m({title:"Search by IUPAC nucleotide codes: https://www.bioinformatics.org/sms/iupac.html",disableHoverListener:!0,disableFocusListener:!0,disableTouchListener:!0,open:D,PopperProps:{disablePortal:!0},onClose:L},{children:(0,r.jsx)(c.Z,m({size:"small",onClick:function(){O(!0)}},{children:(0,r.jsx)(u.KpA,{},void 0)}),void 0)}),void 0)},void 0)}),void 0)]}),void 0),value:M,onChange:function(e){R(e.currentTarget.value.toUpperCase(),w,-1,!1)}},void 0)}),void 0),(0,r.jsxs)("div",m({style:{paddingLeft:"8px"}},{children:[k+1,"/",I.length]}),void 0),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Z,m({size:"small",onClick:function(){if(0!==I.length){var e=k+1;e>=I.length&&(e=0),R(M,w,e,!0)}}},{children:(0,r.jsx)(d.IkZ,{},void 0)}),void 0),(0,r.jsx)(c.Z,m({size:"small",onClick:function(){if(0!==I.length){var e=k-1;e<0&&(e=I.length-1),R(M,w,e,!0)}}},{children:(0,r.jsx)(d.qL$,{},void 0)}),void 0)]},void 0)]}),void 0)},y=n(5686),b=function(){return b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},b.apply(this,arguments)},x=function(e){var t=e.children;return(0,r.jsx)("div",b({style:{paddingRight:"8px"}},{children:t}),void 0)},k=function(e){var t,n=e.selectedAnnotations,o=e.circularSelections,l=e.setCircularSelection,c=e.isCircularViewer,s=e.sequence,u=e.createAnnotation,f=e.onHide,v=e.onShow,m=e.onDelete,p=e.onCopySuccess,g=e.onCopyError,k=function(){g&&g()},C=function(){var e;if("Range"!==(null===(e=window.getSelection())||void 0===e?void 0:e.type)){var t=o.map((function(e){if(!1===e.antiClockwise)return e.start>e.end?s.slice(e.start)+s.slice(0,e.end+1):s.slice(e.start,e.end+1);if(!0===e.antiClockwise){var t=function(e){return e.split("").reverse().map((function(e){return(0,i.Rj)(e)})).join("")};return e.start<e.end?t(s.slice(e.end)+s.slice(0,e.start+1)):t(s.slice(e.end,e.start+1))}return""})).join("\n");""!==t&&navigator.permissions.query({name:"clipboard-write"}).then((function(e){"granted"==e.state||"prompt"==e.state?navigator.clipboard.writeText(t).then((function(){p&&p()}),(function(){k()})):k()})).catch((function(){k()}))}},S=a.useRef(!1),w=function(e){!S.current&&e.metaKey&&67===e.keyCode?(S.current=!0,C()):S.current=!1},T=function(e){return o.find((function(t){return t.antiClockwise!==e}))},A=a.useRef(w);A.current=w,a.useEffect((function(){var e=function(e){A.current(e)};return window.addEventListener("keydown",e,{passive:!0}),function(){window.removeEventListener("keydown",e)}}),[]),a.useEffect((function(){var e=function(){S.current=!1};return window.addEventListener("up",e),function(){window.removeEventListener("up",e)}}),[]);var M=void 0!==(null===(t=o[0])||void 0===t?void 0:t.antiClockwise);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x,{children:(0,r.jsx)(y.Z,b({disabled:!M,onClick:function(){var e=o[0].antiClockwise;if(T(e))alert("All selections must have the same direction when creating a new annotation");else{var t=o.map((function(e){return!0===e.antiClockwise?[e.end+1,e.start+1]:[e.start+1,e.end+1]}));u(t,e?i.fn.REVERSE:i.fn.FORWARD)}},color:"primary",size:"small"},{children:(0,r.jsx)(h.x06,{},void 0)}),void 0)},void 0),M&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x,{children:(0,r.jsx)(y.Z,b({onClick:function(){C()},size:"small"},{children:(0,r.jsx)(d.Dup,{},void 0)}),void 0)},void 0),(0,r.jsx)(x,{children:(0,r.jsx)(y.Z,b({size:"small",onClick:function(){f(n)}},{children:(0,r.jsx)(d.tgn,{},void 0)}),void 0)},void 0),(0,r.jsx)(x,{children:(0,r.jsx)(y.Z,b({size:"small",onClick:function(){v(n)}},{children:(0,r.jsx)(d.dSq,{},void 0)}),void 0)},void 0),c&&(0,r.jsx)(x,{children:(0,r.jsx)(y.Z,b({size:"small",onClick:function(){var e=o[0].antiClockwise;if(T(e))alert("All selections must have the same direction when using this feature");else{var t=o.length;0!==t&&l(void 0,o.sort((function(e,t){return e.start-t.start})).map((function(e,n,r){var a=e.antiClockwise?(n+1)%t:(n+t-1)%t,i=e.antiClockwise?-1:1,o=r[a].end+i;return b(b({},e),{start:e.start-i,end:o,antiClockwise:!e.antiClockwise})})))}}},{children:(0,r.jsx)(d.FxE,{},void 0)}),void 0)},void 0),(0,r.jsx)(x,{children:(0,r.jsx)(y.Z,b({size:"small",style:{backgroundColor:i.uF.accent4Light,color:i.uF.secondaryBackground},onClick:function(){m(n)}},{children:(0,r.jsx)(d.Xm5,{},void 0)}),void 0)},void 0)]},void 0)]},void 0)},C=n(9805),S=n(3467),w=function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},w.apply(this,arguments)},T=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},A=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},M=["A","C","G","T","phred"],P=function(e){return"phred"===e?"#1976d2":i.SD[e]},j=function(e){var t=e.base,n=e.checked;return(0,r.jsx)(C.Z,w({sx:{px:1.5,minWidth:"30px",border:"1px solid "+P(t),color:n?"white":P(t),backgroundColor:n?P(t):"rgba(0,0,0,0.01)",borderRadius:"40px",boxShadow:n?3:0,opacity:n?1:.75}},{children:t}),void 0)},E=function(e){var t=e.optionsToRender,n=e.setOptionsToRender,a=function(e,r){if(r)n(A(A([],T(t)),[e.target.value]));else{var a=t.filter((function(t){return t!==e.target.value}));n(a)}};return(0,r.jsx)(C.Z,w({sx:{display:"flex"}},{children:M.map((function(e){return(0,r.jsx)(S.Z,{sx:{px:.5},size:"small",icon:(0,r.jsx)(j,{base:e,checked:!1},void 0),checkedIcon:(0,r.jsx)(j,{base:e,checked:!0},void 0),onChange:a,value:e,checked:t.includes(e),name:e,disableRipple:!0},e)}))}),void 0)}},7019:function(e,t,n){n.d(t,{kC:function(){return i},$P:function(){return s},bc:function(){return v},QO:function(){return p}});var r=n(8927),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a.apply(this,arguments)},i=function(e){var t=e.children,n=e.style,i=e.alignItems,o=e.justifyContent;return(0,r.jsx)("div",a({style:a({display:"flex",alignItems:i,justifyContent:o},n)},{children:t}),void 0)},o=n(8851),l=n(3048),c=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},s=function(){var e=c(o.useState(null),2),t=e[0],n=e[1],r=o.useCallback((function(e){e&&n(e)}),[]);return(0,l.bc)(t,r)},u=function(e,t,n,r,a,i,l){var c=o.useRef({onClick:t,onEndDrag:r,onMouseMove:i,onScroll:a,onStartDrag:n,onDblClick:l});c.current={onClick:t,onEndDrag:r,onMouseMove:i,onScroll:a,onStartDrag:n,onDblClick:l},o.useEffect((function(){var t=function(e){c.current.onEndDrag(e)};if(e){var n=function(e){c.current.onClick(e)},r=function(e){e.stopPropagation(),function(e){c.current.onStartDrag(e)}(e)},a=function(e){e.stopPropagation(),t(e)},i=function(e){t(e)},o=function(e){c.current.onScroll(e),e.preventDefault(),e.stopPropagation()},l=function(e){c.current.onMouseMove(e)},s=function(e){c.current.onDblClick(e)},u={passive:!0};return e.addEventListener("click",n,u),e.addEventListener("mousedown",r),window.addEventListener("mouseup",a),e.addEventListener("mouseup",a),window.addEventListener("mouseleave",i,u),e.addEventListener("mouseleave",i,u),e.addEventListener("wheel",o),e.addEventListener("mousemove",l,u),e.addEventListener("dblclick",s,u),function(){e.removeEventListener("click",n),e.removeEventListener("mousedown",r),window.removeEventListener("mouseup",a),e.removeEventListener("mouseup",a),window.removeEventListener("mouseleave",i),e.removeEventListener("mouseleave",i),e.removeEventListener("wheel",o),e.removeEventListener("mousemove",l),e.removeEventListener("dblclick",s)}}}),[e])},d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},d.apply(this,arguments)},f=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},h=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},v=function(e){var t=e.isProtein,n=e.chromatogramData,a=e.clickedAnnotation,i=e.renderData,c=e.circularSelection,v=e.setCircularSelection,m=e.getCaretPosition,p=e.updateScroll,g=e.resetAngularScroll,y=e.zoomToSearchResult,b=e.draw,x=e.ref,k=e.width,C=e.height,S=e.sequence,w=e.allAnnotations,T=e.codons,A=e.Search,M=e.FilterChromatogram,P=e.openAnnotationDialog,j=e.isCircularView,E=S.length,R=f(o.useState([]),2),I=R[0],N=R[1],D=f((0,o.useState)(null),2),O=D[0],L=D[1],q=f(s(),2),G=q[0],F=q[1],Z=o.useMemo((function(){var e=new Set;return w.forEach((function(t){t.locations.forEach((function(n){c.forEach((function(r){(0,l.a$)([n[0]-1,n[1]-1],r)&&e.add(t.id)}))}))})),h([],f(e))}),[w,c]),B=o.useMemo((function(){return w.filter((function(e){return!e.hidden}))}),[w]),W=o.useMemo((function(){return(0,l.Oq)(B,E)}),[B,E]),V=f(o.useState(),2),z=V[0],U=V[1],_=f(o.useState(void 0),2),H=_[0],Y=_[1],K=f(o.useState(["A","C","G","T","phred"]),2),X=K[0],Q=K[1];o.useEffect((function(){O&&Y((0,l.Dc)(O).ratio)}),[O]);var J=void 0!==H&&O&&i.current?{context:O,ratio:H,data:i.current}:void 0,$=o.useRef(!1),ee=function(){if(J){$.current=!0;var e=b({codons:T,annotationLevels:W,c:J.context,w:k,h:C,ratio:J.ratio,data:J.data,sequence:S,circularSelection:c,searchResults:I,renderStateRef:{hoveringFeature:z,clickedFeatures:Z},isProtein:t,filterChromOptions:X,chromatogramData:n}).hoveringFeature;U(e)}},te=function(e,t){if(e){var n=B.filter((function(t){return t.id===e})).flatMap((function(e){var t=e.direction===l.fn.REVERSE;return e.locations.map((function(e){var n={start:e[t?1:0]-1,end:e[t?0:1]-1};return d({state:"selected",antiClockwise:t},n)}))}));i.current&&g&&g(),v(e,t?h(h([],f(c)),f(n)):n)}};x&&("current"in x?x.current={onClickAnnotation:te}:x({onClickAnnotation:te}));var ne=o.useRef(void 0),re=(0,l.Ds)((function(e){e.preventDefault(),p(e.deltaX,e.deltaY,e.offsetX,e.offsetY,e.shiftKey),ee()})),ae=!!c.find((function(e){return"selecting"===e.state})),ie=function(e){if(!ae)if(z)ne.current=z;else if(ne.current=void 0,i.current){var t=m(),n=h([],f(c));e.metaKey||e.shiftKey||n.splice(0,n.length);var r=(0,l.IW)(t,n);r?(r.state="selecting",r.start===r.end&&n.splice(n.indexOf(r),1)):n.push({state:"selecting",start:t,end:t,antiClockwise:void 0}),v(void 0,n),g&&g(),ee()}},oe=function(e){if(z&&z===ne.current)return te(z,e.metaKey),void(ne.current=void 0);ne.current=void 0,ae&&v(void 0,c.map((function(e){return d(d({},e),{state:"selected"})}))),ee()},le=o.useRef(!1);le.current=!1;var ce=(0,l.Ds)((function(e){if(!z&&ne.current&&(ne.current=void 0),1===e.buttons&&!ae&&void 0===ne.current&&!1===le.current)return le.current=!0,void ie(e);if(0===e.buttons&&ae&&void 0===ne.current&&!1===le.current)return le.current=!0,void oe(e);var t=i.current;if(t){t.mouseX=e.offsetX,t.mouseY=e.offsetY;var n=m();if(1===e.buttons){var r=h([],f(c)),a=r.find((function(e){return"selecting"===e.state}));if(a){void 0===a.antiClockwise?a.start!==n&&(a.antiClockwise=n<a.start):a.start===n&&(a.antiClockwise=void 0),void 0!==a.antiClockwise&&(0,l.Ax)(E,a.antiClockwise,a.start,n)-(0,l.Ax)(E,a.antiClockwise,a.start,a.end)>.5&&(a.antiClockwise=!a.antiClockwise),a.end=n;var o=r.filter((function(e){return e!==a&&((0,l.cd)(e.start,a)||(0,l.cd)(e.end,a))}));o.length>0&&o.forEach((function(e){r.splice(r.indexOf(e),1)})),v(void 0,r)}}ee()}}));u(G,(function(e){var t;if(e.shiftKey){var n=null===(t=c[0])||void 0===t?void 0:t.start,r=m();void 0!==n&&v(void 0,[{start:n,end:r,antiClockwise:function(){if(n!==r)return j?n>r?n-r<E/2:r-n>E/2:n>r}(),state:"selecting"}])}}),ie,oe,re,ce,(function(e){a&&P&&P(a)}));var se=o.useRef(ee);se.current=ee,(0,o.useEffect)((function(){G&&((0,l.IS)(G,k,C),L(G.getContext("2d")))}),[G,C,L,k]),(0,o.useEffect)((function(){J&&!$.current&&se.current()}),[J]),o.useEffect((function(){se.current()}),[c,w,k,C,t,a,S,T,I,X]),o.useLayoutEffect((function(){se.current()}),[c,w,k,C,t,a,S,T,I]);var ue=(0,r.jsx)("canvas",{ref:F},void 0),de=function(e,t){y(e,t),v(void 0,[{state:"selected",start:e.complement?e.end-1:e.start,end:e.complement?e.start:e.end-1,antiClockwise:e.complement}]),se.current()},fe=A&&(0,r.jsx)(A,{isProtein:t,sequence:S,zoomOnResult:function(e){de(e,!0)},onSearchResults:function(e){N(e)},spinOnResult:function(e){de(e,!1)}},void 0),he=n&&M&&(0,r.jsx)(M,{optionsToRender:X,setOptionsToRender:function(e){return Q(e)}},void 0);return{canvas:ue,selectedAnnotations:Z,circularSelection:c,setCircularSelection:v,clickedAnnotation:a,search:fe,filterChromatogram:he,canvasRef:F,zoomToSearchResult:y,setSearchResults:N,render:ee}},m=function(e,t,n){var r=(e-96)/(t*(n?l.ci:l.Jn));return(0,l.h9)((0,l.ee)(48,0),(0,l.Wi)(r))},p=function(e,t,n){var r=o.useRef(null);return!r.current&&e&&(r.current={mouseX:0,mouseY:0,matrix:m(e,t.length,n),circluarCamera:{angleOffset:0,scrollOffsetZoomed:0,scrollOffsetZooming:0,value:{zoom:0,angle:0,radius:0},target:{zoom:1,angle:1,radius:1}}}),r}},8064:function(e,t,n){n.d(t,{Gk:function(){return i},Es:function(){return h},Ej:function(){return u},TC:function(){return s},QJ:function(){return o}});var r=n(3048),a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.reduce((function(e,t){return e+t}),0),r=n%(2*Math.PI);return r<0?2*Math.PI+r:r},i=function(e,t){e.zoom=Math.min(Math.max(e.zoom,0),t.zoom),e.angle=Math.min(Math.max(e.angle,0),t.angle),e.radius=Math.min(Math.max(e.radius,0),t.radius)},o=function(e,t,n){0!==e&&(e>0?t.angle<n.angle||t.zoom<n.zoom?(t.angle+=25*e,t.zoom+=7*e):t.radius+=7*e:t.radius>0?t.radius+=7*e:t.zoom+=7*e,i(t,n))},l=function(e){return 32*e/(2*Math.PI)},c=function(e,t,n){var r=Math.min(e,t)/2*.5,a=Math.min(e,t)/12;return a+(r-a)*n},s=function(e,t,n,r,a){var i=l(n),o=function(e,t,n){var r=n.end,a=n.start,i=l(e);return Math.min(t/(2*Math.sin(Math.PI*Math.min(r-a+2,e/2)/e)),i)}(n,e,a),s=c(e,t,r);return(o-s)/(i-s)},u=function(e){var t=e.w,n=e.h,i=e.data,o=e.sequence,s=e.circularSelection,u=n/2,d=t/2,f=o.length,h=f-1,v=l(f),m=function(e,t){return Math.min(e,t)/8}(t,n),p=c(t,n,i.circluarCamera.value.zoom),g=i.circluarCamera.value.radius*(v-p)+p,y=Math.max(g,m),b=function(e,t){return Math.max(Math.min(e*t,t),0)}(i.circluarCamera.value.radius,v),x=u+b,k=2*Math.PI/f,C=s[s.length-1]||{state:"selected",start:0,end:0,antiClockwise:void 0},S=C.start,w=C.end,T=C.antiClockwise,A=(0,r.R7)(S,w,f,T),M=a(i.circluarCamera.angleOffset,i.circluarCamera.scrollOffsetZooming),P=A*k,j=i.circluarCamera.value.angle,E=a(M,P),R=a(2*Math.PI,-E),I=0;I=E<=Math.PI?a(M,-E*j):a(M,R*j),I=a(I,i.circluarCamera.scrollOffsetZoomed);var N=i.mouseY-x,D=i.mouseX-d,O=Math.sqrt(Math.pow(D,2)+Math.pow(N,2)),L=Math.atan2(N,D),q=function(e,t,n,r){var a=t-r,i=e-n,o=Math.abs(Math.atan(a/i));return a<=0&&i>=0?Math.PI/2-o:a>0&&i>=0?o+Math.PI/2:a>0&&i<0?Math.PI-o+Math.PI/2:o+Math.PI/2+Math.PI}(d+y*Math.cos(L),x+y*Math.sin(L),d,x),G=Math.floor((q+k/2-I)/k);return G>=f?G%=f:G<0&&(G=(Math.ceil(Math.abs(G)/f)*f+G)%f),{circleY:x,angleDelta:k,angleOffset:I,radius:y,len:o.length,iLen:h,mouseAngle:q,hoveringCaretPosition:G,mouseRadius:O}},d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},d.apply(this,arguments)},f=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},h=function(e){var t=e.c,n=e.w,a=e.h,i=e.ratio,o=e.data,l=e.sequence,c=e.circularSelection,s=e.searchResults,h=e.annotationLevels,v=e.renderStateRef,m=e.codons;t.save(),t.resetTransform(),t.scale(i,i),t.clearRect(0,0,n,a);var p=n/2,g=o.circluarCamera.value,y=g.zoom,b=g.radius,x=-Math.PI/2,k=u({data:o,sequence:l,w:n,h:a,circularSelection:c}),C=k.circleY,S=k.angleDelta,w=k.angleOffset,T=k.radius,A=k.len,M=k.iLen,P=k.mouseAngle,j=k.hoveringCaretPosition,E=k.mouseRadius,R=function(e,t){var n=p+e*Math.cos(t+x),a=C+e*Math.sin(t+x);return(0,r.bc)(n,a)},I=function(e,n,r,a){void 0===a&&(a="center");var i=t.measureText(e).width;if(e.length<3||e.length>100){var o=t.getTransform(),l=f(R(n,r),2),c=l[0],s=l[1],u=-i/2;"left"===a?u=0:"right"===a&&(u=i),t.translate(c,s),t.rotate(r),t.fillText(e,u,0),t.setTransform(o)}else{var d=i/n,h=r-d/2;"left"===a?h=r-d:"right"===a&&(h=r);for(var v=0;v<e.length;v+=1){var m=h+(0===v?0:t.measureText(e.slice(0,v)).width/i)*d,p=f(R(n,m),2);c=p[0],s=p[1],o=t.getTransform();t.translate(c,s),t.rotate(m),t.fillText(e[v],0,0),t.setTransform(o)}}},N=Math.max(Math.min(2*T*Math.PI/A,16),0),D=N>4?N:4,O=function(e){return{a0:e*S+w-S/2,a1:e*S+w+S/2,aMid:e*S+w}},L=function(e){var n=e.i,a=e.radius,i=e.complement,o=e.base||l[n],c=O(n).aMid,s=i?(0,r.Rj)(o):o;t.font=(0,r.qT)(N,"bold");var u=(0,r.B6)(s);t.fillStyle=u,t.textBaseline="top",I(s,a,c)},q=function(e,n){var a=O(e),i=a.a0,o=a.a1,s=a.aMid,u=(0,r.IW)(e,c);u&&function(r){var a=1.4*D;if(n&&(a=2.5*D),t.lineWidth=3,t.strokeStyle="black",t.beginPath(),t.arc(p,C,T-a,i+x,o+x,!1),t.stroke(),t.closePath(),e===r.end&&void 0!==r.antiClockwise){if(t.beginPath(),!0===r.antiClockwise){var l=f(R(T-a-D/2,i),2),c=l[0],s=l[1],u=f(R(T-a,i-D/(2*T)),2),d=u[0],h=u[1],v=f(R(T-a+D/2,i),2),m=v[0],g=v[1];t.moveTo(c,s),t.lineTo(d,h),t.lineTo(m,g)}if(!1===r.antiClockwise){var y=f(R(T-a-D/2,o),2),b=(c=y[0],s=y[1],f(R(T-a,o+D/(2*T)),2)),k=(d=b[0],h=b[1],f(R(T-a+D/2,o),2));m=k[0],g=k[1],t.moveTo(c,s),t.lineTo(d,h),t.lineTo(m,g)}t.closePath(),t.fillStyle="black",t.fill()}}(u);var d,h=Math.floor(A/4);y>.25&&(h=Math.floor(A/8)),b>0&&(h=Math.floor(A/16)),0===e%h&&(e+h/2)%A>=h/2&&(d=function(e,t,n){var a=f(R(e,n),2),i=a[0],o=a[1],l=f(R(t,n),2),c=l[0],s=l[1];return(0,r.bc)(i,o,c,s)}(T+2,T+8,s),t.lineWidth=1,t.beginPath(),t.moveTo(d[0],d[1]),t.lineTo(d[2],d[3]),t.closePath(),t.strokeStyle="black",t.stroke(),t.font=(0,r.qT)(16,"normal"),t.fillStyle="black",t.textBaseline="bottom",I(String(e+1),T+8,s));var v=function(n){var a=0;if(n&&(a=1.25*D),N>4)L({i:e,radius:T-2-a,complement:n});else{var c=f(R(T-a,i),2),s=c[0],u=c[1],d=f(R(T-a,o),2),h=d[0],v=d[1],m=f(R(T-a-4,o),2),p=m[0],g=m[1],y=f(R(T-a-4,i),2),b=y[0],x=y[1];t.strokeStyle="black",t.lineWidth=1,t.beginPath(),t.moveTo(s,u),t.lineTo(h,v),t.lineTo(p,g),t.lineTo(b,x),t.closePath();var k=(0,r.B6)(n?(0,r.Rj)(l[e]):l[e]);t.fillStyle=k,t.fill()}};v(!1),n&&v(!0)};N>4&&c.forEach((function(e){var n=e.end,a=e.start,i=e.antiClockwise,o=(0,r.R7)(a,n,A,i)*S+w,c=(0,r.GQ)(e,!1,l.length);t.font=(0,r.qT)(N,"bold"),t.fillStyle="black",t.textBaseline="top";var s=2*D;i&&(s=3*D),I(c,T-s-16,o)}));var G,F=[],Z=function(e){return N>5&&e.displayAsSequence},B=T+36;h.forEach((function(e,a){var i=0;e.forEach((function(e){var t=Z(e)?N:14;i=Math.max(i,t)}));var o=B;B+=i+4,e.forEach((function(e){var a=e.locations;if(a.length>1){var l=a[0][0]-1,c=a[a.length-1][1],s=l*S+w+x-S/2,u=c*S+w+x-S/2;t.beginPath(),t.arc(p,C,o+i/2,s,u,e.direction===r.fn.REVERSE),t.lineWidth=1,t.strokeStyle="black",t.stroke(),t.closePath()}a.forEach((function(a){var l=String(e.displayLabel||e.label),c=a[0],s=a[1],u=c-1,h=s,m=u*S+w,g=h*S+w,y="normal",b=o+i;E<=b&&E>=o&&function(e,t,n,r){return n>t&&!1===r?e>=t&&e<=n:n<t&&!1===r?e>=t||e<=n:n<t&&!0===r?e>=n&&e<=t:n>t&&!0===r?e>=n||e<=t:e>=t&&e<=n}(j,Math.min(u,h),Math.max(u,h),h<u)&&(y="hovering",G=e.id),v.clickedFeatures.includes(e.id)&&(y="clicked");var k=e.color,M="rgb(0, 0, 0, 0.25)";"hovering"!==y&&"clicked"!==y||(M="rgb(0, 0, 0)"),t.save(),t.fillStyle=k,t.strokeStyle=M,t.lineWidth=1,t.beginPath();var P=x-S/2,N=(0,r.Ax)(A,!1,u,h)*b*Math.PI*2;if(e.direction===r.fn.FORWARD||e.direction===r.fn.REVERSE){var B=.2*Math.abs(h-u)*S,W=Math.min(Math.min(8/b,B),.1*N),V=Math.min(Math.min(8/o,B),.1*N);if(N<16&&(W=0,V=0),e.direction===r.fn.FORWARD){if(t.arc(p,C,b,m+P,g+P-W,!1),N>=16){var z=f(R(o+i/2,g-S/2),2),U=z[0],_=z[1];t.lineTo(U,_)}t.arc(p,C,o,g+P-V,m+P,!0)}else{var H=f(R(o+i/2,m-S/2),2);U=H[0],_=H[1];t.moveTo(U,_),t.arc(p,C,b,m+P+W,g+P,!1),t.arc(p,C,o,g+P,m+P+V,!0)}}else t.arc(p,C,b,m+P,g+P,!1),t.arc(p,C,o,g+P,m+P,!0);t.closePath(),Z(e)?(t.fillStyle="white",t.fill(),t.fillStyle=k):t.fill(),t.stroke(),t.clip();var Y=(0,r.uu)(k);t.fillStyle=Y;var K=(0,r.R7)(Math.min(u,h),Math.max(u,h),A,h<u)*S,X=2*b<n?2*Math.PI:2*Math.PI*Math.asin(Math.min(n/(2*b),1))/Math.PI,Q=(2*Math.PI-w)%(2*Math.PI)/(2*Math.PI)*Math.PI*2,J=2*Math.PI,$=(Q-X/2+J+S)%J,ee=(Q+X/2+J)%J;!Z(e)&&N>=16&&function(e){void 0===e&&(e=!1);var n=t.measureText(l).width/(b-i/2),a=K;if(e){var o=K,c=$,s=ee;$>Math.PI&&ee>Math.PI&&K<Math.PI?o=K+2*Math.PI:$<Math.PI&&ee<Math.PI&&K<Math.PI||($<Math.PI&&ee<Math.PI&&K>Math.PI?o=K-2*Math.PI:$>Math.PI&&ee>Math.PI&&K>Math.PI||($>Math.PI&&ee<Math.PI&&K<Math.PI?c=$-2*Math.PI:$>Math.PI&&ee<Math.PI&&K>Math.PI&&(s=ee+2*Math.PI))),o-n/2<c?a=$+n/2:o+n/2>s&&(a=ee-n/2)}t.font=(0,r.qT)(12,"bold"),t.textBaseline="middle",I(l,b-i/2,a+w-S/2)}(T>n/2),t.restore();var te=(b+o)/2+D/2;Z(e)&&function(e){var t=e.startIndex,n=e.endIndex,a=e.sequence,i=a?{sequence:a,onRenderBase:function(e,t){L({i:e,radius:te,base:t})}}:{onRenderBase:function(e){L({i:e,radius:te})}};(0,r.XA)(d({len:A,startIndex:t,endIndex:n},i))}({startIndex:a[0]-1,endIndex:a[1]-1});var ne=e.rightTag;if(ne&&(t.fillStyle="black",t.font=(0,r.qT)(12,"bold"),t.textBaseline="middle",I(String(ne),b-i/2,g+P+Math.PI/2,"right")),(0,r.UG)(e,a,A,(function(e,t){L({i:e,radius:te,base:t})})),"DNA_RE_NUC"===e.type){var re=e.direction===r.fn.REVERSE,ae=e.cleavageSites,ie=ae[0],oe=ae[ae.length-1],le=ie[1],ce=oe[1];1===ae.length&&(le=ie[0],ce=ie[1]);var se=[re?h-le:u+le,re?h-ce:u+ce].sort((function(e,t){return e-t}));F.push(se);for(var ue=se[0];ue<se[1];ue+=1){var de=ue;de<0&&(de=A+ue),q(de,!0)}ae.forEach((function(e){var n=f(e,2),r=n[0],a=n[1],i=O(re?h-a:u+r),o=i.a0;i.a1;if(t.strokeStyle="hovering"===y||"clicked"===y?"red":"black",t.lineWidth=3,t.beginPath(),r>a){var l=f(R(T,o),2),c=l[0],s=l[1];t.lineTo(c,s);var d=f(R(T-D,o),2),v=d[0],m=d[1];t.lineTo(v,m)}else{var g=f(R(T,o),2);c=g[0],s=g[1];t.lineTo(c,s);var b=f(R(T-D,o),2);v=b[0],m=b[1];t.lineTo(v,m)}var k=O(re?h-r:u+a).a0;if(t.arc(p,C,T-1.125*D-1.5,o+x,k+x,r>a),r>a){var S=f(R(T-2.5*D,k),2),w=S[0],A=S[1];t.lineTo(w,A)}else{var M=f(R(T-2.5*D,k),2);w=M[0],A=M[1];t.lineTo(w,A)}t.strokeStyle="hovering"===y||"clicked"===y?"red":"black",t.stroke(),t.closePath()}))}}))}))})),v.hoveringFeature=G,s.length>0&&s.forEach((function(e){var n=e.start,a=e.end,i=n*S+w+x-S/2,o=a*S+w+x-S/2,l=0,c=T*(0,r.Ax)(A,!1,n,a)*Math.PI*2;if(c<8){var s=(8-c)/2/T;i-=s,o+=s}if(e.complement){for(var u=n;u<a;u+=1)q(u,!0);l=1.2*-D}t.beginPath(),t.arc(p,C,T+l,i,o,!1),t.arc(p,C,T-Math.max(8,1.2*D)+l,o,i,!0),t.closePath();var d=Math.min(Math.max(1-y,.4),.8);t.fillStyle="rgba(255,151,0, "+d+")",e.active&&(t.fillStyle="rgba(0, 0, 255, "+d+")"),t.fill()}));var W=Math.floor(n/4),V=Math.ceil(W/A),z="",U=function(e,n){if(3===(z+=n.antiClockwise?(0,r.Rj)(l[e]):l[e]).length){var a=e+(n.antiClockwise?1:-1);-1===a&&(a=M),function(e,n,a){if(!(N<=4)){t.lineWidth=1;var i=m[n]||"X",o=(0,r.su)(i),l=O(e-1).a0,c=O(e+1).a1,s=T-(a?2.6:-1.5)*D;t.beginPath();var u=x;t.arc(p,C,s,l+u,c+u,!1),t.arc(p,C,s-D,c+u,l+u,!0),t.closePath(),t.fillStyle=o,t.strokeStyle="black",t.fill(),t.stroke(),t.font=(0,r.qT)(N,"bold"),t.fillStyle=(0,r.nU)(i)?"#c8d9fa":"#282c34",t.textBaseline="top";var d=O(e).aMid;N>4&&I(i,s,d)}}(a,z,!!n.antiClockwise),z=""}};if(2*T*Math.PI/A>4)for(var _=j+W,H=j-W;H<_;H+=1){var Y=(H+A*V)%A,K=(0,r.IW)(Y,c);q(Y,!0===(null==K?void 0:K.antiClockwise))}else for(H=0;H<A;H+=1){K=(0,r.IW)(H,c);q(H,!0===(null==K?void 0:K.antiClockwise))}c.forEach((function(e){if(z="",(0,r.Wk)(e))if(e.antiClockwise){for(var t=e.start;t>=0;t-=1)U(t,e);for(t=M;t>=e.end;t-=1)U(t,e)}else{for(t=e.start;t<A;t+=1)U(t,e);for(t=0;t<=e.end;t+=1)U(t,e)}else if(e.antiClockwise)for(t=e.start;t>=e.end;t-=1)U(t,e);else for(t=e.start;t<=e.end;t+=1)U(t,e)}));var X=0,Q=!1,J=!1,$=!1,ee=c.find((function(e){return"selecting"===e.state})),te=(0,r.IW)(j,c);"selecting"===(null==ee?void 0:ee.state)&&(ee.antiClockwise&&(Q=!0,$=!0),Math.abs(ee.start-ee.end)>=2&&(J=!0)),te&&(Math.abs(te.start-te.end)>=2&&(J=!0),te.antiClockwise&&(Q=!0,$=!0)),F.some((function(e){var t=f(e,2),n=t[0],a=t[1];return(0,r.cd)(j,{start:n,end:a,antiClockwise:!1})}));var ne=1.2;return J&&$&&(ne=2.7),Q&&(X+=1.4*D),function(e,n,a){var i=f(R(e,P),2),o=i[0],l=i[1],c=f(R(n,P),2),s=c[0],u=c[1];t.strokeStyle="rgba(0, 0, 0, 0.5)",t.lineWidth=3,t.beginPath(),t.moveTo(o-1.5,l),t.lineTo(s-1.5,u),t.stroke(),t.closePath(),t.font=(0,r.qT)(16,"bold"),t.fillStyle="black",t.textBaseline="top",I(String(j+1),a,P-1.5/a,"center")}(T-X,T-X-1.125*D,T-X-D*ne),t.restore(),v}},442:function(e,t,n){n.d(t,{Ih:function(){return h},H:function(){return i},DC:function(){return o}});var r=n(3048),a=function(e,t){return e?r.J$[t].color:r.SD[t]},i=function(e){var t=e.a,n=e.b,r=e.c,a=e.d,i=e.e,o=e.f;return{a:-a/(r*n-t*a),b:n/(r*n-t*a),c:r/(r*n-t*a),d:-t/(r*n-t*a),e:(i*a-r*o)/(r*n-t*a),f:-(i*n-t*o)/(r*n-t*a)}},o=function(e,t,n){return{x:n.a*e+n.c*t+n.e,y:n.b*e+n.d*t+n.f}},l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},c=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},s=64,u=function(e){var t,n=[];return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.every((function(e,t){return e===n[t]}))||(t=e.apply(void 0,c([],l(r))),n=r),t}},d=u((function(e){for(var t=[],n=0;n<=e.length;n++){for(var a=n>0?e[n]-e[n-1]:e[n],i=0;i<a;i++){var o=n+i/a;t.push((0,r.bc)(o,n))}n===e.length&&t.push((0,r.bc)(n,n))}return t})),f=u((function(e){var t=Math.max.apply(Math,c([],l(e.phred))),n=t-Math.sqrt(t),r=function(t){return e.peakLocations.map((function(e){return t[e]})).filter((function(t,r){var a=e.phred;if(r>4||r<a.length-4){for(var i=0,o=r-4;o<r+4;o++)i+=a[o];return i/8>n}return!1}))},a=function(t){return e.peakLocations.map((function(e){return t[e]})).filter((function(t,n){var r=e.phred;return n>r.length/3&&n<2*r.length/3}))},i=c(c(c(c([],l(r(e.aTrace))),l(r(e.cTrace))),l(r(e.gTrace))),l(r(e.tTrace))),o=c(c(c(c([],l(a(e.aTrace))),l(a(e.cTrace))),l(a(e.gTrace))),l(a(e.tTrace)));return i.length>0?Math.max.apply(Math,c([],l(i))):Math.max.apply(Math,c([],l(o)))})),h=function(e){var t=e.c,n=e.w,u=e.h,h=e.ratio,v=e.sequence,m=e.annotationLevels,p=e.data,g=e.renderStateRef,y=e.searchResults,b=e.filterChromOptions,x=e.isProtein,k=e.chromatogramData,C=e.circularSelection,S=e.codons,w=v.length,T=w-1,A=x?r.ci:r.Jn;t.save(),t.resetTransform(),t.scale(h,h),t.clearRect(0,0,n,u),t.fillStyle="white",t.fillRect(0,0,n,u);var M=p.matrix,P=i(p.matrix),j=Math.max(Math.min(Math.floor(o(0,0,P).x/A),T),0),E=Math.max(Math.min(Math.floor(o(n,0,P).x/A),w),1),R=(o(n/2,0,P).x,o(0,0,P).x),I=o(n,0,P).x,N=o(p.mouseX,p.mouseY,P),D=N.x,O=N.y;t.save();var L=function(e){return e*M.a+M.e},q=function(e){return e+M.f},G=function(e,n,r,a,i){var o=t.measureText(e).width,l=n;"center"===i?l-=o/2/M.a:"end"===i&&(l-=o/M.a);var c=r;t.textBaseline="center"===a?"middle":"start"===a?"hanging":"bottom",t.fillText(e,L(l),q(c))},F=function(e){return e*A+0},Z=0,B=24;if(x){for(var W=(0,r.bc)(4,48,200),V=(0,r.bc)(24,80,200),z=0;z<2;z+=1)V[Z]*M.a<=V[Z]-W[Z]&&(Z+=1);B=V[Z]*M.a,2===Z&&B<20&&(Z+=1),3===Z&&(B=Math.max(6,B))}else(B=24*M.a)<=6&&(Z=3),3===Z&&(B=6);var U=function(e){var n=e.i,r=e.phred,a=e.yMax,i=F(n);if(b.includes("phred")){var o=s+B-M.f,l=54*(1-r/a)-54;t.lineWidth=1,t.strokeStyle="rgba(0, 0, 0, 0.075)",t.strokeRect(L(i),q(o),A*M.a,l)}},_=function(e){var n=e.base,r=e.iInterpol,i=e.iNext,o=e.value,l=e.nextValue,c=e.top,s=e.yMax,u=B+5,d=function(e){return F(e)-A/2},f=function(e){return(c-u)*(1-e/s)-M.f},h=a(x,n);t.lineWidth=1,t.strokeStyle=h,t.beginPath(),t.moveTo(L(d(r)),q(f(o))),t.lineTo(L(d(i)),q(f(l))),t.stroke()},H=function(e){var n=e.base,i=e.i,o=e.top,l=e.align,c=void 0===l?"start":l,s=F(i),u=a(x,n);if(t.fillStyle=u,t.textBaseline="bottom",3===Z)t.lineWidth=1,t.strokeStyle="rgba(0, 0, 0, "+Math.min(1,Math.max(A*M.a-2,0))+")",t.fillRect(L(s),q(o),A*M.a,B),t.strokeRect(L(s),q(o),A*M.a,B);else{var d=function(e,t,n){return t?0===e?r.J$[n].name:1===e?r.J$[n].threeLettersName:n:n}(Z,x,n);t.font=(0,r.qT)(B,"bold"),G(d,s+A/2,o,c,"center")}},Y=[],K=s+4*B+16;m.forEach((function(e,n){var a=K+24*n+3+3;x&&(a=s+B+3+3+24*n+16+16),e.forEach((function(e,n){var i="normal",o=e.displayAsSequence&&Z<3,u=o?B:20;if(e.locations.length>1){var d=Math.min.apply(Math,c([],l(e.locations.map((function(e){return e[0]}))))),f=Math.max.apply(Math,c([],l(e.locations.map((function(e){return e[1]})))));if((0,r.Wk)({start:e.locations[0][0],end:e.locations[e.locations.length-1][1],antiClockwise:e.direction===r.fn.REVERSE,state:"selected"})){t.lineWidth=1,t.strokeStyle="black";var h=function(e,n){t.lineTo(L(e+-15/M.a+2*n/M.a),q(a+u/2+2*(n%2==0?-1:1)))},m=function(e,n){var r="forward"===n?0:7;if(t.moveTo(L(e+-15/M.a+2*r/M.a),q(a+u/2+2*(r%2==0?-1:1))),"forward"===n)for(var i=1;i<=7;i+=1)h(e,i);else for(var o=6;o>=0;o-=1)h(e,o)};t.beginPath(),m(0,"forward"),t.lineTo(L(0),q(a+u/2)),t.lineTo(L(d*A),q(a+u/2)),t.stroke(),t.closePath(),t.beginPath(),m(w*A+17,"reverse"),t.lineTo(L(w*A),q(a+u/2)),t.lineTo(L(f*A),q(a+u/2)),t.stroke(),t.closePath()}else t.beginPath(),t.moveTo(L(d*A),q(a+u/2)),t.lineTo(L(f*A),q(a+u/2)),t.lineWidth=1,t.strokeStyle="black",t.stroke(),t.closePath()}e.locations.forEach((function(n){var c=[{loc:n}];(0,r.d1)(n,e.direction)&&(c=[{loc:(0,r.bc)(n[0],w),type:e.direction===r.fn.FORWARD?"tail":"head"},{loc:(0,r.bc)(1,n[1]),type:e.direction===r.fn.REVERSE?"tail":"head"}]),c.forEach((function(n){var c=n.loc,d=n.type,f=(c[0]-1)*A+0,h=(Math.abs(c[1]-c[0])+1)*A,m=f,p=f+h,y=a,b=a+u;D>=f&&D<=f+h&&O>=a&&O<=a+u?(g.hoveringFeature=e.id,i="hovering"):g.hoveringFeature===e.id&&(g.hoveringFeature=void 0),g.clickedFeatures.includes(e.id)&&(i="clicked");var x=8/M.a>=h?0:8/M.a,k=function(e){for(var n=1;n<=6;n+=1)t.lineTo(L(("right"===e?p:m)+("right"===e?-1:1)*(n%2==1?4/M.a:0)),q(b-n*u/6))},C=function(e,n){t.strokeStyle="rgba(100, 100, 100, 1)";var r="left"===e?m:p,a="left"===n?-1:1;e+n==="leftright"?r-=36/M.a:e+n==="rightleft"&&(r+=36/M.a),t.lineWidth=1,t.beginPath(),t.moveTo(L(r+a*(8/M.a)),q(y+1*u/4)),t.lineTo(L(r+a*(8/M.a)),q(b-1*u/4)),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(L(r+a*(8/M.a)),q(b-1*u/4)),t.lineTo(L(r+a*(24/M.a)),q(b-1*u/4)),t.lineWidth=1,t.stroke(),t.closePath(),t.beginPath(),t.moveTo(L(r+a*(24/M.a)),q(b-1*u/4)),t.lineTo(L(r+a*(24/M.a)),q(b-1*u/4+1*u/6)),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(L(r+a*(24/M.a)),q(b-1*u/4+1*u/6)),t.lineTo(L(r+a*(32/M.a)),q(b-u/2)),t.lineTo(L(r+a*(24/M.a)),q(y+1*u/4-1*u/6)),t.lineWidth=1,t.stroke(),t.closePath(),t.beginPath(),t.moveTo(L(r+a*(24/M.a)),q(y+1*u/4-1*u/6)),t.lineTo(L(r+a*(24/M.a)),q(y+1*u/4)),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(L(r+a*(24/M.a)),q(y+1*u/4)),t.lineTo(L(r+a*(8/M.a)),q(y+1*u/4)),t.lineWidth=1,t.stroke(),t.closePath()};if("tail"===d?e.direction===r.fn.REVERSE?(C("left","left"),t.beginPath(),t.moveTo(L(p),q(y)),t.lineTo(L(p),q(b)),t.lineTo(L(m),q(b)),k("left"),t.closePath()):(C("right","right"),t.beginPath(),t.moveTo(L(m),q(y)),t.lineTo(L(m),q(b)),t.lineTo(L(p),q(b)),k("right"),t.lineTo(L(p),q(y)),t.closePath()):"head"===d?e.direction===r.fn.FORWARD?(C("left","right"),t.beginPath(),t.moveTo(L(m),q(y)),t.lineTo(L(p-x),q(y)),t.lineTo(L(p),q(y+u/2)),t.lineTo(L(p-x),q(b)),t.lineTo(L(m),q(b)),k("left"),t.closePath()):e.direction===r.fn.REVERSE&&(C("right","left"),t.beginPath(),t.moveTo(L(m+x),q(y)),t.lineTo(L(m),q(y+u/2)),t.lineTo(L(m+x),q(b)),t.lineTo(L(p),q(b)),k("right"),t.closePath()):void 0===e.direction||e.direction===r.fn.NOT_DEFINED?(t.beginPath(),t.moveTo(L(m),q(y)),t.lineTo(L(m),q(b)),t.lineTo(L(p),q(b)),t.lineTo(L(p),q(y)),t.closePath()):e.direction===r.fn.FORWARD?(t.beginPath(),t.moveTo(L(m),q(y)),t.lineTo(L(p-x),q(y)),t.lineTo(L(p),q(y+u/2)),t.lineTo(L(p-x),q(b)),t.lineTo(L(m),q(b)),t.closePath()):e.direction===r.fn.REVERSE&&(t.beginPath(),t.moveTo(L(m+x),q(y)),t.lineTo(L(m),q(y+u/2)),t.lineTo(L(m+x),q(b)),t.lineTo(L(p),q(b)),t.lineTo(L(p),q(y)),t.closePath()),o?(t.fillStyle="white",t.fill()):(t.fillStyle=e.color,t.fill()),t.lineWidth=1,t.strokeStyle="rgba(100, 100, 100, 1)",t.stroke(),t.save(),t.clip(),"hovering"!==i&&"clicked"!==i||(t.strokeStyle="black",t.stroke()),o)for(var S=c[0]-1;S<c[1];S+=1)H({base:v[S],i:S,top:a});else{var T=String(e.displayLabel||e.label);t.font=(0,r.qT)(12,"bold");var P=function(e){return t.measureText(e).width}(T),j=(0,r.uu)(e.color);t.fillStyle=j,P/M.a>h-4/M.a?G(T,f+2,a+u/2,"center","start"):G(T,Math.min(Math.max(f+h/2,R+8/M.a+P/M.a/2),I-8/M.a-P/M.a/2),a+u/2,"center","center")}t.restore();var E=e.rightTag;if(E&&(t.fillStyle="black",G(String(E),f+h+4/M.a,a+u/2,"center","start")),(0,r.UG)(e,c,w,(function(e,t){H({base:t,i:e,top:a+(u-B)/2,align:"start"})})),"DNA_RE_NUC"===e.type){var N=e.direction===r.fn.REVERSE,F=c[0],Z=c[1],W=F-1,V=Z,z=e.cleavageSites,U=z[0],_=z[z.length-1],K=U[1],X=_[1];1===z.length&&(K=U[0],X=U[1]);var Q=N?V-K:W+K,J=N?V-X:W+X,$=N?[J,Q]:[Q,J];Y.push($);for(var ee=$[0];ee<$[1];ee+=1){var te=ee;te<0&&(te=w+ee),H({base:(0,r.Rj)(v[te]),i:te,top:s+2*B+3})}z.forEach((function(e){var n=l(e,2),r=n[0],a=n[1],o=N?V-a:W+r,c=l([o*A,s+1*B],2),u=c[0],d=c[1],f=l([o*A,s+2*B],2),h=f[0],v=f[1];t.strokeStyle="hovering"===i||"clicked"===i?"red":"black",t.lineWidth=3,t.beginPath(),t.lineTo(L(u),q(d)),t.lineTo(L(h),q(v));var m=N?V-r:W+a;t.lineTo(L(m*A),q(s+2*B));var p=l([m*A,s+3*B],2),g=p[0],y=p[1];t.strokeStyle="hovering"===i||"clicked"===i?"red":"black",t.lineTo(L(g),q(y)),t.stroke(),t.closePath()}))}}))}))}))}));for(var X=function(e){var n=F(e);if(n+A<R||n>I)return"continue";H({base:v[e],i:e,top:s-M.f+(x?0:B)});var a=48/(A*M.a),i=Math.floor(T/a),o=Math.max(Math.floor(T/i),1),l=function(){t.fillStyle="black",t.font=(0,r.qT)(12,"normal"),G(String(e+1),n+A/2,s-M.f,"end","center")};(0===e||e===T||e%o==0&&e>.7*o&&e<w-.7*o)&&l()},Q=j;Q<Math.min(E+1,v.length);Q+=1)X(Q);t.restore(),y.length>0&&y.forEach((function(e){var n=e.start,a=e.end,i=n*A,o=a*A,l=s;if(x||(l+=B),e.complement&&!x){l+=B+3;for(var c=n;c<a;c+=1)H({base:(0,r.Rj)(v[c]),i:c,top:l})}var u=Math.min(Math.max(1-M.a,.4),.8);t.fillStyle="rgba(255,151,0, "+u+")",e.active&&(t.fillStyle="rgba(0, 0, 255, "+u+")"),t.beginPath(),t.moveTo(L(i),q(l)),t.lineTo(L(o),q(l)),t.lineTo(L(o),q(l+B)),t.lineTo(L(i),q(l+B)),t.closePath(),t.fill()}));var J=Math.max(Math.min(B/3,8),4),$=s+B*(x?1:2)+3;C.forEach((function(e){var n=e.start,a=e.end+1;!0===e.antiClockwise&&(n=e.end,a=e.start+1);var i=n*A,o=a*A;!1===e.antiClockwise&&(o-=J/M.a),!0===e.antiClockwise&&(i+=J/M.a);var l=$-M.f;!0!==e.antiClockwise||x||(l+=B),t.beginPath(),t.moveTo(L(i),q(l)),t.lineTo(L(o),q(l)),t.lineWidth=3,t.strokeStyle="black",t.fillStyle="black",t.stroke(),t.closePath(),t.beginPath(),!0===e.antiClockwise&&(t.moveTo(L(i),q(l-J)),t.lineTo(L(i-J/M.a),q(l)),t.lineTo(L(i),q(l+J))),!1===e.antiClockwise&&(t.moveTo(L(o),q(l-J)),t.lineTo(L(o+J/M.a),q(l)),t.lineTo(L(o),q(l+J))),t.closePath(),t.fill();var c=function(e,n,a){var i=S[e]||"X",o=(0,r.su)(i);t.fillStyle=o,t.strokeStyle="rgba(0, 0, 0, "+Math.min(1,Math.max(A*M.a-2,0))+")",t.beginPath(),t.lineWidth=1,t.rect(L(n*A),q($+a),3*A*M.a,B),t.fill(),t.stroke(),t.closePath(),t.font=(0,r.qT)(B,"bold"),t.fillStyle=(0,r.nU)(i)?"#c8d9fa":"#282c34",t.textBaseline="top",Z<=2&&G(i,(n+1.5)*A,$+a,"start","center")},u="";if(!x)if(!0===e.antiClockwise)for(var d=e.start;d>=e.end;d-=1){var f=(0,r.Rj)(v[d]);H({base:f,i:d,top:$-M.f}),3===(u+=f).length&&(c(u,d,B-M.f),u="")}else if(!1===e.antiClockwise)for(var h=e.start;h<=e.end;h+=1)3===(u+=v[h]).length&&(c(u,h-2,B-M.f),u="");var m=e.end,p=e.start,g=e.antiClockwise,y=(0,r.GQ)(e,x,v.length);t.font=(0,r.qT)(16,"bold"),t.fillStyle="black",t.textBaseline="top";var b=(0,r.R7)(p,m,w,g),k=4*B;x&&(k=B),G(y,b*A+A/2,s+k+3+3-M.f,"start","center")}));var ee=Math.min(Math.max(D,0),w*A),te=Math.max(Math.min(Math.floor(ee/A),T),0),ne=(0,r.IW)(te,C),re=!1;ne&&!0===ne.antiClockwise&&(re=!0);var ae=70,ie=ae+B+(re?B:0),oe=ae+2*B+(re?B:0),le=ae+2*B+(re?((0,r.Lc)(w,!0,ne.start,ne.end)>=3?2:1)*B:0);if(x&&(ie=ae+B,oe=ae+B+16,le=ae+B+16),t.beginPath(),t.moveTo(L(ee),q(ie)-M.f),t.lineTo(L(ee),q(oe)-M.f),t.lineWidth=3,t.strokeStyle="rgba(0, 0, 0, 0.5)",t.stroke(),t.closePath(),t.font=(0,r.qT)(16,"bold"),t.fillStyle="black",G(String(te+1),ee,le-M.f,"start","center"),k){for(var ce=k.peakLocations,se=k.phred,ue=0;ue<se.length;ue++){var de=Math.max.apply(Math,c([],l(se)));U({i:ue,phred:se[ue],yMax:de})}Object.entries(k).filter((function(e){var t=l(e,2),n=t[0];t[1];return n.includes("Trace")&&b.includes(n.charAt(0).toUpperCase())})).forEach((function(e){var t=l(e,2),n=t[0],r=t[1];if("string"!=typeof r&&n.includes("Trace"))for(var a=r,i=n.charAt(0).toUpperCase(),o=d(ce),c=f(k),s=0;s<o.length-1;s++)o[s][1]<j||o[s][1]>E||_({base:i,iInterpol:o[s][0],iNext:o[s+1][0],value:a[s],nextValue:a[s+1],top:$,yMax:c})}))}return t.restore(),g}},3048:function(e,t,n){var r;n.d(t,{fn:function(){return r},J$:function(){return o},d1:function(){return q},uF:function(){return O},Wi:function(){return K},ee:function(){return Y},Ds:function(){return w},Jn:function(){return l},SD:function(){return a},su:function(){return y},qT:function(){return j},R7:function(){return U},B6:function(){return g},Rj:function(){return T},Dc:function(){return E},zO:function(){return A},Lc:function(){return V},Ax:function(){return z},GQ:function(){return _},IW:function(){return W},uu:function(){return D},Mu:function(){return s},cd:function(){return B},a$:function(){return Z},Wk:function(){return F},h9:function(){return Q},UG:function(){return $},Oq:function(){return S},ci:function(){return c},XA:function(){return J},IS:function(){return R},$X:function(){return M},nU:function(){return m},bc:function(){return v}}),function(e){e.FORWARD="FORWARD",e.NOT_DEFINED="NOT_DEFINED",e.REVERSE="REVERSE"}(r||(r={}));var a={A:"#C20000",T:"#00B700",C:"#1000BA",G:"#F5BF02",R:"black",Y:"black",W:"black",S:"black",M:"black",K:"black",H:"black",B:"black",V:"black",D:"black",N:"black"},i={R:"Y",Y:"R",W:"W",S:"S",M:"K",K:"M",H:"D",B:"V",V:"B",D:"H",N:"N",A:"T",T:"A",G:"C",C:"G"},o={A:{value:"A",name:"Alanine",threeLettersName:"Ala",hydrophobicity:1.8,color:"#A7A7A7"},R:{value:"R",name:"Arginine",threeLettersName:"Arg",hydrophobicity:-4.5,color:"#145AFF"},N:{value:"N",name:"Asparagine",threeLettersName:"Asn",hydrophobicity:-3.5,color:"#00DCDC"},D:{value:"D",name:"Aspartic acid",threeLettersName:"Asp",hydrophobicity:-3.5,color:"#E60A0A"},C:{value:"C",name:"Cysteine",threeLettersName:"Cys",hydrophobicity:2.5,color:"#E6E600"},E:{value:"E",name:"Glutamic acid",threeLettersName:"Glu",hydrophobicity:-3.5,color:"#E60A0A"},Q:{value:"Q",name:"Glutamine",threeLettersName:"Gln",hydrophobicity:-3.5,color:"#00DCDC"},G:{value:"G",name:"Glycine",threeLettersName:"Gly",hydrophobicity:-.4,color:"#A7A7A7"},H:{value:"H",name:"Histidine",threeLettersName:"His",hydrophobicity:-3.2,color:"#8282D2"},I:{value:"I",name:"Isoleucine ",threeLettersName:"Ile",hydrophobicity:4.5,color:"#0F820F"},L:{value:"L",name:"Leucine",threeLettersName:"Leu",hydrophobicity:3.8,color:"#0F820F"},K:{value:"K",name:"Lysine",threeLettersName:"Lys",hydrophobicity:-3.9,color:"#145AFF"},M:{value:"M",name:"Methionine",threeLettersName:"Met",hydrophobicity:1.9,color:"#E6E600"},F:{value:"F",name:"Phenylalanine",threeLettersName:"Phe",hydrophobicity:2.8,color:"#3232AA",doInvert:!0},P:{value:"P",name:"Proline",threeLettersName:"Pro",hydrophobicity:-1.6,color:"#DC9682"},S:{value:"S",name:"Serine",threeLettersName:"Ser",hydrophobicity:-.8,color:"#FA9600"},T:{value:"T",name:"Threonine",threeLettersName:"Thr",hydrophobicity:-.7,color:"#FA9600"},U:{value:"U",name:"Selenocysteine",threeLettersName:"Sec",color:"#FF0000"},W:{value:"W",name:"Tryptophan",threeLettersName:"Trp",hydrophobicity:-.9,color:"#B45AB4"},Y:{value:"Y",name:"Tyrosine",threeLettersName:"Tyr",hydrophobicity:-1.3,color:"#3232AA",doInvert:!0},V:{value:"V",name:"Valine",threeLettersName:"Val",hydrophobicity:4.2,color:"#0F820F"},"*":{value:"*",name:"Stop",threeLettersName:"Stop",color:"#000000"},".":{value:".",name:"Stop",threeLettersName:"Stop",color:"#000000"},"-":{value:"-",name:"Gap",threeLettersName:"Gap",color:"#ffffff"},B:{value:"B",threeLettersName:"ND",color:"lightpurple",isAmbiguous:!0,name:"B",aliases:"ND"},J:{value:"J",threeLettersName:"IL",color:"lightpurple",isAmbiguous:!0,name:"J",aliases:"IL"},X:{value:"X",threeLettersName:"ACDEFGHIKLMNPQRSTVWY",color:"lightpurple",isAmbiguous:!0,name:"X",aliases:"ACDEFGHIKLMNPQRSTVWY"},Z:{value:"Z",threeLettersName:"QE",color:"lightpurple",isAmbiguous:!0,name:"Z",aliases:"QE"}},l=24,c=150,s={TAG:"*",TAA:"*",TGA:"*",GCG:"A",GCA:"A",GCT:"A",GCC:"A",TGT:"C",TGC:"C",GAT:"D",GAC:"D",GAA:"E",GAG:"E",TTT:"F",TTC:"F",GGT:"G",GGA:"G",GGG:"G",GGC:"G",CAT:"H",CAC:"H",ATA:"I",ATT:"I",ATC:"I",AAA:"K",AAG:"K",CTA:"L",TTA:"L",CTT:"L",TTG:"L",CTC:"L",CTG:"L",ATG:"M",AAT:"N",AAC:"N",CCG:"P",CCA:"P",CCT:"P",CCC:"P",CAA:"Q",CAG:"Q",CGT:"R",CGA:"R",CGC:"R",AGA:"R",AGG:"R",CGG:"R",TCG:"S",AGT:"S",TCA:"S",TCT:"S",TCC:"S",AGC:"S",ACG:"T",ACT:"T",ACA:"T",ACC:"T",GTA:"V",GTT:"V",GTC:"V",GTG:"V",TGG:"W",TAT:"Y",TAC:"Y"},u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},u.apply(this,arguments)},d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},f=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},h=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function v(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function m(e){return"FYKRDELIV*.".includes(e)}var p,g=function(e){return a[e]},y=function(e){var t;return null===(t=o[e])||void 0===t?void 0:t.color},b=function(e){var t=0;return e.forEach((function(e){t+=e})),t},x=function(e){var t=e.rightTag;return t?2*String(t).length:0},k=function(e){var t=Math.min.apply(Math,f([],d(e.locations.flat()))),n=Math.max.apply(Math,f([],d(e.locations.flat())));return Math.abs(n-t)+x(e)},C=function e(t,n,r,a){var i=Math.min.apply(Math,f([],d(t.locations.map((function(e){return d(e,1)[0]})).flat()))),o=Math.max.apply(Math,f([],d(t.locations.map((function(e){return d(e,2)[1]})).flat()))),l=Math.min.apply(Math,f([],d(n.locations.map((function(e){return d(e,1)[0]})).flat()))),c=Math.max.apply(Math,f([],d(n.locations.map((function(e){return d(e,2)[1]})).flat()))),s=i>o,h=l>c;if(a.value+=1,a.value>20)return!0;if(!s&&!h)return Math.max(i,l)<=Math.min(o+x(t),c+x(n));var m=function(e){return u(u({},e),{locations:[v(Math.min.apply(Math,f([],d(e.locations.map((function(e){return d(e,1)[0]})).flat()))),r)]})},p=function(e){return u(u({},e),{locations:[v(0,Math.max.apply(Math,f([],d(e.locations.map((function(e){return d(e,2)[1]})).flat()))))]})};return s&&!h?e(m(t),n,r,a)||e(p(t),n,r,a):!s&&h?e(m(n),t,r,a)||e(p(n),t,r,a):!(!s||!h)&&(e(m(n),m(t),r,a)||e(p(n),p(t),r,a))},S=function(e,t){for(var n,r=[],a=f([],d(e)).sort((function(e,t){return k(e)-k(t)})),i=function(){var e,n,i=a.pop();if(!i)return"continue-stackLoop";try{for(var o=(e=void 0,h(r)),l=o.next();!l.done;l=o.next()){var c=l.value;if(c.every((function(e){return!C(i,e,t,{value:0})})))return c.push(i),"continue-stackLoop"}}catch(s){e={error:s}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}r.push([i])};a.length;)i();return r.sort((n=!0,function(e,t){var r=n?1:-1,a=r*(e.length-t.length),i=r*b(e.map(k))-b(t.map(k));return 0===i?0:i<0?-1:i>0?1:0===a?0:a<0?-1:a>0?1:0})).reverse()},w=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];p&&window.cancelAnimationFrame(p),p=window.requestAnimationFrame((function(){e.apply(void 0,f([],d(t)))}))}},T=function(e){if(e.match(/-|\.| /))return e;var t=i[e];if(!t)throw new Error("invalid nucleotide "+e);return t},A=function(e,t){var n=t.split("");return n.reverse(),e?n.join(""):n.map(T).join("")};var M=function(e,t,n){return e?function(e,t){for(var n=0;n<t.length;n+=1)if(e[n]!==t[n])return!1;return!0}(t,n):function(e,t){if(t.length!==e.length)throw new Error("sequence and site must be the same length");for(var n=0;n<t.length;n+=1)if(r=e[n],a=t[n],!(r.match(/-|\.| /)&&a.match(/-|\.| /)||"A"===a&&"A"===r||"C"===a&&"C"===r||"G"===a&&"G"===r)&&("T"!==a&&"U"!==a||"T"!==r&&"U"!==r)&&("R"!==a||"A"!==r&&"G"!==r)&&("Y"!==a||"C"!==r&&"T"!==r&&"U"!==r)&&("S"!==a||"G"!==r&&"C"!==r)&&("W"!==a||"A"!==r&&"T"!==r&&"U"!==r)&&("K"!==a||"G"!==r&&"T"!==r&&"U"!==r)&&("M"!==a||"A"!==r&&"C"!==r)&&("B"!==a||"C"!==r&&"G"!==r&&"T"!==r&&"U"!==r)&&("D"!==a||"A"!==r&&"G"!==r&&"T"!==r&&"U"!==r)&&("H"!==a||"A"!==r&&"C"!==r&&"T"!==r&&"U"!==r)&&("V"!==a||"A"!==r&&"C"!==r&&"G"!==r)&&"N"!==a)return!1;var r,a;return!0}(t,n)},P=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o};function j(e,t){return void 0===t&&(t="normal"),"normal normal "+t+" "+e+"px sans-serif"}function E(e){var t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return{ratio:t/n,shouldScale:t!==n}}function R(e,t,n){var r=e.getContext("2d");if(r){var a=E(r),i=a.ratio,o=a.shouldScale;return o?(e.width=t*i,e.height=n*i,e.style.width=t+"px",e.style.height=n+"px"):(e.width=t,e.height=n,e.style.width="",e.style.height=""),{ratio:i,shouldScale:o}}}var I=null,N=null,D=function(e){if(!I){var t=document.getElementById("seq-view-offscreen-canvas");t?I=t:((I=document.createElement("canvas")).id="seq-view-offscreen-canvas",I.style.position="absolute",I.style.left="-10px",I.style.width="1px",I.style.height="1px",I.width=2,I.height=2,I.style.visibility="hidden",document.body.appendChild(I))}N||(N=I.getContext("2d",{willReadFrequently:!0}));var n=N;if(n){n.clearRect(0,0,1,1),n.fillStyle=e,n.fillRect(0,0,1,1);var r=P(n.getImageData(0,0,1,1).data,3),a=r[0],i=r[1],o=r[2];return n.clearRect(0,0,1,1),.299*a+.587*i+.114*o>150?"black":"white"}return"black"},O={primaryText:"#000000",primaryBackground:"#ffffff",websiteSecondary:"#00647b",websiteSecondaryLight:"#008dae",websiteSecondaryDark:"#003b48",websiteTertiary:"#0A3D51",websiteTertiaryDark:"#041b24",websiteTertiaryLight:"#105f7e",secondaryText:"#1f497d",secondaryBackground:"#eeece1",accent1:"#139cb2",accent1Light:"#18c4e0",accent1Dark:"#0e7484",accent2:"#eaebe0",accent3:"#fc4711",accent3Light:"#fd6e43",accent3Dark:"#d73403",accent4:"#e20047",accent4Light:"#ff165f",accent4Dark:"#af0037",accent5:"#28a745",accent5Light:"#98d26c",accent5Dark:"#64a533",accent6:"#8af74d",accent6Light:"#aaf97e",accent6Dark:"#6af51c",link:"#0000ff"},L=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(l){a={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},q=function(e,t){return t==r.REVERSE?G({start:e[1],end:e[0]},!0):G({start:e[0],end:e[1]},!1)},G=function(e,t){var n=e.start,r=e.end;if(n!==r){if(!0===t)return!(n>r);if(!1===t)return!(r>n)}return!1},F=function(e){return G(e,!!e.antiClockwise)},Z=function(e,t){var n=L(e,2),r=n[0],a=n[1],i=t.start,o=t.end,l=t.antiClockwise;if(i===o&&o===r&&o===a)return!0;if(i!==o)if(!0===l){if(i>o){if(r>=o&&r<=i&&a>=o&&a<=i)return!0}else if(r>=o||a<=i)return!0}else if(!1===l)if(o>i){if(r>=i&&r<=o&&a>=i&&a<=o)return!0}else if(r>=i||a<=o)return!0;return!1},B=function(e,t){var n=t.start,r=t.end,a=t.antiClockwise;if(n===r&&r===e)return!0;if(n!==r)if(!0===a){if(n>r){if(e>=r&&e<=n)return!0}else if(e>=r||e<=n)return!0}else if(!1===a)if(r>n){if(e>=n&&e<=r)return!0}else if(e>=n||e<=r)return!0;return!1},W=function(e,t){return t.find((function(t){return B(e,t)}))},V=function(e,t,n,r){var a=n,i=r;return!0===t&&(a=r,i=n),a>i?e-a+i:i-a+1},z=function(e,t,n,r){return V(e,t,n,r)/e},U=function(e,t,n,r){var a=(e+t)/2;return t>e&&!1===r?a=(e+t)/2:t<e&&!1===r?a=(e+(n-e+t)/2)%n:t<e&&!0===r?a=(e+t)/2:t>e&&!0===r&&(a=(t+(n-t+e)/2)%n),a},_=function(e,t,n){var r=e.end,a=e.start,i=e.antiClockwise,o=a+1+" - "+(r+1);o=a===r?String(a+1):i?r+1+" - "+(a+1):a+1+" - "+(r+1);var l=0;if((l=i&&a<r?a+n-r:!i&&r<a?r+n-a:r-a>0?r-a:a-r)>0){var c=Math.floor((l+1)/3);o+=" ("+(l+1)+" "+(t?"aa":"bp"),c>0&&!t&&(o+=", "+c+" aa"),o+=")"}return o},H=function(){return H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},H.apply(this,arguments)},Y=function(e,t){return{a:1,b:0,c:0,d:1,e:e,f:t}},K=function(e){return{a:e,b:0,c:0,d:1,e:0,f:0}},X=function(e,t){var n,r=e.a,a=e.b,i=e.c,o=e.d,l=e.e,c=e.f,s={g:(n=t).a,h:n.b,i:n.c,j:n.d,k:n.e,l:n.f},u=s.g,d=s.h,f=s.i,h=s.j,v=s.k,m=s.l;return{a:r*u+i*d,b:a*u+o*d,c:r*f+i*h,d:a*f+o*h,e:r*v+i*m+l,f:a*v+o*m+c}},Q=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={a:1,b:0,c:0,d:1,e:0,f:0};return e.forEach((function(e){n=X(n,e)})),H({},n)},J=function(e){var t=e.len,n=e.startIndex,r=e.endIndex,a=0,i="sequence"in e?function(t){return e.onRenderBase(t,e.sequence[a++])}:function(t){return e.onRenderBase(t)};if(n>r){for(var o=n;o<t;o+=1)i(o);for(o=0;o<r+1;o+=1)i(o)}else for(o=n;o<r+1;o+=1)i(o)},$=function(e,t,n,a){if("DNA_OLIGO"===e.type){var i=e.fivePExtension;i&&(e.direction===r.REVERSE?J({startIndex:t[1],endIndex:(t[1]+i.length-1)%n,sequence:i.split("").reverse().join(""),len:n,onRenderBase:a}):J({startIndex:(t[0]-1-i.length+n)%n,endIndex:(t[0]-2+n)%n,sequence:i,len:n,onRenderBase:a}))}}},4153:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return m},default:function(){return b},frontMatter:function(){return v},metadata:function(){return p},toc:function(){return g}});var r=n(801),a=n(3108),i=n(8851),o=n(2669),l=n(8563),c=n(1974),s=n(4721),u=n(5571),d=n(8390),f=function(){var e=(0,u.n)();return i.createElement("div",null,i.createElement(s.k,(0,r.Z)({},e,{sequence:"ATGCTGATATCA",AnnotationForm:d.N,width:800,height:640})),i.createElement(s.k,(0,r.Z)({},e,{isProtein:!0,sequence:"DYKDHDGDYKDH",AnnotationForm:d.N,width:800,height:640})))},h=["components"],v={sidebar_position:1},m="Get started",p={unversionedId:"tutorial/get-started",id:"tutorial/get-started",title:"Get started",description:"Intro",source:"@site/docs/tutorial/get-started.mdx",sourceDirName:"tutorial",slug:"/tutorial/get-started",permalink:"/sequence-viewer/docs/tutorial/get-started",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/tutorial/get-started.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",next:{title:"Usage without material UI and formik",permalink:"/sequence-viewer/docs/tutorial/usage-without-mui"}},g=[{value:"Intro",id:"intro",children:[],level:3},{value:"Quick start",id:"quick-start",children:[{value:"Installation",id:"installation",children:[],level:4},{value:"Usage",id:"usage",children:[],level:4}],level:3},{value:"Creating your own annotation backend",id:"creating-your-own-annotation-backend",children:[],level:3}],y={toc:g};function b(e){var t=e.components,n=(0,a.Z)(e,h);return(0,o.kt)("wrapper",(0,r.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"get-started"},"Get started"),(0,o.kt)("h3",{id:"intro"},"Intro"),(0,o.kt)("p",null,"At anocca we have developed a suite of npm packages used in our internal tooling to display DNA and protein sequences.\nThese packages are published under the ",(0,o.kt)("inlineCode",{parentName:"p"},"@anocca/sequence-viewer-*")," namespace. Have a look at our ",(0,o.kt)("a",{parentName:"p",href:"/docs/api/"},"list of packages"),"."),(0,o.kt)("h3",{id:"quick-start"},"Quick start"),(0,o.kt)("p",null,"To get started ",(0,o.kt)("strong",{parentName:"p"},"quickly")," you can add ",(0,o.kt)("inlineCode",{parentName:"p"},"@anocca/sequence-viewer-app")," which exports the ",(0,o.kt)("a",{parentName:"p",href:"/docs/api/sequence-viewer-app.sequenceviewerapp"},"SequenceViewerApp"),"."),(0,o.kt)("p",null,"SequenceViewerApp is a react component with the ",(0,o.kt)("a",{parentName:"p",href:"/docs/api/sequence-viewer-react-linear.linearcontroller"},"linear")," and ",(0,o.kt)("a",{parentName:"p",href:"/docs/api/sequence-viewer-react-circular.circularcontroller"},"circular")," viewer. It includes:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/docs/api/sequence-viewer-react-mui.search"},"search bar")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/docs/api/sequence-viewer-react-mui.toolbar"},"toolbar")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/docs/api/sequence-viewer-react-mui-formik-form.annotationform"},"UI")," to view, create and edit annotations")),(0,o.kt)("h4",{id:"installation"},"Installation"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# peer dependencies\nnpm i react-icons @mui/material @emotion/react @emotion/styled formik\n# app\nnpm i @anocca/sequence-viewer-app @anocca/sequence-viewer-backend-react-state\n")),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"@anocca/sequence-viewer-app also requires ",(0,o.kt)("strong",{parentName:"p"},"react-icons"),", ",(0,o.kt)("strong",{parentName:"p"},"@mui/material"),", ",(0,o.kt)("strong",{parentName:"p"},"@emotion/react"),", ",(0,o.kt)("strong",{parentName:"p"},"@emotion/styled")," and ",(0,o.kt)("strong",{parentName:"p"},"formik"),"."),(0,o.kt)("p",{parentName:"div"},"Unless you already use these packages in your project the sequence-viewer-app should only be used to get started quickly or to prototype."),(0,o.kt)("p",{parentName:"div"},"See ",(0,o.kt)("a",{parentName:"p",href:"/docs/tutorial/usage-without-mui"},"Usage without material UI and formik")," to use the ",(0,o.kt)("inlineCode",{parentName:"p"},"@anocca/sequence-viewer-*")," suite of libraries without third party libraries (except react)."),(0,o.kt)("p",{parentName:"div"},"See ",(0,o.kt)("a",{parentName:"p",href:"/docs/tutorial/usage-without-react"},"Usage without react")," to use the ",(0,o.kt)("inlineCode",{parentName:"p"},"@anocca/sequence-viewer-*")," suite of libraries without ",(0,o.kt)("strong",{parentName:"p"},"any")," third party library, only vanilla js."))),(0,o.kt)("h4",{id:"usage"},"Usage"),(0,o.kt)(l.Z,{mdxType:"Tabs"},(0,o.kt)(c.Z,{value:"example",label:"Example",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"import {SequenceViewerApp} from '@anocca/sequence-viewer-app';\nimport {useBackend} from '@anocca/sequence-viewer-backend-react-state';\nimport {AnnotationForm} from '@anocca/sequence-viewer-react-mui-formik-form';\n\nfunction MyAmazingSequenceViewers() {\n\n  // The annotation backend allows us to store, edit and delete annotations.\n  // The `useBackend` simply stores all annotations in the component state.\n  // Scroll down in the tutorial to read about creating your own backend.\n  const annotationBackend = useBackend();\n\n  return (\n    <>\n      <SequenceViewerApp\n        {...annotationBackend}\n        // Sequence must be an uppercase string of nucleotides or amino acids.\n        sequence='ATGCTGATATCA'\n        // A component which will render the form used to create and edit annotations\n        AnnotationForm={AnnotationForm}\n        // A fixed width and height is required\n        width={800}\n        height={640}\n      />\n      <SequenceViewerApp\n        {...annotationBackend}\n        // If using an amino acid sequence set the `isProtein` prop to true.\n        isProtein\n        // protein sequence\n        sequence='DYKDHDGDYKDH'\n        AnnotationForm={AnnotationForm}\n        width={800}\n        height={640}\n      />\n    </>\n  )\n}\n"))),(0,o.kt)(c.Z,{value:"result",label:"Result",mdxType:"TabItem"},(0,o.kt)(f,{mdxType:"GetStarted"}))),(0,o.kt)("h3",{id:"creating-your-own-annotation-backend"},"Creating your own annotation backend"),(0,o.kt)("p",null,"An annotaion backend should implement the following interface:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"interface AnnotationBackend {\n  annotations: Annotation[];\n  getAnnotationLabelById: (id: string) => string;\n  getAnnotationById: (id: string) => Annotation;\n  addAnnotation: (annotation: Annotation) => void;\n  deleteAnnotations: (ids: string[]) => void;\n  showAnnotations: (ids: string[]) => void;\n  hideAnnotations: (ids: string[]) => void;\n  updateAnnotation: (annotation: Annotation) => void;\n}\nconst annotationBackend: AnnotationBackend = {\n  /* create your backend here */\n}\n")))}b.isMDXComponent=!0}}]);