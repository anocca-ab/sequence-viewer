# Anocca sequence viewer

A DNA and protein sequence viewer developed and maintained by [Anocca](https://www.anocca.com).

[![GitHub Repo stars](https://img.shields.io/github/stars/anocca-ab/sequence-viewer?style=social)](https://github.com/anocca-ab/sequence-viewer)

# See [documentation](https://anocca-ab.github.io/sequence-viewer/)
## Packages

|name|version|downloads|changelog|
|---|---|---|---|
|@anocca/sequence-viewer-render-linear|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-render-linear)](https://www.npmjs.com/package/@anocca/sequence-viewer-render-linear)|[![npm](https://img.shields.io/npm/dw/@anocca/sequence-viewer-render-linear?label=npm%20downloads)](https://www.npmjs.com/package/@anocca/sequence-viewer-render-linear)|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-render-linear?color=cyan&label=changelog)](https://github.com/anocca-ab/sequence-viewer/tree/main/render/linear/CHANGELOG.md)|
|@anocca/sequence-viewer-react-mui|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-react-mui)](https://www.npmjs.com/package/@anocca/sequence-viewer-react-mui)|[![npm](https://img.shields.io/npm/dw/@anocca/sequence-viewer-react-mui?label=npm%20downloads)](https://www.npmjs.com/package/@anocca/sequence-viewer-react-mui)|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-react-mui?color=cyan&label=changelog)](https://github.com/anocca-ab/sequence-viewer/tree/main/react/mui/CHANGELOG.md)|
|@anocca/sequence-viewer-react-shared|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-react-shared)](https://www.npmjs.com/package/@anocca/sequence-viewer-react-shared)|[![npm](https://img.shields.io/npm/dw/@anocca/sequence-viewer-react-shared?label=npm%20downloads)](https://www.npmjs.com/package/@anocca/sequence-viewer-react-shared)|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-react-shared?color=cyan&label=changelog)](https://github.com/anocca-ab/sequence-viewer/tree/main/react/shared/CHANGELOG.md)|
|@anocca/sequence-viewer-app|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-app)](https://www.npmjs.com/package/@anocca/sequence-viewer-app)|[![npm](https://img.shields.io/npm/dw/@anocca/sequence-viewer-app?label=npm%20downloads)](https://www.npmjs.com/package/@anocca/sequence-viewer-app)|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-app?color=cyan&label=changelog)](https://github.com/anocca-ab/sequence-viewer/tree/main/app/CHANGELOG.md)|
|@anocca/sequence-viewer-react-circular|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-react-circular)](https://www.npmjs.com/package/@anocca/sequence-viewer-react-circular)|[![npm](https://img.shields.io/npm/dw/@anocca/sequence-viewer-react-circular?label=npm%20downloads)](https://www.npmjs.com/package/@anocca/sequence-viewer-react-circular)|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-react-circular?color=cyan&label=changelog)](https://github.com/anocca-ab/sequence-viewer/tree/main/react/circular/CHANGELOG.md)|
|@anocca/sequence-viewer-react-linear|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-react-linear)](https://www.npmjs.com/package/@anocca/sequence-viewer-react-linear)|[![npm](https://img.shields.io/npm/dw/@anocca/sequence-viewer-react-linear?label=npm%20downloads)](https://www.npmjs.com/package/@anocca/sequence-viewer-react-linear)|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-react-linear?color=cyan&label=changelog)](https://github.com/anocca-ab/sequence-viewer/tree/main/react/linear/CHANGELOG.md)|
|@anocca/sequence-viewer-utils|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-utils)](https://www.npmjs.com/package/@anocca/sequence-viewer-utils)|[![npm](https://img.shields.io/npm/dw/@anocca/sequence-viewer-utils?label=npm%20downloads)](https://www.npmjs.com/package/@anocca/sequence-viewer-utils)|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-utils?color=cyan&label=changelog)](https://github.com/anocca-ab/sequence-viewer/tree/main/utils/CHANGELOG.md)|
|@anocca/sequence-viewer-render-circular|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-render-circular)](https://www.npmjs.com/package/@anocca/sequence-viewer-render-circular)|[![npm](https://img.shields.io/npm/dw/@anocca/sequence-viewer-render-circular?label=npm%20downloads)](https://www.npmjs.com/package/@anocca/sequence-viewer-render-circular)|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-render-circular?color=cyan&label=changelog)](https://github.com/anocca-ab/sequence-viewer/tree/main/render/circular/CHANGELOG.md)|
|@anocca/sequence-viewer-backend-react-state|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-backend-react-state)](https://www.npmjs.com/package/@anocca/sequence-viewer-backend-react-state)|[![npm](https://img.shields.io/npm/dw/@anocca/sequence-viewer-backend-react-state?label=npm%20downloads)](https://www.npmjs.com/package/@anocca/sequence-viewer-backend-react-state)|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-backend-react-state?color=cyan&label=changelog)](https://github.com/anocca-ab/sequence-viewer/tree/main/backend/react-state/CHANGELOG.md)|
|@anocca/sequence-viewer-react-mui-formik-form|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-react-mui-formik-form)](https://www.npmjs.com/package/@anocca/sequence-viewer-react-mui-formik-form)|[![npm](https://img.shields.io/npm/dw/@anocca/sequence-viewer-react-mui-formik-form?label=npm%20downloads)](https://www.npmjs.com/package/@anocca/sequence-viewer-react-mui-formik-form)|[![npm](https://img.shields.io/npm/v/@anocca/sequence-viewer-react-mui-formik-form?color=cyan&label=changelog)](https://github.com/anocca-ab/sequence-viewer/tree/main/react/mui-formik-form/CHANGELOG.md)|


# Developer guide
## Setting up your git credentials
```bash
git config --local user.email '<Your GitHub username>@users.noreply.github.com'
```

## Required programs
pnpm

`curl -fsSL https://get.pnpm.io/install.sh | sh -`

rush

`npm install -g @microsoft/rush`

heft

`npm install -g @rushstack/heft`

api-extractor

`npm install -g @microsoft/api-documenter`



## Updating the packages and previewing result in the website
1. Go to the `website` folder.

2. Install dependencies: `yarn install`

3. Start the server: `yarn start`

4. Make updates in the packages

5. Build your changes `rush build -T @anocca/sequence-viewer-website`

6. See result in browser

## Updating the general docs
Go to the `website` folder.

Install dependencies: `yarn install`

Start the server: `yarn start`

Deploy the docs: `GIT_USER=<Your GitHub username> USE_SSH=true yarn deploy`

## Updating API docs
If you've updated the docstrings in the code run:

```bash
npm install -g @microsoft/api-documenter
cd website && ./write-docs.sh
```

This requires api-extractor (`npm install -g @microsoft/api-documenter`)

## Update changelogs
```bash
rush change
```

## Bump versions
```bash
rush version --bump
```

## Publish npm packages

```bash
NPM_AUTH_TOKEN=npm_... rush publish -p --include-all
```

## Useful vscode extension
The [vscode-monorepo-workspace](https://github.com/folke/vscode-monorepo-workspace) extension can make some of the tooling like prettier and eslint work better in vscode.


## Creating a PR
When you have made changes, please describe which issue it solves and how it has been tested

## Convert all files to LF
*âš  will not work if there are spaces in the file names*
```bash
git ls-tree --full-tree -r --name-only HEAD | xargs dos2unix
```

We are using the following settings, which is automatically enforced by the `.gitattributes` file:
```bash
git config --local core.eol lf # all checked out files should have LF
git config --local core.autocrlf input # convert all added CRLF to LF when staging
```

## Get latest version of each package
```bash
cat rush.json | \
grep -A 2 '"packageName": "@anocca' | \
grep -B 2 '"shouldPublish": true' | \
grep 'projectFolder' | \
awk '{ print substr($2, 2, length($2)-3) "/package.json" }' | \
xargs cat | \
grep -B 1 '"version"' | \
sed 'N;N;s/\n/ /g;s/--//' | \
awk '{ print substr($2, 1, length($2)-1) ": " $4 }'
```
